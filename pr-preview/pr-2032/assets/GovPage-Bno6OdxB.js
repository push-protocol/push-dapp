import{ef as me,ei as x,eh as we,g9 as pt,ga as gt,d_ as t,e9 as g,eT as h,eU as C,eV as be,e3 as ht,eX as ut,e4 as ft,dX as o,fO as xt,dV as mt,gb as wt,fz as bt,fA as De,fy as Dt,eY as Ee,e8 as w,e0 as U,eZ as Et,eW as y,gc as _,gd as yt,ge as vt,d$ as St,ep as L,e6 as Tt,f0 as jt,ec as At,f2 as Mt,__tla as Ct}from"./index-gZckmLaI.js";import{C as Pt,__tla as It}from"./ContentLayout-BXpufNTd.js";import{E as X,__tla as Ot}from"./EPNSCoreHelper-fqF0NsaA.js";let ye,Nt=Promise.all([(()=>{try{return Ct}catch{}})(),(()=>{try{return It}catch{}})(),(()=>{try{return Ot}catch{}})()]).then(async()=>{const ve={name:"Auryn Macmillan",wallet:"auryn.eth",url:"https://twitter.com/auryn_macmillan",pic:"auryn",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/3"},Se={name:"Luka Su\u010Di\u0107",wallet:"lukaskywalker.eth",url:"https://twitter.com/beler",pic:"beler",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/4"},Te={name:"DefiDad",wallet:"defidad.eth",url:"https://twitter.com/DeFi_Dad",pic:"defi_dad",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/7"},je={name:"Anton Mozgovoy",wallet:"mozgovoy.eth",url:"https://twitter.com/mozgovoy_anton",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/8"},Ae={name:"Vijay Gir",wallet:"0x4498e30066c3188eA5B8908780A7A576e21f3eE3",url:"https://twitter.com/imvijaygir",pic:"imvijaygir",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/10"},Me={name:"Robin Roy",wallet:"0x73eEf70d9B803f0066a1569393d6299369fA3C87",url:"https://twitter.com/robin_rrtx",pic:"robin_rrtx",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/11"},Ce={name:"Jaf",wallet:"mrjaf.eth",url:"https://twitter.com/jafetsc",pic:"jaf",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/12"},Pe={name:"Lubna Mohsin",wallet:"0x836ccDEF1F4d2eFF9402DedF3B4beF69dD13764e",url:"https://twitter.com/MrsMoo40402659",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/15"},Ie={name:"Aiswarya Walter",wallet:"0x1c8c125C1Eac1C8d450979cbf0146985D75df55A",url:"https://twitter.com/miss__walter",pic:"aiswarya",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/17"},Oe={name:"Vamoose",wallet:"0xeB901cFD3b214247a460861F65502E7332c8aF06",url:"https://twitter.com/learn4life6",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/19"},Ne={name:"Zaryab Afser",wallet:"0x554d29160f779Adf0a4328597cD33Ea1Df4D9Ee9",url:"https://twitter.com/Zaryab84339098",pic:"zaryab",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/21"},_e={name:"Ashis Kumar Pradhan",wallet:"0x5913760160d245d0C9A05a8a956012694281bEE3",url:"https://twitter.com/AshisKu88733868",pic:"ashis",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/22"},$e={name:"Krishnanand V P",wallet:"0x3cc04C46426C7504b59060981e6b5aD7D848E119",url:"https://twitter.com/incrypto32",pic:"krishna",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/25"},ke={name:"Pranshu Rastogi",wallet:"0xcB034160f7B45E41E6015ECEA09F31A66C144422",url:"https://twitter.com/pranshu3196",pic:"pranshu",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/26"},Ue={name:"Ray",wallet:"0x8edF4866E26bb82d288845bF55f15370bb4e6027",url:"https://twitter.com/Rayomand14",pic:"ray",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/13"},Le={name:"Alexander",wallet:"0xC076FE76E995cC6FFF0F1e58fcA10Dbb8Fc5581F",url:"https://twitter.com/xand6r",pic:"alex",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/20"},Fe={name:"Ashwani Mittal",wallet:"0x767631aB6d49C41414C318a0E3DB215d36B965Ab",url:"https://twitter.com/mittalashwani1",pic:"ashwani",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/24"},Re={name:"Jude Dike",wallet:"dumebi.eth",url:"https://twitter.com/bigbrutha_",pic:"jude",forum:"https://gov.epns.io/t/epns-push-delegatee-nominations/21/33"},Be={delegatee01:ve,delegatee02:Se,delegatee03:Te,delegatee04:je,delegatee06:Ae,delegatee07:Me,delegatee08:Ce,delegatee09:Pe,delegatee10:Ie,delegatee11:Oe,delegatee12:Ne,delegatee13:_e,delegatee14:$e,delegatee15:ke,delegatee16:Ue,delegatee17:Le,delegatee18:Fe,delegatee19:Re},i=new Array(4);function Ge(e){for(let s=0;s<i.length;s++)i[s]=0;for(let s=0;s<e.length;s++)i[s%4]=(i[s%4]<<5)-i[s%4]+e.charCodeAt(s)}function v(){const e=i[0]^i[0]<<11;return i[0]=i[1],i[1]=i[2],i[2]=i[3],i[3]=i[3]^i[3]>>19^e^e>>8,(i[3]>>>0)/(1<<31>>>0)}function F(){const e=Math.floor(v()*360),s=`${v()*60+40}%`,a=`${(v()+v()+v()+v())*25+50}%`;return`hsl(${e},${s},${a})`}function ze(e){const s=e,a=e,n=Math.ceil(s/2),l=s-n,c=[];for(let u=0;u<a;u++){const f=[];for(let D=0;D<n;D++)f[D]=Math.floor(v()*2.3);const b=f.slice(0,l);b.reverse(),f.push(...b),c.push(...f)}return c}function Je(e){const s={};return s.seed=e.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16),Ge(s.seed),s.size=e.size||8,s.scale=e.scale||4,s.color=e.color||F(),s.bgcolor=e.bgcolor||F(),s.spotcolor=e.spotcolor||F(),s}function Z(e,s){e=Je(e||{});const a=ze(e.size),n=Math.sqrt(a.length);s.width=s.height=e.size*e.scale;const l=s.getContext("2d");l.fillStyle=e.bgcolor,l.fillRect(0,0,s.width,s.height),l.fillStyle=e.color;for(let c=0;c<a.length;c++)if(a[c]){const u=Math.floor(c/n),f=c%n;l.fillStyle=a[c]==1?e.color:e.spotcolor,l.fillRect(f*e.scale,u*e.scale,e.scale,e.scale)}return s}function He(e){const s=document.createElement("canvas");return Z(e,s),s}const Ve={create:He,render:Z};class Ye extends me.Component{constructor(s){super(s)}getOpts(){return{seed:this.props.opts.seed||"foo",color:this.props.opts.color||"#dfe",bgcolor:this.props.opts.bgcolor||"#a71",size:this.props.opts.size||15,scale:this.props.opts.scale||3,spotcolor:this.props.opts.spotcolor||"#000"}}componentDidMount(){this.draw()}componentDidUpdate(s){this.props.seed!==s.seed&&this.draw()}draw(){Ve.render({seed:this.props.opts.seed,size:this.props.opts.size,scale:this.props.opts.scale},this.canvas)}render(){return me.createElement("canvas",{ref:s=>this.canvas=s})}}const Ke=50,R={type:x.TYPE.ERROR,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},Xe=async(e,s)=>await X.getGasPriceInDollars(s)*e>Ke?"Gas Price is too high, Please try again in a while.":!1,Ze=async({delegateeAddress:e,account:s,epnsToken:a,addresses:n,signerObject:l,provider:c,setTxLoading:u})=>{console.debug("\u{1F680} ~ file: ViewDelegateeItem.js ~ line 63 ~ createTransactionObject ~ delegateeAddress",e);const f=await a.name(),b=await a.nonces(s),D=we.coreContractChain,S=n.epnsToken,m=(Math.round(new Date().getTime()/1e3)+10800).toString();console.debug(m);const de={name:f,chainId:D,verifyingContract:S},G={Delegation:[{name:"delegatee",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"}]},pe={delegatee:e==null?void 0:e.toString(),nonce:b.toString(),expiry:m.toString()};let P;try{P=await l._signTypedData(de,G,pe);var{r:ge,s:z,v:p}=pt(P);const M=await a.estimateGas.delegateBySig(e,b,m,p,ge,z),T=await Xe(M,c);if(T)return x.dark(T,{position:"bottom-right",...R});try{await We({signature:P,delegatee:e,nonce:b,expiry:m,account:s}),x.dark("Successfully Delegated",{position:"bottom-right",type:x.TYPE.SUCCESS,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(J){x.dark(J.message,{position:"bottom-right",...R})}finally{u(!1)}}catch(M){console.error("error",M),x.dark(M.message,{position:"bottom-right",...R}),u(!1)}},We=async({signature:e,delegatee:s,nonce:a,expiry:n,account:l})=>{console.debug(`\u{1F680} ~ file: PushGovernance.tsx ~ line 271 ~ callDelegateAPI ~ signature obj delegator: ${l} signature: ${e} delegatee: ${s} nonce: ${a} expiry: ${n}  `),await gt("/gov/gasless_delegate",{delegator:l,signature:e,delegatee:s,nonce:a.toString(),expiry:n})},qe=async({delegateeAddress:e,epnsToken:s,toast:a,setTxInProgress:n,provider:l,LoaderToast:c})=>{console.debug("delegateeAddress",e);let u;u=s.delegate(e),u.then(async f=>{let b=a.dark(t.jsx(c,{msg:"Waiting for Confirmation...",color:"#35c5f3"}),{position:"bottom-right",autoClose:!1,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});try{await l.waitForTransaction(f.hash),a.update(b,{render:"Transaction Completed!",type:a.TYPE.SUCCESS,autoClose:5e3}),n(!1)}catch(D){a.update(b,{render:"Transaction Failed! ("+D.name+")",type:a.TYPE.ERROR,autoClose:5e3}),n(!1)}}).catch(f=>{a.dark("Transaction Cancelled!",{position:"bottom-right",type:a.TYPE.ERROR,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n(!1)})},W=Be,q=75e3,Q=100,Qe=()=>{ut.pageview("/governance");const e=ft(),{web3NameList:s}=o.useContext(xt),{account:a,provider:n,chainId:l}=mt(),c=l===we.coreContractChain,[u,f]=o.useState(!0),[b,D]=o.useState(!0),[S,m]=o.useState(!1),[de,G]=o.useState({}),[pe,P]=o.useState([]),[ge,z]=o.useState([]),[p,M]=o.useState(null),[T,J]=o.useState(null),[$,tt]=o.useState(null),[I,H]=o.useState(!1),[he,st]=o.useState(null),[V,at]=o.useState(null),[k,ot]=o.useState("0x"),[ue,fe]=o.useState(null),[nt,rt]=o.useState(null),[Y,_t]=o.useState("withgas");wt(a);const K=s[a];o.useEffect(()=>{if(!c){const r=window.location.origin;window.location.replace(`${r}/#/notavailable`)}}),o.useEffect(()=>{if(console.debug(a),n&&a){let r=n.getSigner(a);rt(r);const d=new bt(De.epnsToken,Dt.epnsToken,r);M(d)}},[a]),o.useEffect(()=>{p&&ct()},[p,a,n,$,T]),o.useEffect(()=>{f(!1)},[a]),o.useEffect(()=>{if(!p)return;const r=Object.values(W),d=(E,A)=>A.votingPower-E.votingPower,j=r.map(async E=>{const{wallet:A}=E,O=await X.getVotingPower(A,p);return{...E,votingPower:Number(O)}});Promise.all(j).then(E=>{const A=[...E.filter(({votingPower:N,votingPowerSimulate:$t})=>N>=q)].sort(d);P(A);const O=[...E.filter(({votingPower:N})=>N<q)].sort(d);z(O),D(!1)}),G(W)},[p]);const it=r=>At(r)?!0:(x.dark("Invalid address!",{position:"bottom-right",type:x.TYPE.ERROR,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),!1),lt=async r=>{try{const d=await X.getVotingPower(r,p,!0);fe(d)}catch(d){console.error("\u{1F680} ~ file: Delegate.tsx ~ line 86 ~ getVotingPower ~ err",d)}},ct=async()=>{let r=await p.balanceOf(a),d=await p.decimals(),j=await Number(r/Math.pow(10,d)),E=j.toString(),A=await p.delegates(a),O=await p.getCurrentVotes(a),N=(await Number(O/Math.pow(10,d))).toLocaleString();J(j),tt(E),st(A),at(N)},xe=async r=>{m(!0);const d=await it(r),j=await r;if(console.debug(d),!d){m(!1);return}if(console.debug("balance",T),console.debug("transaction mode",Y),T==0){x.dark("No PUSH to Delegate!",{position:"bottom-right",type:x.TYPE.ERROR,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),m(!1);return}if(Y==="withgas"){qe({delegateeAddress:j,epnsToken:p,toast:x,setTxInProgress:m,provider:n,LoaderToast:dt});return}if(T<Q){x.dark("Atleast "+Q+" PUSH required for gasless delegation!",{position:"bottom-right",type:x.TYPE.ERROR,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),m(!1);return}console.debug(r,"lets see"),await Ze({delegateeAddress:j,account:a,epnsToken:p,addresses:De,signerObject:nt,provider:n,setTxLoading:m})},dt=({msg:r,color:d})=>t.jsxs(te,{children:[t.jsx(U,{}),t.jsx(se,{children:r})]});return console.log(Y,"transactionMode"),t.jsx(et,{children:t.jsx(Ee,{alignItems:"stretch",children:t.jsxs(w,{align:"stretch",justify:"flex-start",margin:"0px 15px 15px 15px",children:[(u||!$||!V)&&t.jsx(w,{padding:"20px",children:t.jsx(U,{})}),t.jsx(Ee,{margin:"0px 0px 0px 0px",children:t.jsx(Et,{children:t.jsx(y,{weight:"400",size:"32px",color:e.color,children:"Governance Dashboard"})})}),!u&&$&&V&&t.jsx(w,{margin:"10px 0px 0px 0px",self:"stretch",items:"stretch",children:t.jsxs(ae,{align:"stretch",justify:"flex-start",self:"stretch",bg:e.default.secondaryBg,op:"1",children:[t.jsx(oe,{bg:"#e20880",children:"Governance Dashboard"}),t.jsxs(ne,{children:[t.jsxs(_,{align:"stretch",self:"stretch",children:[t.jsxs(w,{align:"center",self:"center",flex:"initial",padding:"10px",children:[t.jsx(ie,{children:t.jsx(le,{children:t.jsx(Ye,{seed:a.toLowerCase(),opts:{seed:a.toLowerCase(),size:10,scale:10}})})}),t.jsx(ce,{children:K===null?t.jsx(U,{}):K?t.jsx(t.Fragment,{children:K}):t.jsx(t.Fragment,{children:yt(a,6)})})]}),t.jsxs(w,{align:"flex-start",self:"stretch",padding:"10px",size:"16px",children:[t.jsxs(_,{flex:"initial",padding:"5px",children:[t.jsxs(y,{weight:"500",padding:"0px 8px 0px 0px",color:e.color,children:["$PUSH Balance:"," "]}),t.jsx(B,{bg:"#e20880",color:"#fff",weight:"600",padding:"4px 8px",textTransform:"uppercase",children:$})]}),t.jsxs(_,{flex:"initial",padding:"5px",children:[t.jsxs(y,{weight:"500",padding:"0px 8px 0px 0px",color:e.color,children:["Voting Power:"," "]}),t.jsx(B,{bg:"#35c5f3",color:"#fff",weight:"600",padding:"4px 8px",textTransform:"uppercase",children:V})]}),he!=="0x0000000000000000000000000000000000000000"&&t.jsxs(_,{flex:"initial",padding:"5px",children:[t.jsx(y,{padding:"0px 8px 0px 0px",children:"Delegated To: "}),t.jsx(y,{weight:"600",children:he})]})]})]}),I&&t.jsx(w,{bg:"#eeeeeeee",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",children:t.jsxs(w,{align:"stretch",self:"stretch",margin:"0px 20px 40px 20px",children:[t.jsx(y,{color:"#000",weight:"400",children:"Enter delegatee address"}),t.jsx("br",{}),t.jsx(vt,{placeholder:"Enter delegatee address",radius:"4px",padding:"12px",self:"stretch",bg:"#fff",value:k,onChange:async r=>{ot(r.target.value),fe(null)}}),ue&&k&&t.jsxs(re,{children:["Voting Power: ",ue]})]})}),t.jsx(w,{self:"stretch",align:"flex-end",children:t.jsx(_,{children:t.jsxs(St,{gap:"s2",display:"flex",flexDirection:"row",children:[!S&&t.jsx(L,{variant:"primary",size:"small",disabled:S,onClick:()=>{I?xe(k):H(!0)},children:t.jsx(y,{color:"#fff",weight:"400",children:"Delegate to Others"})}),!I&&!S&&t.jsx(L,{variant:"outline",size:"small",disabled:S,onClick:()=>{xe(a)},children:"Delegate to Myself"}),t.jsx(L,{variant:"tertiary",size:"small",onClick:()=>{I?lt(k):H(!0)},children:S?t.jsx(ee,{children:t.jsx(U,{})}):t.jsx(y,{color:"#fff",weight:"400",children:"Query Voting Power"})}),I&&t.jsx(L,{variant:"tertiary",size:"small",onClick:()=>{H(!1)},children:"Close"})]})})})]})]})})]})})})},et=g(Tt)`
  align-items: center;
  align-self: center;
  background: ${e=>e.theme.default.bg};
  border-radius: ${h.ADJUSTMENTS.RADIUS.LARGE};
  box-shadow: ${h.ADJUSTMENTS.MODULE_BOX_SHADOW};
  display: flex;
  flex-direction: column;
  flex: initial;
  justify-content: center;
  max-width: 1200px;
  width: calc(
    100% - ${C.MINI_MODULES.DESKTOP.RIGHT} - ${C.MINI_MODULES.DESKTOP.LEFT} -
      ${h.ADJUSTMENTS.PADDING.BIG} - ${h.ADJUSTMENTS.PADDING.BIG}
  );
  padding: ${h.ADJUSTMENTS.PADDING.BIG};
  position: relative;
  margin: ${h.ADJUSTMENTS.MARGIN.MINI_MODULES.DESKTOP};

  @media ${be.laptop} {
    margin: ${h.ADJUSTMENTS.MARGIN.MINI_MODULES.TABLET};
    padding: ${h.ADJUSTMENTS.PADDING.DEFAULT};
    width: calc(
      100% - ${C.MINI_MODULES.TABLET.RIGHT} - ${C.MINI_MODULES.TABLET.LEFT} -
        ${h.ADJUSTMENTS.PADDING.DEFAULT} - ${h.ADJUSTMENTS.PADDING.DEFAULT}
    );
  }

  @media ${be.mobileM} {
    margin: ${h.ADJUSTMENTS.MARGIN.MINI_MODULES.MOBILE};
    padding: ${h.ADJUSTMENTS.PADDING.DEFAULT};
    width: calc(
      100% - ${C.MINI_MODULES.MOBILE.RIGHT} - ${C.MINI_MODULES.MOBILE.LEFT} -
        ${h.ADJUSTMENTS.PADDING.DEFAULT} - ${h.ADJUSTMENTS.PADDING.DEFAULT}
    );
  }
`;g(jt)`
  align-items: stretch;
  align-self: stretch;
  background: #fff;
`;let ee,te,se,ae,oe,ne,re,B,ie,le,ce;ee=g.span`
  ${e=>e.hideit&&ht`
      visibility: hidden;
    `};
`,te=g.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  margin: 0px 10px;
`,se=g.div`
  margin: 0px 10px;
`,ae=g(w)`
  overflow: hidden;
  min-width: 180px;

  border-radius: 12px;
  border: 1px solid ${e=>e.theme.default.border};

  &:hover {
    opacity: ${e=>e.op?"0.9":e.op};
  }
`,oe=g(w)`
  flex: 0;
  align-self: stretch;
  color: #fff;
  top: 0px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: normal;
  font-size: 15px;
  text-align: center;
  padding: 10px 5px;
  right: 0;
  left: 0;
`,ne=g(w)`
  padding: 20px 20px;
`,re=g.span`
  // font-weight: bold;
  font-size: 15px;
  letter-spacing: normal;
  align-items: left;
  margin-top: 10px;
`,B=g(y)`
  font-size: 14px;
`,ie=g.div`
  position: relative;
  width: 96px;
  height: 96px;
  border-radius: 100%;
  overflow: hidden;
  transform: scale(0.85);
  outline-width: 2px;
  outline-color: rgba(225, 225, 225, 1);
`,le=g.div``,ce=g.span`
  margin: 10px 10px;
  padding: 8px 15px;
  height: 16px;
  display: none;
  align-items: baseline;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  color: #fff;
  border-radius: 15px;
  background: #333;
  &:hover {
    opacity: 0.9;
    cursor: pointer;
    pointer: hand;
  }
  &:active {
    opacity: 0.75;
    cursor: pointer;
    pointer: hand;
  }
`,ye=()=>t.jsx(Pt,{children:t.jsx(Qe,{})}),g(Mt)`
  flex: 1;
  flex-direction: column;
  align-self: stretch;
`});export{Nt as __tla,ye as default};
