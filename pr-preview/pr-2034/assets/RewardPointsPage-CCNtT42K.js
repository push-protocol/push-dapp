import{ea as F,h3 as A,g1 as E,h4 as G,dX as x,eD as B,dW as z,dV as j,gp as R,fG as H,eU as M,h5 as U,d_ as e,d$ as s,e3 as W,e2 as n,g4 as O,ep as V,g9 as X,em as g,h6 as q,__tla as J}from"./index-CHLbB0dT.js";import{u as N,__tla as Q}from"./useDiscordSession-DvdNPtFa.js";import{g as Y,__tla as Z}from"./generateVerificationProof-BpLz1d1_.js";import{P as ee,__tla as ae}from"./Points-CfUlrMH9.js";import{R as ie,__tla as te}from"./Refresh-DbioOsqV.js";import{C as re,__tla as se}from"./ContentLayout-BzqZ5MOq.js";let K,ne=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ae}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return se}catch{}})()]).then(async()=>{let y,v,P,m,_,w,k,b,S,I,C;y=i=>i,v=i=>F({method:"POST",url:`${A()}/users/`,data:{userWallet:i.userWallet,pgpPublicKey:i.pgpPublicKey,verificationProof:i.verificationProof,refPrimary:i.refPrimary},headers:{"Content-Type":"application/json"}}).then(t=>y(t.data)),P=()=>E({mutationKey:[G],mutationFn:v}),m=[{value:"dashboard",label:"Dashboard"},{value:"activity",label:"Reward Activities"},{value:"leaderboard",label:"Leaderboard"}],_=()=>{const[i,t]=x.useState(m[0].value),o=B(),a=z();return x.useEffect(()=>{const r=o.pathname.split("/")[2];r&&r!==i?t(r):!r&&i!==m[0].value&&t(m[0].value)},[o,i]),{activeTab:i,handleSetActiveTab:r=>{r!==i&&(t(r),r=="dashboard"?a("/points"):a(`/points/${r}`))}}},w=()=>{const{account:i}=j(),t=R({account:i}),[o,a]=x.useState(!1),{isUserProfileUnlocked:r}=x.useContext(H),{userPushSDKInstance:l}=M(p=>p.user),h=(l==null?void 0:l.account)===i,{status:c,refetch:u}=U({caip10WalletAddress:t}),{mutate:d}=P(),D=async({userPushSDKInstance:p})=>{const f=sessionStorage.getItem("ref"),T={...f&&{refPrimary:f},userWallet:t},L=await Y(T,p);L&&d({pgpPublicKey:p==null?void 0:p.pgpPublicKey,userWallet:t,verificationProof:L,refPrimary:f},{onSuccess:()=>{a(!0),u()},onError:$=>{console.error("Error",$)}})};return x.useEffect(()=>{r&&h&&c!=="success"&&D({userPushSDKInstance:l})},[r,l,i]),{handleCreateUser:D,isSuccess:o,setIsSuccess:a,isUserProfileUnlocked:r}},k=({})=>{const i=()=>{window.open("http://portal.push.org/rewards")};return e.jsx(s,{borderRadius:"radius-md",display:"flex",padding:{tb:"spacing-sm",initial:"spacing-md"},alignItems:"center",justifyContent:"space-between",flexDirection:{tb:"column",initial:"row"},css:W`
        background: radial-gradient(circle, rgba(222, 190, 255, 1) 0%, rgba(192, 255, 247, 1) 85%);
      `,children:e.jsxs(s,{width:"-webkit-fill-available",display:"flex",flexDirection:{tb:"column",initial:"row"},gap:{tb:"spacing-sm"},alignItems:{tb:"stretch",initial:"center"},justifyContent:"space-between",children:[e.jsxs(s,{gap:"spacing-xs",display:"flex",alignItems:"center",children:[e.jsx(ee,{}),e.jsxs(s,{display:"flex",flexDirection:"column",children:[e.jsx(n,{variant:"h4-semibold",color:"text-on-light-bg",children:"Push Points S2 is Live"}),e.jsx(s,{maxWidth:{tb:"auto",initial:"607px"},children:e.jsxs(n,{variant:"bl-regular",color:"text-on-light-bg",children:["Season 1 has ended and your points have been snapshot. Participate in Season 2 at"," ",e.jsx(O,{to:"https://portal.push.org/rewards",target:"_blank",textProps:{variant:"bl-regular",color:"text-on-light-bg",css:W`
                      display: inline;
                    `},children:"Push Portal"})]})})]})]}),e.jsx(V,{variant:"tertiary",size:"medium",onClick:i,children:"Go To Season 2"})]})})},b=({title:i,points:t,rank:o,usersInvited:a,refetch:r,isLoading:l,isFetching:h,data:c,multiplier:u})=>{const{isWalletConnected:d}=j();return e.jsxs(s,{width:"-webkit-fill-available",display:"flex",flexDirection:"column",padding:"spacing-md",borderRadius:"radius-md",gap:"spacing-xs",border:"border-sm solid stroke-secondary",minHeight:{tb:"115px",initial:"125px"},justifyContent:"space-between",children:[e.jsxs(s,{width:"-webkit-fill-available",display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"h5-bold",textTransform:"uppercase",color:"text-primary",children:i}),c&&r&&d&&e.jsxs(s,{display:"flex",alignItems:"center",cursor:"pointer",onClick:r,children:[e.jsx(X,{defaultBackground:"surface-brand-subtle",hoverBackground:"surface-brand-subtle",padding:"spacing-xxxs",borderRadius:"radius-sm",icon:e.jsx(ie,{color:"icon-brand-medium"})}),e.jsx(s,{margin:"spacing-none spacing-none spacing-none spacing-xxxs",children:e.jsx(n,{variant:"bs-semibold",color:"text-tertiary",children:h?"Updating...":"Update"})})]})]}),e.jsxs(s,{children:[e.jsx(g,{isLoading:l,children:d&&!u&&e.jsx(n,{variant:"h1-bold",color:"text-primary",children:t!==void 0?t==null?void 0:t.toLocaleString():"0"})}),!d&&!u&&e.jsx(n,{variant:"h1-bold",color:"text-primary",children:"-"}),(!d&&u||d&&u&&!c)&&e.jsx(g,{isLoading:l,children:e.jsx(n,{variant:"h1-bold",color:"text-primary",children:"1x"})}),d&&u&&c&&e.jsxs(g,{isLoading:l,children:[e.jsx(n,{variant:"h1-bold",color:"text-primary",children:`${c==null?void 0:c.multiplier}x`}),e.jsx(n,{variant:"h5-bold",color:"text-tertiary",children:"Complete activities to increase"})]}),e.jsx(g,{isLoading:l,children:t&&t>0&&o!=null?e.jsx(n,{variant:"h5-bold",color:"text-tertiary",children:o>0&&`Rank #${o}`}):null}),e.jsx(g,{isLoading:l,children:a&&a>0?e.jsx(n,{variant:"h5-bold",color:"text-tertiary",children:a>1?`${a} Users Invited`:`${a} User Invited`}):null})]})]})},S=({onGetStarted:i})=>{const{account:t}=j(),o=R({account:t}),{data:a,refetch:r,isLoading:l,isFetching:h}=U({caip10WalletAddress:o}),c=l;return e.jsx(e.Fragment,{children:e.jsxs(s,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:[e.jsx(n,{variant:"h4-bold",color:"text-primary",children:"Dashboard"}),e.jsx(k,{onGetStarted:i}),e.jsxs(s,{display:"flex",gap:"spacing-md",flexDirection:{tb:"column",initial:"row"},children:[e.jsx(b,{title:"Total Points",points:a==null?void 0:a.totalPoints,rank:a==null?void 0:a.rank,isLoading:c,isFetching:h,data:a,refetch:()=>r()}),e.jsx(b,{title:"Multiplier",multiplier:!0,points:a==null?void 0:a.referralPoints,data:a,isLoading:c}),e.jsx(b,{title:"Referral Points",points:a==null?void 0:a.referralPoints,usersInvited:a==null?void 0:a.usersInvited,isLoading:c})]})]})})},I=({})=>e.jsx(e.Fragment,{children:e.jsx(s,{backgroundColor:"surface-primary",borderRadius:"radius-md",display:"flex",flexDirection:"column",padding:{ml:"spacing-sm",initial:"spacing-md"},children:e.jsx(S,{})})}),C=()=>{const[i]=q(),t=i.get("ref");t&&sessionStorage.setItem("ref",t),N();const{activeTab:o}=_();w();const a=o==="leaderboard"?"Push Reward Points":"Introducing Push Reward Points Program";return e.jsxs(s,{flexDirection:"column",display:"flex",width:{initial:"100%",ml:"357px"},gap:"spacing-md",height:"100%",children:[e.jsx(n,{variant:"h3-bold",display:{ml:"none",initial:"block"},color:"text-primary",children:a}),e.jsx(n,{variant:"h4-semibold",display:{ml:"block",initial:"none"},color:"text-primary",children:a}),e.jsx(I,{})]})},K=()=>e.jsx(re,{children:e.jsx(C,{})})});export{ne as __tla,K as default};
