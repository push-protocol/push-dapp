import{hP as _,dX as u,hQ as xe,hR as ge,d_ as e,el as me,ea as w,h3 as v,g1 as E,hS as U,hT as fe,hU as ye,fb as je,hV as we,hW as T,hX as ve,hY as M,gd as Ce,gf as be,d$ as o,e2 as p,gu as L,ep as I,e3 as V,em as P,hZ as ke,g4 as B,e0 as O,e1 as R,ec as _e,h_ as Ie,h$ as Pe,__tla as Se}from"./index-BsX57OE7.js";import{c as Ee,a as J,u as Te,__tla as Me}from"./index.esm-DTbkfRMJ.js";import{P as Le,__tla as Oe}from"./PushLogo-CTPhlftA.js";import{S as Re,__tla as ze}from"./Search-DdUCSR4I.js";import{u as z,I as N,__tla as Ne}from"./InfiniteScroll-CRQZSjg0.js";import{R as qe,__tla as De}from"./Refresh-BjMpIlal.js";import{C as Fe,__tla as Ae}from"./ContentLayout-LGFXFxsm.js";let G,$e=Promise.all([(()=>{try{return Se}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Ae}catch{}})()]).then(async()=>{function q(t,r){return t.findAll(r.filters).map(a=>r.select?r.select(a):a.state)}function Q(t={},r){const a=_().getMutationCache(),n=u.useRef(t),i=u.useRef(null);return i.current||(i.current=q(a,t)),u.useEffect(()=>{n.current=t}),u.useSyncExternalStore(u.useCallback(l=>a.subscribe(()=>{const s=xe(i.current,q(a,n.current));i.current!==s&&(i.current=s,ge.schedule(l))}),[a]),()=>i.current,()=>i.current)}const X=t=>{const{svgProps:r,...a}=t;return e.jsx(me,{componentName:"UserSwitch",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[e.jsxs("g",{"clip-path":"url(#clip0_3426_11246)",children:[e.jsx("path",{d:"M16 19.3333C18.3932 19.3333 20.3333 17.3932 20.3333 15C20.3333 12.6067 18.3932 10.6666 16 10.6666C13.6067 10.6666 11.6666 12.6067 11.6666 15C11.6666 17.3932 13.6067 19.3333 16 19.3333Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M9 24C9.65629 22.596 10.6577 21.4167 11.8933 20.593C13.1288 19.7693 14.5503 19.3333 16 19.3333C17.4497 19.3333 18.8712 19.7693 20.1067 20.593C21.3423 21.4167 22.3437 22.596 23 24",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M23.6666 16L26.3333 18.6667L29 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M3 16L5.66667 13.3333L8.33333 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M5.66663 13.3333V15.9992C5.66582 18.2569 6.35708 20.4565 7.64085 22.2814C8.92463 24.1063 10.7347 25.4622 12.8103 26.1539C14.8859 26.8456 17.12 26.8373 19.1908 26.1302C21.2615 25.4232 23.0622 24.0539 24.3333 22.2196",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M26.3333 18.6666V16.0008C26.3341 13.7431 25.6428 11.5434 24.3591 9.71854C23.0753 7.89366 21.2653 6.53774 19.1896 5.84607C17.114 5.1544 14.8799 5.16268 12.8092 5.86972C10.7384 6.57675 8.93775 7.94605 7.66663 9.7804",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_3426_11246",children:e.jsx("rect",{width:"32",height:"32",fill:"white"})})})]}),...a})},Z=t=>t,Y=t=>t,ee=t=>({id:t.data.id,followersCount:t.data.public_metrics.followers_count,followingCount:t.data.public_metrics.following_count,likeCount:t.data.public_metrics.like_count,listedCount:t.data.public_metrics.listed_count,name:t.data.name,tweetCount:t.data.public_metrics.tweet_count,username:t.data.username}),te=t=>w({method:"POST",url:`${v()}/auth/login`,data:{username:t.username,password:t.password},headers:{"Content-Type":"application/json"}}).then(r=>Z(r.data)),re=({activityId:t,token:r})=>w({method:"POST",url:`${v()}/activities/approved`,data:{activities:[{activityId:t}]},headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>a.data),S=({page:t,status:r,pageSize:a,token:n,wallet:i,twitter:l,activityTypeId:s})=>w({method:"GET",url:`${v()}/activities/list`,params:{status:r,page:t,pageSize:a,wallet:i,twitter:l,activityTypeId:s},headers:{"Content-Type":"application/json",Authorization:n}}).then(c=>Y(c.data)),ae=({twitterHandle:t,token:r})=>w({method:"GET",url:`${v()}/twitter/user/${t}`,headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>ee(a.data)),ie=({activityId:t,token:r})=>w({method:"POST",url:`${v()}/activities/rejected`,data:{activities:[{activityId:t}]},headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>a.data),ne=()=>E({mutationKey:[U],mutationFn:te}),se=()=>E({mutationFn:re,mutationKey:[fe]}),oe=()=>E({mutationFn:ie,mutationKey:[ye]}),le=(t,r)=>je({queryKey:[we,t],queryFn:()=>ae({twitterHandle:t,token:r}),staleTime:1/0,retry:!1,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1,enabled:!!r&&!!t}),y=()=>{var t,r;return(r=(t=Q({filters:{mutationKey:[U]},select:a=>a.state.data}))==null?void 0:t[0])==null?void 0:r.token},ce=({status:t,pageSize:r=20,token:a,twitter:n,wallet:i,activityTypeId:l})=>z({queryKey:[T,`${n}-${i}`],initialPageParam:1,queryFn:({pageParam:s})=>S({status:t,page:s,pageSize:r,token:a,twitter:n,wallet:i,activityTypeId:l}),getNextPageParam:({page:s,total:c})=>s>=c?null:s+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1}),de=({status:t,pageSize:r=20,token:a,twitter:n,wallet:i,activityTypeId:l})=>z({queryKey:[ve,`${n}-${i}`],initialPageParam:1,queryFn:({pageParam:s})=>S({status:t,page:s,pageSize:r,token:a,twitter:n,wallet:i,activityTypeId:l}),getNextPageParam:({page:s,total:c})=>s>=c?null:s+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1}),ue=({status:t,pageSize:r=20,token:a,twitter:n,wallet:i,activityTypeId:l})=>z({queryKey:[M,`${n}-${i}`],initialPageParam:1,queryFn:({pageParam:s})=>S({status:t,page:s,pageSize:r,token:a,twitter:n,wallet:i,activityTypeId:l}),getNextPageParam:({page:s,total:c})=>s>=c?null:s+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1});function he(t,r){var a=u.useRef(!1),n=u.useRef(),i=u.useRef(t),l=u.useCallback(function(){return a.current},[]),s=u.useCallback(function(){a.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){a.current=!0,i.current()},r)},[r]),c=u.useCallback(function(){a.current=null,n.current&&clearTimeout(n.current)},[]);return u.useEffect(function(){i.current=t},[t]),u.useEffect(function(){return s(),c},[r]),[l,c,s]}function pe(t,r,a){a===void 0&&(a=[]);var n=he(t,r),i=n[0],l=n[1],s=n[2];return u.useEffect(s,a),[i,l]}let D,C,F,b,k,A,$,K,W,H;D=({handleSetActiveView:t})=>{const{mutate:r,isPending:a}=ne(),n=Ee().shape({username:J().required("Username is required"),password:J().required("Password is required")}),i=Te({initialValues:{username:"",password:""},validationSchema:n,onSubmit:c=>{s({...c})}}),l=Ce(),s=({username:c,password:h})=>{r({username:c,password:h},{onSuccess:x=>{t("list")},onError:x=>{x.name&&l.showMessageToast({toastTitle:"Error",toastMessage:x.response.data.error,toastType:"ERROR",getToastIcon:f=>e.jsx(be,{size:f,color:"red"})})}})};return e.jsxs(o,{alignItems:"center",display:"flex",flexDirection:"column",gap:"spacing-xxl",children:[e.jsxs(o,{display:"flex",gap:"spacing-xxxs",alignItems:"center",children:[e.jsx(Le,{}),e.jsx(p,{variant:"h2-semibold",color:"text-primary",children:"Push"})]}),e.jsxs(o,{width:"374px",display:"flex",alignItems:"center",padding:"spacing-md",flexDirection:"column",gap:"spacing-md",backgroundColor:"surface-primary",borderRadius:"radius-md",children:[e.jsx(p,{variant:"h4-bold",color:"text-primary",children:"Points Vault Login"}),e.jsx(o,{width:"100%",children:e.jsx("form",{onSubmit:i.handleSubmit,children:e.jsxs(o,{display:"flex",alignItems:"center",flexDirection:"column",gap:"spacing-xs",width:"100%",children:[e.jsx(o,{width:"100%",children:e.jsx(L,{placeholder:"User",value:i.values.username,disabled:a,onChange:i.handleChange("username"),error:i.touched.username&&!!i.errors.username,errorMessage:i.touched.username?i.errors.username:""})}),e.jsx(o,{width:"100%",children:e.jsx(L,{type:"password",placeholder:"Password",disabled:a,value:i.values.password,onChange:i.handleChange("password"),error:i.touched.password&&!!i.errors.password,errorMessage:i.touched.password?i.errors.password:""})}),e.jsx(o,{margin:"spacing-md spacing-none spacing-none spacing-none",children:e.jsx(I,{disabled:a,children:a?"Authenticating":"Login"})})]})})})]})]})},C=()=>e.jsxs(o,{display:"flex",justifyContent:"space-between",children:[e.jsx(o,{width:"345px",children:e.jsx(p,{variant:"c-bold",color:"text-tertiary",children:"USER"})}),e.jsx(o,{width:"345px",children:e.jsx(p,{variant:"c-bold",color:"text-tertiary",children:"TWITTER LINK"})}),e.jsx(o,{width:"42px",justifyContent:"center",display:"flex",children:e.jsx(p,{variant:"c-bold",color:"text-tertiary",children:"FOLLOWERS"})}),e.jsx(o,{width:"245px",display:"flex",justifyContent:"center",children:e.jsx(p,{variant:"c-bold",color:"text-tertiary",children:"ACTION"})})]}),F=({status:t,item:r,refetch:a})=>{const n=y(),{mutate:i,isPending:l}=oe(),{mutate:s,isPending:c}=se(),h=async()=>{i({activityId:r.activityId,currentStatus:t,token:n},{onSuccess:()=>a("REJECTED")})},x=async()=>{s({activityId:r.activityId,currentStatus:t,token:n},{onSuccess:()=>a("COMPLETED")})};return e.jsxs(o,{width:"208px",minWidth:"208px",minHeight:"22px",display:"flex",justifyContent:"center",gap:"spacing-xxs",children:[t!=="COMPLETED"&&e.jsx(I,{variant:"outline",size:"extraSmall",disabled:c||l,onClick:x,children:"Approve"}),t!=="REJECTED"&&e.jsx(I,{variant:"dangerSecondary",size:"extraSmall",disabled:c||l,onClick:h,children:"Reject"})]})},b=({isLoading:t,item:r,refetch:a})=>{var l,s,c;const n=y(),{data:i}=le((l=r.data)==null?void 0:l.twitter,n);return e.jsxs(o,{height:"48px",display:"flex",justifyContent:"space-between",alignItems:"center",css:V`
        border-bottom: var(--border-sm) solid var(--stroke-secondary);
      `,children:[e.jsx(P,{isLoading:t,children:e.jsx(o,{display:"flex",alignItems:"center",width:"345px",height:"22px",children:e.jsx(p,{variant:"bs-semibold",color:"text-secondary",children:ke(r.userWallet)})})}),e.jsx(P,{isLoading:t,children:e.jsx(o,{display:"flex",alignItems:"center",width:"345px",children:e.jsx(B,{to:`https://x.com/${(s=r.data)==null?void 0:s.twitter}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(p,{color:"text-brand-medium",variant:"bs-semibold",children:["https://x.com/",(c=r.data)==null?void 0:c.twitter]})})})}),e.jsx(P,{isLoading:t,children:e.jsx(o,{display:"flex",alignItems:"center",justifyContent:"center",width:"42px",children:e.jsx(p,{variant:"bs-semibold",color:i!=null&&i.followersCount&&i.followersCount<50?"text-state-danger-bold":"text-primary",children:(i==null?void 0:i.followersCount)??"-"})})}),e.jsx(P,{isLoading:t,children:e.jsx(o,{width:"245px",minHeight:"22px",display:"flex",justifyContent:"center",children:e.jsx(F,{refetch:a,status:r.status,item:r})})})]})},k=({heading:t,subHeading:r,error:a=!1,refetchLeaderboard:n})=>e.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"spacing-sm",padding:"spacing-xxxl",height:"200px",children:[e.jsx(X,{size:48,color:"icon-primary"}),e.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxxs",children:[t&&e.jsx(p,{textAlign:"center",variant:"h5-bold",color:"text-primary",children:t}),r&&e.jsx(p,{textAlign:"center",variant:"bs-regular",color:"text-tertiary-inverse",children:r})]}),a&&e.jsx(I,{onClick:()=>n==null?void 0:n(),variant:"tertiary",size:"small",leadingIcon:e.jsx(qe,{}),children:"Refresh"})]}),A=({query:t})=>{const r=y(),a=_(),{data:n,fetchNextPage:i,hasNextPage:l,isFetchingNextPage:s,isLoading:c,isError:h,refetch:x}=ce({status:"COMPLETED",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet,activityTypeId:"follow_push_on_twitter"}),f=!s&&l,g=c?Array(5).fill(0):(n==null?void 0:n.pages.flatMap(d=>d.activities))||[];if(!g.length)return e.jsx(k,{refetchLeaderboard:h?x:void 0,heading:"No Users Found",error:h,subHeading:h?"Please refresh to view the List":""});const j=()=>{x(),a.invalidateQueries({queryKey:[M]})};return e.jsx(o,{gap:"spacing-sm",display:"flex",flexDirection:"column",children:e.jsxs(o,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(C,{}),e.jsx(N,{pageStart:0,loadMore:()=>i(),hasMore:f,loader:e.jsx(o,{margin:"spacing-xs",children:e.jsx(O,{spinnerSize:24,type:R.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:g.map((d,m)=>e.jsx(b,{item:d,isLoading:c,refetch:j},(d==null?void 0:d.activityId)||m))})]})})},$=({query:t})=>{const r=y(),a=_(),{data:n,fetchNextPage:i,hasNextPage:l,isFetchingNextPage:s,isLoading:c,isError:h,refetch:x}=de({status:"PENDING",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet,activityTypeId:"follow_push_on_twitter"}),f=!s&&l,g=c?Array(5).fill(0):(n==null?void 0:n.pages.flatMap(d=>d.activities))||[];if(!g.length)return e.jsx(k,{refetchLeaderboard:h?x:void 0,heading:"No Users Found",error:h,subHeading:h?"Please refresh to view the List":""});const j=d=>{x();const m=d==="COMPLETED"?T:d==="REJECTED"?M:void 0;m&&a.invalidateQueries({queryKey:[m]})};return e.jsx(o,{gap:"spacing-sm",display:"flex",flexDirection:"column",children:e.jsxs(o,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(C,{}),e.jsx(N,{pageStart:0,loadMore:()=>i(),hasMore:f,loader:e.jsx(o,{margin:"spacing-xs",children:e.jsx(O,{spinnerSize:24,type:R.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:g.map((d,m)=>e.jsx(b,{item:d,isLoading:c,refetch:j},(d==null?void 0:d.activityId)||m))})]})})},K=({query:t})=>{const r=y(),a=_(),{data:n,fetchNextPage:i,hasNextPage:l,isFetchingNextPage:s,isLoading:c,isError:h,refetch:x}=ue({status:"REJECTED",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet,activityTypeId:"follow_push_on_twitter"}),f=!s&&l,g=c?Array(5).fill(0):(n==null?void 0:n.pages.flatMap(d=>d.activities))||[];if(!g.length)return e.jsx(k,{refetchLeaderboard:h?x:void 0,heading:"No Users Found",error:h,subHeading:h?"Please refresh to view the List":""});const j=()=>{x(),a.invalidateQueries({queryKey:[T]})};return e.jsx(o,{gap:"spacing-sm",display:"flex",flexDirection:"column",children:e.jsxs(o,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(C,{}),e.jsx(N,{pageStart:0,loadMore:()=>i(),hasMore:f,loader:e.jsx(o,{margin:"spacing-xs",children:e.jsx(O,{spinnerSize:24,type:R.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:g.map((d,m)=>e.jsx(b,{item:d,isLoading:c,refetch:j},(d==null?void 0:d.activityId)||m))})]})})},W=()=>{const[t,r]=u.useState(""),[a,n]=u.useState({}),i=u.useCallback(l=>{if(!l)return{};const s=_e(l),c=s?"wallet":"twitter",h=s?`eip155:${l}`:l;return{[c]:h}},[]);return pe(()=>n(i(t)),500,[t]),e.jsxs(o,{backgroundColor:"surface-primary",padding:"spacing-md",borderRadius:"radius-md",children:[e.jsx(p,{variant:"h4-bold",color:"text-primary",children:"Points Vault"}),e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"spacing-none spacing-none spacing-md spacing-none",children:[e.jsxs(o,{display:"flex",gap:"spacing-xxxs",children:[e.jsx(p,{color:"text-tertiary",variant:"bs-regular",children:"Ensure the user has at-least 50 Followers and is following"}),e.jsx(B,{to:"https://x.com/PushChain",target:"_blank",referrerPolicy:"no-referrer",children:e.jsx(p,{color:"text-brand-medium",variant:"bs-regular",children:"@pushprotocol"})})," ",e.jsx(p,{color:"text-tertiary",variant:"bs-regular",children:"on Twitter"})]}),e.jsx("img",{src:Ie,alt:"Push Icon"})]}),e.jsx(o,{position:"relative",width:"100%",children:e.jsx(o,{position:"absolute",width:"302px",css:V`
            right: 0px;
          `,children:e.jsx(L,{placeholder:"Search user or x handle or else",icon:e.jsx(Re,{}),value:t,onChange:l=>r(l.target.value)})})}),e.jsx(Pe,{variant:"fill",onChange:()=>r(""),items:[{key:"PENDING",label:"Pending",children:e.jsx($,{query:a})},{key:"COMPLETED",label:"Approved",children:e.jsx(A,{query:a})},{key:"REJECTED",label:"Rejected",children:e.jsx(K,{query:a})}]})]})},H=()=>{const[t,r]=u.useState("login");return e.jsxs(o,{height:"100%",width:"-webkit-fill-available",children:[t==="login"&&e.jsx(D,{handleSetActiveView:r}),t==="list"&&e.jsx(W,{})]})},G=()=>e.jsx(Fe,{children:e.jsx(H,{})})});export{$e as __tla,G as default};
