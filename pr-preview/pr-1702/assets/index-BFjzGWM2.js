import{h3 as On,__tla as yc}from"./index-Ch05WE_H.js";let In,bc=Promise.all([(()=>{try{return yc}catch{}})()]).then(async()=>{var rr={},nr=9007199254740991,An="[object Arguments]",Hn="[object Function]",Pn="[object GeneratorFunction]",Rn=/^(?:0|[1-9]\d*)$/;function sr(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function zn(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var At=Object.prototype,Zt=At.hasOwnProperty,ir=At.toString,Dn=At.propertyIsEnumerable,or=Math.max;function Mn(r,t){var e=qn(r)||Wn(r)?zn(r.length,String):[],n=e.length,s=!!n;for(var i in r)s&&(i=="length"||ar(i,n))||e.push(i);return e}function jn(r,t,e,n){return r===void 0||_e(r,At[e])&&!Zt.call(n,e)?t:r}function Nn(r,t,e){var n=r[t];(!(Zt.call(r,t)&&_e(n,e))||e===void 0&&!(t in r))&&(r[t]=e)}function Fn(r){if(!me(r))return Vn(r);var t=Kn(r),e=[];for(var n in r)n=="constructor"&&(t||!Zt.call(r,n))||e.push(n);return e}function cr(r,t){return t=or(t===void 0?r.length-1:t,0),function(){for(var e=arguments,n=-1,s=or(e.length-t,0),i=Array(s);++n<s;)i[n]=e[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=e[n];return o[t]=i,sr(r,this,o)}}function Ln(r,t,e,n){e||(e={});for(var s=-1,i=t.length;++s<i;){var o=t[s],c=n?n(e[o],r[o],o,e,r):void 0;Nn(e,o,c===void 0?r[o]:c)}return e}function Un(r){return cr(function(t,e){var n=-1,s=e.length,i=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(i=r.length>3&&typeof i=="function"?(s--,i):void 0,o&&$n(e[0],e[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var c=e[n];c&&r(t,c,n,i)}return t})}function ar(r,t){return t=t??nr,!!t&&(typeof r=="number"||Rn.test(r))&&r>-1&&r%1==0&&r<t}function $n(r,t,e){if(!me(e))return!1;var n=typeof t;return(n=="number"?ge(e)&&ar(t,e.length):n=="string"&&t in e)?_e(e[t],r):!1}function Kn(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||At;return r===e}function Vn(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}function _e(r,t){return r===t||r!==r&&t!==t}function Wn(r){return Xn(r)&&Zt.call(r,"callee")&&(!Dn.call(r,"callee")||ir.call(r)==An)}var qn=Array.isArray;function ge(r){return r!=null&&Gn(r.length)&&!Yn(r)}function Xn(r){return Qn(r)&&ge(r)}function Yn(r){var t=me(r)?ir.call(r):"";return t==Hn||t==Pn}function Gn(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=nr}function me(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function Qn(r){return!!r&&typeof r=="object"}var Jn=Un(function(r,t,e,n){Ln(t,ts(t),r,n)}),Zn=cr(function(r){return r.push(void 0,jn),sr(Jn,void 0,r)});function ts(r){return ge(r)?Mn(r):Fn(r)}var es=Zn;Object.defineProperty(rr,"__esModule",{value:!0});var rs=es,ns="Provided shouldReconnect() returned false. Closing permanently.",ss="Provided shouldReconnect() resolved to false. Closing permanently.",is=function(){function r(t,e,n){if(this.url=t,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=r.CONNECTING,this.OPEN=r.OPEN,this.CLOSING=r.CLOSING,this.CLOSED=r.CLOSED,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},e==null||typeof e=="string"||Array.isArray(e)?this.protocols=e:n=e,this.options=rs({},n,r.DEFAULT_OPTIONS),!this.options.wsConstructor)if(typeof WebSocket<"u")this.options.wsConstructor=WebSocket;else throw new Error("WebSocket not present in global scope and no wsConstructor option was provided.");this.openNewWebSocket()}return Object.defineProperty(r.prototype,"binaryType",{get:function(){return this.binaryTypeInternal||"blob"},set:function(t){this.binaryTypeInternal=t,this.ws&&(this.ws.binaryType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferedAmount",{get:function(){var t=this.ws?this.ws.bufferedAmount:0,e=!1;return this.messageBuffer.forEach(function(n){var s=cs(n);s!=null?t+=s:e=!0}),e&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extensions",{get:function(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"protocol",{get:function(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readyState",{get:function(){return this.isClosed?r.CLOSED:r.OPEN},enumerable:!0,configurable:!0}),r.prototype.close=function(t,e){this.ws&&this.ws.close(t,e),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")},r.prototype.send=function(t){this.ws&&this.ws.readyState===this.OPEN?this.ws.send(t):this.messageBuffer.push(t)},r.prototype.addEventListener=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},r.prototype.dispatchEvent=function(t){return this.dispatchEventOfType(t.type,t)},r.prototype.removeEventListener=function(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(function(n){return n!==e}))},r.prototype.openNewWebSocket=function(){var t=this;if(!this.isClosed){var e=this.options,n=e.connectTimeout,s=e.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var i=new s(this.url,this.protocols);i.onclose=function(o){return t.handleClose(o)},i.onerror=function(o){return t.handleError(o)},i.onmessage=function(o){return t.handleMessage(o)},i.onopen=function(o){return t.handleOpen(o)},this.connectTimeoutId=setTimeout(function(){t.clearConnectTimeout(),i.close()},n),this.ws=i}},r.prototype.handleOpen=function(t){var e=this;if(!(!this.ws||this.isClosed)){var n=this.options.allClearResetTime;this.debugLog("WebSocket opened."),this.binaryTypeInternal!=null?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",t):(this.dispatchEventOfType("open",t),this.hasBeenOpened=!0),this.messageBuffer.forEach(function(s){return e.send(s)}),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(function(){e.clearAllClearTimeout(),e.nextRetryTime=0,e.reconnectCount=0;var s=n/1e3|0;e.debugLog("WebSocket remained open for "+s+" seconds. Resetting retry time and count.")},n)}},r.prototype.handleMessage=function(t){this.isClosed||this.dispatchEventOfType("message",t)},r.prototype.handleClose=function(t){var e=this;if(!this.isClosed){var n=this.options,s=n.maxReconnectAttempts,i=n.shouldReconnect;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.ws=void 0),this.dispatchEventOfType("down",t),this.reconnectCount>=s){this.stopReconnecting(t,this.getTooManyFailedReconnectsMessage());return}var o=i(t);typeof o=="boolean"?this.handleWillReconnect(o,t,ns):o.then(function(c){e.isClosed||e.handleWillReconnect(c,t,ss)})}},r.prototype.handleError=function(t){this.dispatchEventOfType("error",t),this.debugLog("WebSocket encountered an error.")},r.prototype.handleWillReconnect=function(t,e,n){t?this.reconnect():this.stopReconnecting(e,n)},r.prototype.reconnect=function(){var t=this,e=this.options,n=e.minReconnectDelay,s=e.maxReconnectDelay,i=e.reconnectBackoffFactor;this.reconnectCount++;var o=this.nextRetryTime;this.nextRetryTime=Math.max(n,Math.min(this.nextRetryTime*i,s)),setTimeout(function(){return t.openNewWebSocket()},o);var c=o/1e3|0;this.debugLog("WebSocket was closed. Re-opening in "+c+" seconds.")},r.prototype.stopReconnecting=function(t,e){this.debugLog(e),this.shutdown(),this.dispatchEventOfType("close",t)},r.prototype.shutdown=function(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[]},r.prototype.clearAllTimeouts=function(){this.clearConnectTimeout(),this.clearAllClearTimeout()},r.prototype.clearConnectTimeout=function(){this.connectTimeoutId!=null&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)},r.prototype.clearAllClearTimeout=function(){this.allClearTimeoutId!=null&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)},r.prototype.dispatchEventOfType=function(t,e){var n=this;switch(t){case"close":this.onclose&&this.onclose(e);break;case"error":this.onerror&&this.onerror(e);break;case"message":this.onmessage&&this.onmessage(e);break;case"open":this.onopen&&this.onopen(e);break;case"down":this.ondown&&this.ondown(e);break;case"reopen":this.onreopen&&this.onreopen(e);break}return t in this.listeners&&this.listeners[t].slice().forEach(function(s){return n.callListener(s,e)}),!e||!e.defaultPrevented},r.prototype.callListener=function(t,e){typeof t=="function"?t.call(this,e):t.handleEvent.call(this,e)},r.prototype.debugLog=function(t){this.options.debug&&console.log(t)},r.prototype.getTooManyFailedReconnectsMessage=function(){var t=this.options.maxReconnectAttempts;return"Failed to reconnect after "+t+" "+as("attempt",t)+". Closing permanently."},r.DEFAULT_OPTIONS={allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function(){return!0},wsConstructor:void 0},r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r}(),os=rr.default=is;function cs(r){return typeof r=="string"?2*r.length:r instanceof ArrayBuffer?r.byteLength:r instanceof Blob?r.size:void 0}function as(r,t){return t===1?r:r+"s"}class I{static create(...t){return new this(...t)}mixIn(t){return Object.assign(this,t)}clone(){const t=new this.constructor;return Object.assign(t,this),t}}class k extends I{constructor(t=[],e=t.length*4){super();let n=t;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){const s=n.byteLength,i=[];for(let o=0;o<s;o+=1)i[o>>>2]|=n[o]<<24-o%4*8;this.words=i,this.sigBytes=s}else this.words=t,this.sigBytes=e}static random(t){const e=[],n=s=>{let i=s,o=987654321;const c=4294967295;return()=>{o=36969*(o&65535)+(o>>16)&c,i=18e3*(i&65535)+(i>>16)&c;let a=(o<<16)+i&c;return a/=4294967296,a+=.5,a*(Math.random()>.5?1:-1)}};for(let s=0,i;s<t;s+=4){const o=n((i||Math.random())*4294967296);i=o()*987654071,e.push(o()*4294967296|0)}return new k(e,t)}toString(t=te){return t.stringify(this)}concat(t){const e=this.words,n=t.words,s=this.sigBytes,i=t.sigBytes;if(this.clamp(),s%4)for(let o=0;o<i;o+=1){const c=n[o>>>2]>>>24-o%4*8&255;e[s+o>>>2]|=c<<24-(s+o)%4*8}else for(let o=0;o<i;o+=4)e[s+o>>>2]=n[o>>>2];return this.sigBytes+=i,this}clamp(){const{words:t,sigBytes:e}=this;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)}clone(){const t=super.clone.call(this);return t.words=this.words.slice(0),t}}const te={stringify(r){const{words:t,sigBytes:e}=r,n=[];for(let s=0;s<e;s+=1){const i=t[s>>>2]>>>24-s%4*8&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")},parse(r){const t=r.length,e=[];for(let n=0;n<t;n+=2)e[n>>>3]|=parseInt(r.substr(n,2),16)<<24-n%8*4;return new k(e,t/2)}},ve={stringify(r){const{words:t,sigBytes:e}=r,n=[];for(let s=0;s<e;s+=1){const i=t[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse(r){const t=r.length,e=[];for(let n=0;n<t;n+=1)e[n>>>2]|=(r.charCodeAt(n)&255)<<24-n%4*8;return new k(e,t)}},Se={stringify(r){try{return decodeURIComponent(escape(ve.stringify(r)))}catch{throw new Error("Malformed UTF-8 data")}},parse(r){return ve.parse(unescape(encodeURIComponent(r)))}};class Ee extends I{constructor(){super(),this._minBufferSize=0}reset(){this._data=new k,this._nDataBytes=0}_append(t){let e=t;typeof e=="string"&&(e=Se.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(t){let e;const{_data:n,blockSize:s}=this,i=n.words,o=n.sigBytes,c=s*4;let a=o/c;t?a=Math.ceil(a):a=Math.max((a|0)-this._minBufferSize,0);const f=a*s,h=Math.min(f*4,o);if(f){for(let l=0;l<f;l+=s)this._doProcessBlock(i,l);e=i.splice(0,f),n.sigBytes-=h}return new k(e,h)}clone(){const t=super.clone.call(this);return t._data=this._data.clone(),t}}class A extends Ee{constructor(t){super(),this.blockSize=512/32,this.cfg=Object.assign(new I,t),this.reset()}static _createHelper(t){return(e,n)=>new t(n).finalize(e)}static _createHmacHelper(t){return(e,n)=>new ke(t,n).finalize(e)}reset(){super.reset.call(this),this._doReset()}update(t){return this._append(t),this._process(),this}finalize(t){return t&&this._append(t),this._doFinalize()}}class ke extends I{constructor(t,e){super();const n=new t;this._hasher=n;let s=e;typeof s=="string"&&(s=Se.parse(s));const i=n.blockSize,o=i*4;s.sigBytes>o&&(s=n.finalize(e)),s.clamp();const c=s.clone();this._oKey=c;const a=s.clone();this._iKey=a;const f=c.words,h=a.words;for(let l=0;l<i;l+=1)f[l]^=1549556828,h[l]^=909522486;c.sigBytes=o,a.sigBytes=o,this.reset()}reset(){const t=this._hasher;t.reset(),t.update(this._iKey)}update(t){return this._hasher.update(t),this}finalize(t){const e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}}const us=k;class d extends I{constructor(t,e){super(),this.high=t,this.low=e}}class xe extends I{constructor(t=[],e=t.length*8){super(),this.words=t,this.sigBytes=e}toX32(){const t=this.words,e=t.length,n=[];for(let s=0;s<e;s+=1){const i=t[s];n.push(i.high),n.push(i.low)}return us.create(n,this.sigBytes)}clone(){const t=super.clone.call(this);t.words=this.words.slice(0);const{words:e}=t,n=e.length;for(let s=0;s<n;s+=1)e[s]=e[s].clone();return t}}const hs=(r,t,e)=>{const n=[];let s=0;for(let i=0;i<t;i+=1)if(i%4){const o=e[r.charCodeAt(i-1)]<<i%4*2,c=e[r.charCodeAt(i)]>>>6-i%4*2,a=o|c;n[s>>>2]|=a<<24-s%4*8,s+=1}return k.create(n,s)},Te={stringify(r){const{words:t,sigBytes:e}=r,n=this._map;r.clamp();const s=[];for(let o=0;o<e;o+=3){const c=t[o>>>2]>>>24-o%4*8&255,a=t[o+1>>>2]>>>24-(o+1)%4*8&255,f=t[o+2>>>2]>>>24-(o+2)%4*8&255,h=c<<16|a<<8|f;for(let l=0;l<4&&o+l*.75<e;l+=1)s.push(n.charAt(h>>>6*(3-l)&63))}const i=n.charAt(64);if(i)for(;s.length%4;)s.push(i);return s.join("")},parse(r){let t=r.length;const e=this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let i=0;i<e.length;i+=1)n[e.charCodeAt(i)]=i}const s=e.charAt(64);if(s){const i=r.indexOf(s);i!==-1&&(t=i)}return hs(r,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},_=[];for(let r=0;r<64;r+=1)_[r]=Math.abs(Math.sin(r+1))*4294967296|0;const H=(r,t,e,n,s,i,o)=>{const c=r+(t&e|~t&n)+s+o;return(c<<i|c>>>32-i)+t},P=(r,t,e,n,s,i,o)=>{const c=r+(t&n|e&~n)+s+o;return(c<<i|c>>>32-i)+t},R=(r,t,e,n,s,i,o)=>{const c=r+(t^e^n)+s+o;return(c<<i|c>>>32-i)+t},z=(r,t,e,n,s,i,o)=>{const c=r+(e^(t|~n))+s+o;return(c<<i|c>>>32-i)+t};class ee extends A{_doReset(){this._hash=new k([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(t,e){const n=t;for(let ut=0;ut<16;ut+=1){const Kt=e+ut,ot=t[Kt];n[Kt]=(ot<<8|ot>>>24)&16711935|(ot<<24|ot>>>8)&4278255360}const s=this._hash.words,i=n[e+0],o=n[e+1],c=n[e+2],a=n[e+3],f=n[e+4],h=n[e+5],l=n[e+6],w=n[e+7],S=n[e+8],v=n[e+9],m=n[e+10],E=n[e+11],g=n[e+12],C=n[e+13],B=n[e+14],O=n[e+15];let u=s[0],p=s[1],y=s[2],b=s[3];u=H(u,p,y,b,i,7,_[0]),b=H(b,u,p,y,o,12,_[1]),y=H(y,b,u,p,c,17,_[2]),p=H(p,y,b,u,a,22,_[3]),u=H(u,p,y,b,f,7,_[4]),b=H(b,u,p,y,h,12,_[5]),y=H(y,b,u,p,l,17,_[6]),p=H(p,y,b,u,w,22,_[7]),u=H(u,p,y,b,S,7,_[8]),b=H(b,u,p,y,v,12,_[9]),y=H(y,b,u,p,m,17,_[10]),p=H(p,y,b,u,E,22,_[11]),u=H(u,p,y,b,g,7,_[12]),b=H(b,u,p,y,C,12,_[13]),y=H(y,b,u,p,B,17,_[14]),p=H(p,y,b,u,O,22,_[15]),u=P(u,p,y,b,o,5,_[16]),b=P(b,u,p,y,l,9,_[17]),y=P(y,b,u,p,E,14,_[18]),p=P(p,y,b,u,i,20,_[19]),u=P(u,p,y,b,h,5,_[20]),b=P(b,u,p,y,m,9,_[21]),y=P(y,b,u,p,O,14,_[22]),p=P(p,y,b,u,f,20,_[23]),u=P(u,p,y,b,v,5,_[24]),b=P(b,u,p,y,B,9,_[25]),y=P(y,b,u,p,a,14,_[26]),p=P(p,y,b,u,S,20,_[27]),u=P(u,p,y,b,C,5,_[28]),b=P(b,u,p,y,c,9,_[29]),y=P(y,b,u,p,w,14,_[30]),p=P(p,y,b,u,g,20,_[31]),u=R(u,p,y,b,h,4,_[32]),b=R(b,u,p,y,S,11,_[33]),y=R(y,b,u,p,E,16,_[34]),p=R(p,y,b,u,B,23,_[35]),u=R(u,p,y,b,o,4,_[36]),b=R(b,u,p,y,f,11,_[37]),y=R(y,b,u,p,w,16,_[38]),p=R(p,y,b,u,m,23,_[39]),u=R(u,p,y,b,C,4,_[40]),b=R(b,u,p,y,i,11,_[41]),y=R(y,b,u,p,a,16,_[42]),p=R(p,y,b,u,l,23,_[43]),u=R(u,p,y,b,v,4,_[44]),b=R(b,u,p,y,g,11,_[45]),y=R(y,b,u,p,O,16,_[46]),p=R(p,y,b,u,c,23,_[47]),u=z(u,p,y,b,i,6,_[48]),b=z(b,u,p,y,w,10,_[49]),y=z(y,b,u,p,B,15,_[50]),p=z(p,y,b,u,h,21,_[51]),u=z(u,p,y,b,g,6,_[52]),b=z(b,u,p,y,a,10,_[53]),y=z(y,b,u,p,m,15,_[54]),p=z(p,y,b,u,o,21,_[55]),u=z(u,p,y,b,S,6,_[56]),b=z(b,u,p,y,O,10,_[57]),y=z(y,b,u,p,l,15,_[58]),p=z(p,y,b,u,C,21,_[59]),u=z(u,p,y,b,f,6,_[60]),b=z(b,u,p,y,E,10,_[61]),y=z(y,b,u,p,c,15,_[62]),p=z(p,y,b,u,v,21,_[63]),s[0]=s[0]+u|0,s[1]=s[1]+p|0,s[2]=s[2]+y|0,s[3]=s[3]+b|0}_doFinalize(){const t=this._data,e=t.words,n=this._nDataBytes*8,s=t.sigBytes*8;e[s>>>5]|=128<<24-s%32;const i=Math.floor(n/4294967296),o=n;e[(s+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,e[(s+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,t.sigBytes=(e.length+1)*4,this._process();const c=this._hash,a=c.words;for(let f=0;f<4;f+=1){const h=a[f];a[f]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360}return c}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const ls=A._createHelper(ee),ps=A._createHmacHelper(ee);class Be extends I{constructor(t){super(),this.cfg=Object.assign(new I,{keySize:128/32,hasher:ee,iterations:1},t)}compute(t,e){let n;const{cfg:s}=this,i=s.hasher.create(),o=k.create(),c=o.words,{keySize:a,iterations:f}=s;for(;c.length<a;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(let h=1;h<f;h+=1)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=a*4,o}}const fs=(r,t,e)=>Be.create(e).compute(r,t);class pt extends Ee{constructor(t,e,n){super(),this.cfg=Object.assign(new I,n),this._xformMode=t,this._key=e,this.reset()}static createEncryptor(t,e){return this.create(this._ENC_XFORM_MODE,t,e)}static createDecryptor(t,e){return this.create(this._DEC_XFORM_MODE,t,e)}static _createHelper(t){const e=n=>typeof n=="string"?Ce:yt;return{encrypt(n,s,i){return e(s).encrypt(t,n,s,i)},decrypt(n,s,i){return e(s).decrypt(t,n,s,i)}}}reset(){super.reset.call(this),this._doReset()}process(t){return this._append(t),this._process()}finalize(t){return t&&this._append(t),this._doFinalize()}}pt._ENC_XFORM_MODE=1,pt._DEC_XFORM_MODE=2,pt.keySize=128/32,pt.ivSize=128/32;class ct extends pt{constructor(...t){super(...t),this.blockSize=1}_doFinalize(){return this._process(!0)}}class ft extends I{constructor(t,e){super(),this._cipher=t,this._iv=e}static createEncryptor(t,e){return this.Encryptor.create(t,e)}static createDecryptor(t,e){return this.Decryptor.create(t,e)}}function ur(r,t,e){const n=r;let s;const i=this._iv;i?(s=i,this._iv=void 0):s=this._prevBlock;for(let o=0;o<e;o+=1)n[t+o]^=s[o]}class gt extends ft{}gt.Encryptor=class extends gt{processBlock(r,t){const e=this._cipher,{blockSize:n}=e;ur.call(this,r,t,n),e.encryptBlock(r,t),this._prevBlock=r.slice(t,t+n)}},gt.Decryptor=class extends gt{processBlock(r,t){const e=this._cipher,{blockSize:n}=e,s=r.slice(t,t+n);e.decryptBlock(r,t),ur.call(this,r,t,n),this._prevBlock=s}};const hr={pad(r,t){const e=t*4,n=e-r.sigBytes%e,s=n<<24|n<<16|n<<8|n,i=[];for(let c=0;c<n;c+=4)i.push(s);const o=k.create(i,n);r.concat(o)},unpad(r){const t=r,e=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=e}};class dt extends pt{constructor(t,e,n){super(t,e,Object.assign({mode:gt,padding:hr},n)),this.blockSize=128/32}reset(){let t;super.reset.call(this);const{cfg:e}=this,{iv:n,mode:s}=e;this._xformMode===this.constructor._ENC_XFORM_MODE?t=s.createEncryptor:(t=s.createDecryptor,this._minBufferSize=1),this._mode=t.call(s,this,n&&n.words),this._mode.__creator=t}_doProcessBlock(t,e){this._mode.processBlock(t,e)}_doFinalize(){let t;const{padding:e}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t}}class Ht extends I{constructor(t){super(),this.mixIn(t)}toString(t){return(t||this.formatter).stringify(this)}}const lr={stringify(r){let t;const{ciphertext:e,salt:n}=r;return n?t=k.create([1398893684,1701076831]).concat(n).concat(e):t=e,t.toString(Te)},parse(r){let t;const e=Te.parse(r),n=e.words;return n[0]===1398893684&&n[1]===1701076831&&(t=k.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),Ht.create({ciphertext:e,salt:t})}};class yt extends I{static encrypt(t,e,n,s){const i=Object.assign(new I,this.cfg,s),o=t.createEncryptor(n,i),c=o.finalize(e),a=o.cfg;return Ht.create({ciphertext:c,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:o.blockSize,formatter:i.format})}static decrypt(t,e,n,s){let i=e;const o=Object.assign(new I,this.cfg,s);return i=this._parse(i,o.format),t.createDecryptor(n,o).finalize(i.ciphertext)}static _parse(t,e){return typeof t=="string"?e.parse(t,this):t}}yt.cfg=Object.assign(new I,{format:lr});const pr={execute(r,t,e,n){let s=n;s||(s=k.random(64/8));const i=Be.create({keySize:t+e}).compute(r,s),o=k.create(i.words.slice(t),e*4);return i.sigBytes=t*4,Ht.create({key:i,iv:o,salt:s})}};class Ce extends yt{static encrypt(t,e,n,s){const i=Object.assign(new I,this.cfg,s),o=i.kdf.execute(n,t.keySize,t.ivSize);i.iv=o.iv;const c=yt.encrypt.call(this,t,e,o.key,i);return c.mixIn(o),c}static decrypt(t,e,n,s){let i=e;const o=Object.assign(new I,this.cfg,s);i=this._parse(i,o.format);const c=o.kdf.execute(n,t.keySize,t.ivSize,i.salt);return o.iv=c.iv,yt.decrypt.call(this,t,i,c.key,o)}}Ce.cfg=Object.assign(yt.cfg,{kdf:pr});const fr=r=>r<<8&4278255360|r>>>8&16711935,dr={stringify(r){const{words:t,sigBytes:e}=r,n=[];for(let s=0;s<e;s+=2){const i=t[s>>>2]>>>16-s%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse(r){const t=r.length,e=[];for(let n=0;n<t;n+=1)e[n>>>1]|=r.charCodeAt(n)<<16-n%2*16;return k.create(e,t*2)}},ds=dr,ys={stringify(r){const{words:t,sigBytes:e}=r,n=[];for(let s=0;s<e;s+=2){const i=fr(t[s>>>2]>>>16-s%4*8&65535);n.push(String.fromCharCode(i))}return n.join("")},parse(r){const t=r.length,e=[];for(let n=0;n<t;n+=1)e[n>>>1]|=fr(r.charCodeAt(n)<<16-n%2*16);return k.create(e,t*2)}},bt=[];class re extends A{_doReset(){this._hash=new k([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(t,e){const n=this._hash.words;let s=n[0],i=n[1],o=n[2],c=n[3],a=n[4];for(let f=0;f<80;f+=1){if(f<16)bt[f]=t[e+f]|0;else{const l=bt[f-3]^bt[f-8]^bt[f-14]^bt[f-16];bt[f]=l<<1|l>>>31}let h=(s<<5|s>>>27)+a+bt[f];f<20?h+=(i&o|~i&c)+1518500249:f<40?h+=(i^o^c)+1859775393:f<60?h+=(i&o|i&c|o&c)-1894007588:h+=(i^o^c)-899497514,a=c,c=o,o=i<<30|i>>>2,i=s,s=h}n[0]=n[0]+s|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+c|0,n[4]=n[4]+a|0}_doFinalize(){const t=this._data,e=t.words,n=this._nDataBytes*8,s=t.sigBytes*8;return e[s>>>5]|=128<<24-s%32,e[(s+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(s+64>>>9<<4)+15]=n,t.sigBytes=e.length*4,this._process(),this._hash}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const bs=A._createHelper(re),ws=A._createHmacHelper(re),yr=[],br=[],_s=r=>{const t=Math.sqrt(r);for(let e=2;e<=t;e+=1)if(!(r%e))return!1;return!0},wr=r=>(r-(r|0))*4294967296|0;let ne=2,Pt=0;for(;Pt<64;)_s(ne)&&(Pt<8&&(yr[Pt]=wr(ne**(1/2))),br[Pt]=wr(ne**(1/3)),Pt+=1),ne+=1;const wt=[];class mt extends A{_doReset(){this._hash=new k(yr.slice(0))}_doProcessBlock(t,e){const n=this._hash.words;let s=n[0],i=n[1],o=n[2],c=n[3],a=n[4],f=n[5],h=n[6],l=n[7];for(let w=0;w<64;w+=1){if(w<16)wt[w]=t[e+w]|0;else{const B=wt[w-15],O=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,u=wt[w-2],p=(u<<15|u>>>17)^(u<<13|u>>>19)^u>>>10;wt[w]=O+wt[w-7]+p+wt[w-16]}const S=a&f^~a&h,v=s&i^s&o^i&o,m=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),E=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),g=l+E+S+br[w]+wt[w],C=m+v;l=h,h=f,f=a,a=c+g|0,c=o,o=i,i=s,s=g+C|0}n[0]=n[0]+s|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+c|0,n[4]=n[4]+a|0,n[5]=n[5]+f|0,n[6]=n[6]+h|0,n[7]=n[7]+l|0}_doFinalize(){const t=this._data,e=t.words,n=this._nDataBytes*8,s=t.sigBytes*8;return e[s>>>5]|=128<<24-s%32,e[(s+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(s+64>>>9<<4)+15]=n,t.sigBytes=e.length*4,this._process(),this._hash}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const gs=A._createHelper(mt),ms=A._createHmacHelper(mt);class Oe extends mt{_doReset(){this._hash=new k([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])}_doFinalize(){const t=super._doFinalize.call(this);return t.sigBytes-=4,t}}const vs=mt._createHelper(Oe),Ss=mt._createHmacHelper(Oe),Es=[new d(1116352408,3609767458),new d(1899447441,602891725),new d(3049323471,3964484399),new d(3921009573,2173295548),new d(961987163,4081628472),new d(1508970993,3053834265),new d(2453635748,2937671579),new d(2870763221,3664609560),new d(3624381080,2734883394),new d(310598401,1164996542),new d(607225278,1323610764),new d(1426881987,3590304994),new d(1925078388,4068182383),new d(2162078206,991336113),new d(2614888103,633803317),new d(3248222580,3479774868),new d(3835390401,2666613458),new d(4022224774,944711139),new d(264347078,2341262773),new d(604807628,2007800933),new d(770255983,1495990901),new d(1249150122,1856431235),new d(1555081692,3175218132),new d(1996064986,2198950837),new d(2554220882,3999719339),new d(2821834349,766784016),new d(2952996808,2566594879),new d(3210313671,3203337956),new d(3336571891,1034457026),new d(3584528711,2466948901),new d(113926993,3758326383),new d(338241895,168717936),new d(666307205,1188179964),new d(773529912,1546045734),new d(1294757372,1522805485),new d(1396182291,2643833823),new d(1695183700,2343527390),new d(1986661051,1014477480),new d(2177026350,1206759142),new d(2456956037,344077627),new d(2730485921,1290863460),new d(2820302411,3158454273),new d(3259730800,3505952657),new d(3345764771,106217008),new d(3516065817,3606008344),new d(3600352804,1432725776),new d(4094571909,1467031594),new d(275423344,851169720),new d(430227734,3100823752),new d(506948616,1363258195),new d(659060556,3750685593),new d(883997877,3785050280),new d(958139571,3318307427),new d(1322822218,3812723403),new d(1537002063,2003034995),new d(1747873779,3602036899),new d(1955562222,1575990012),new d(2024104815,1125592928),new d(2227730452,2716904306),new d(2361852424,442776044),new d(2428436474,593698344),new d(2756734187,3733110249),new d(3204031479,2999351573),new d(3329325298,3815920427),new d(3391569614,3928383900),new d(3515267271,566280711),new d(3940187606,3454069534),new d(4118630271,4000239992),new d(116418474,1914138554),new d(174292421,2731055270),new d(289380356,3203993006),new d(460393269,320620315),new d(685471733,587496836),new d(852142971,1086792851),new d(1017036298,365543100),new d(1126000580,2618297676),new d(1288033470,3409855158),new d(1501505948,4234509866),new d(1607167915,987167468),new d(1816402316,1246189591)],vt=[];for(let r=0;r<80;r+=1)vt[r]=new d;class St extends A{constructor(){super(),this.blockSize=1024/32}_doReset(){this._hash=new xe([new d(1779033703,4089235720),new d(3144134277,2227873595),new d(1013904242,4271175723),new d(2773480762,1595750129),new d(1359893119,2917565137),new d(2600822924,725511199),new d(528734635,4215389547),new d(1541459225,327033209)])}_doProcessBlock(t,e){const n=this._hash.words,s=n[0],i=n[1],o=n[2],c=n[3],a=n[4],f=n[5],h=n[6],l=n[7],w=s.high;let S=s.low;const v=i.high;let m=i.low;const E=o.high;let g=o.low;const C=c.high;let B=c.low;const O=a.high;let u=a.low;const p=f.high;let y=f.low;const b=h.high;let ut=h.low;const Kt=l.high;let ot=l.low,V=w,N=S,Vt=v,Tt=m,Wt=E,Bt=g,tr=C,qt=B,W=O,F=u,be=p,Xt=y,we=b,Yt=ut,er=Kt,Gt=ot;for(let q=0;q<80;q+=1){let Z,ht;const Ct=vt[q];if(q<16)Ct.high=t[e+q*2]|0,ht=Ct.high,Ct.low=t[e+q*2+1]|0,Z=Ct.low;else{const Sn=vt[q-15],Ot=Sn.high,Qt=Sn.low,hc=(Ot>>>1|Qt<<31)^(Ot>>>8|Qt<<24)^Ot>>>7,En=(Qt>>>1|Ot<<31)^(Qt>>>8|Ot<<24)^(Qt>>>7|Ot<<25),kn=vt[q-2],It=kn.high,Jt=kn.low,lc=(It>>>19|Jt<<13)^(It<<3|Jt>>>29)^It>>>6,xn=(Jt>>>19|It<<13)^(Jt<<3|It>>>29)^(Jt>>>6|It<<26),Tn=vt[q-7],pc=Tn.high,fc=Tn.low,Bn=vt[q-16],dc=Bn.high,Cn=Bn.low;Z=En+fc,ht=hc+pc+(Z>>>0<En>>>0?1:0),Z+=xn,ht=ht+lc+(Z>>>0<xn>>>0?1:0),Z+=Cn,ht=ht+dc+(Z>>>0<Cn>>>0?1:0),Ct.high=ht,Ct.low=Z}const rc=W&be^~W&we,wn=F&Xt^~F&Yt,nc=V&Vt^V&Wt^Vt&Wt,sc=N&Tt^N&Bt^Tt&Bt,ic=(V>>>28|N<<4)^(V<<30|N>>>2)^(V<<25|N>>>7),_n=(N>>>28|V<<4)^(N<<30|V>>>2)^(N<<25|V>>>7),oc=(W>>>14|F<<18)^(W>>>18|F<<14)^(W<<23|F>>>9),cc=(F>>>14|W<<18)^(F>>>18|W<<14)^(F<<23|W>>>9),gn=Es[q],ac=gn.high,mn=gn.low;let tt=Gt+cc,lt=er+oc+(tt>>>0<Gt>>>0?1:0);tt+=wn,lt=lt+rc+(tt>>>0<wn>>>0?1:0),tt+=mn,lt=lt+ac+(tt>>>0<mn>>>0?1:0),tt+=Z,lt=lt+ht+(tt>>>0<Z>>>0?1:0);const vn=_n+sc,uc=ic+nc+(vn>>>0<_n>>>0?1:0);er=we,Gt=Yt,we=be,Yt=Xt,be=W,Xt=F,F=qt+tt|0,W=tr+lt+(F>>>0<qt>>>0?1:0)|0,tr=Wt,qt=Bt,Wt=Vt,Bt=Tt,Vt=V,Tt=N,N=tt+vn|0,V=lt+uc+(N>>>0<tt>>>0?1:0)|0}s.low=S+N,S=s.low,s.high=w+V+(S>>>0<N>>>0?1:0),i.low=m+Tt,m=i.low,i.high=v+Vt+(m>>>0<Tt>>>0?1:0),o.low=g+Bt,g=o.low,o.high=E+Wt+(g>>>0<Bt>>>0?1:0),c.low=B+qt,B=c.low,c.high=C+tr+(B>>>0<qt>>>0?1:0),a.low=u+F,u=a.low,a.high=O+W+(u>>>0<F>>>0?1:0),f.low=y+Xt,y=f.low,f.high=p+be+(y>>>0<Xt>>>0?1:0),h.low=ut+Yt,ut=h.low,h.high=b+we+(ut>>>0<Yt>>>0?1:0),l.low=ot+Gt,ot=l.low,l.high=Kt+er+(ot>>>0<Gt>>>0?1:0)}_doFinalize(){const t=this._data,e=t.words,n=this._nDataBytes*8,s=t.sigBytes*8;return e[s>>>5]|=128<<24-s%32,e[(s+128>>>10<<5)+30]=Math.floor(n/4294967296),e[(s+128>>>10<<5)+31]=n,t.sigBytes=e.length*4,this._process(),this._hash.toX32()}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const ks=A._createHelper(St),xs=A._createHmacHelper(St);class Ie extends St{_doReset(){this._hash=new xe([new d(3418070365,3238371032),new d(1654270250,914150663),new d(2438529370,812702999),new d(355462360,4144912697),new d(1731405415,4290775857),new d(2394180231,1750603025),new d(3675008525,1694076839),new d(1203062813,3204075428)])}_doFinalize(){const t=super._doFinalize.call(this);return t.sigBytes-=16,t}}const Ts=St._createHelper(Ie),Bs=St._createHmacHelper(Ie),_r=[],gr=[],mr=[];let Ae=1,se=0;for(let r=0;r<24;r+=1){_r[Ae+5*se]=(r+1)*(r+2)/2%64;const t=se%5,e=(2*Ae+3*se)%5;Ae=t,se=e}for(let r=0;r<5;r+=1)for(let t=0;t<5;t+=1)gr[r+5*t]=t+(2*r+3*t)%5*5;let Rt=1;for(let r=0;r<24;r+=1){let t=0,e=0;for(let n=0;n<7;n+=1){if(Rt&1){const s=(1<<n)-1;s<32?e^=1<<s:t^=1<<s-32}Rt&128?Rt=Rt<<1^113:Rt<<=1}mr[r]=d.create(t,e)}const et=[];for(let r=0;r<25;r+=1)et[r]=d.create();class He extends A{constructor(t){super(Object.assign({outputLength:512},t))}_doReset(){this._state=[];const t=this._state;for(let e=0;e<25;e+=1)t[e]=new d;this.blockSize=(1600-2*this.cfg.outputLength)/32}_doProcessBlock(t,e){const n=this._state,s=this.blockSize/2;for(let i=0;i<s;i+=1){let o=t[e+2*i],c=t[e+2*i+1];o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,c=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;const a=n[i];a.high^=c,a.low^=o}for(let i=0;i<24;i+=1){for(let h=0;h<5;h+=1){let l=0,w=0;for(let v=0;v<5;v+=1){const m=n[h+5*v];l^=m.high,w^=m.low}const S=et[h];S.high=l,S.low=w}for(let h=0;h<5;h+=1){const l=et[(h+4)%5],w=et[(h+1)%5],S=w.high,v=w.low,m=l.high^(S<<1|v>>>31),E=l.low^(v<<1|S>>>31);for(let g=0;g<5;g+=1){const C=n[h+5*g];C.high^=m,C.low^=E}}for(let h=1;h<25;h+=1){let l,w;const S=n[h],v=S.high,m=S.low,E=_r[h];E<32?(l=v<<E|m>>>32-E,w=m<<E|v>>>32-E):(l=m<<E-32|v>>>64-E,w=v<<E-32|m>>>64-E);const g=et[gr[h]];g.high=l,g.low=w}const o=et[0],c=n[0];o.high=c.high,o.low=c.low;for(let h=0;h<5;h+=1)for(let l=0;l<5;l+=1){const w=h+5*l,S=n[w],v=et[w],m=et[(h+1)%5+5*l],E=et[(h+2)%5+5*l];S.high=v.high^~m.high&E.high,S.low=v.low^~m.low&E.low}const a=n[0],f=mr[i];a.high^=f.high,a.low^=f.low}}_doFinalize(){const t=this._data,e=t.words,n=t.sigBytes*8,s=this.blockSize*32;e[n>>>5]|=1<<24-n%32,e[(Math.ceil((n+1)/s)*s>>>5)-1]|=128,t.sigBytes=e.length*4,this._process();const i=this._state,o=this.cfg.outputLength/8,c=o/8,a=[];for(let f=0;f<c;f+=1){const h=i[f];let l=h.high,w=h.low;l=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,a.push(w),a.push(l)}return new k(a,o)}clone(){const t=super.clone.call(this);t._state=this._state.slice(0);const e=t._state;for(let n=0;n<25;n+=1)e[n]=e[n].clone();return t}}const Cs=A._createHelper(He),Os=A._createHmacHelper(He),Is=k.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),As=k.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),Hs=k.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Ps=k.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Rs=k.create([0,1518500249,1859775393,2400959708,2840853838]),zs=k.create([1352829926,1548603684,1836072691,2053994217,0]),vr=(r,t,e)=>r^t^e,Sr=(r,t,e)=>r&t|~r&e,Er=(r,t,e)=>(r|~t)^e,kr=(r,t,e)=>r&e|t&~e,xr=(r,t,e)=>r^(t|~e),ie=(r,t)=>r<<t|r>>>32-t;class Pe extends A{_doReset(){this._hash=k.create([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(t,e){const n=t;for(let p=0;p<16;p+=1){const y=e+p,b=n[y];n[y]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}const s=this._hash.words,i=Rs.words,o=zs.words,c=Is.words,a=As.words,f=Hs.words,h=Ps.words;let l=s[0],w=s[1],S=s[2],v=s[3],m=s[4],E=s[0],g=s[1],C=s[2],B=s[3],O=s[4],u;for(let p=0;p<80;p+=1)u=l+n[e+c[p]]|0,p<16?u+=vr(w,S,v)+i[0]:p<32?u+=Sr(w,S,v)+i[1]:p<48?u+=Er(w,S,v)+i[2]:p<64?u+=kr(w,S,v)+i[3]:u+=xr(w,S,v)+i[4],u|=0,u=ie(u,f[p]),u=u+m|0,l=m,m=v,v=ie(S,10),S=w,w=u,u=E+n[e+a[p]]|0,p<16?u+=xr(g,C,B)+o[0]:p<32?u+=kr(g,C,B)+o[1]:p<48?u+=Er(g,C,B)+o[2]:p<64?u+=Sr(g,C,B)+o[3]:u+=vr(g,C,B)+o[4],u|=0,u=ie(u,h[p]),u=u+O|0,E=O,O=B,B=ie(C,10),C=g,g=u;u=s[1]+S+B|0,s[1]=s[2]+v+O|0,s[2]=s[3]+m+E|0,s[3]=s[4]+l+g|0,s[4]=s[0]+w+C|0,s[0]=u}_doFinalize(){const t=this._data,e=t.words,n=this._nDataBytes*8,s=t.sigBytes*8;e[s>>>5]|=128<<24-s%32,e[(s+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,t.sigBytes=(e.length+1)*4,this._process();const i=this._hash,o=i.words;for(let c=0;c<5;c+=1){const a=o[c];o[c]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}return i}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const Ds=A._createHelper(Pe),Ms=A._createHmacHelper(Pe);class Tr extends I{constructor(t){super(),this.cfg=Object.assign(new I,{keySize:128/32,hasher:re,iterations:1},t)}compute(t,e){const{cfg:n}=this,s=ke.create(n.hasher,t),i=k.create(),o=k.create([1]),c=i.words,a=o.words,{keySize:f,iterations:h}=n;for(;c.length<f;){const l=s.update(e).finalize(o);s.reset();const w=l.words,S=w.length;let v=l;for(let m=1;m<h;m+=1){v=s.finalize(v),s.reset();const E=v.words;for(let g=0;g<S;g+=1)w[g]^=E[g]}i.concat(l),a[0]+=1}return i.sigBytes=f*4,i}}const js=(r,t,e)=>Tr.create(e).compute(r,t),M=[],Br=[],Cr=[],Or=[],Ir=[],Ar=[],Re=[],ze=[],De=[],Me=[],U=[];for(let r=0;r<256;r+=1)r<128?U[r]=r<<1:U[r]=r<<1^283;let $=0,rt=0;for(let r=0;r<256;r+=1){let t=rt^rt<<1^rt<<2^rt<<3^rt<<4;t=t>>>8^t&255^99,M[$]=t,Br[t]=$;const e=U[$],n=U[e],s=U[n];let i=U[t]*257^t*16843008;Cr[$]=i<<24|i>>>8,Or[$]=i<<16|i>>>16,Ir[$]=i<<8|i>>>24,Ar[$]=i,i=s*16843009^n*65537^e*257^$*16843008,Re[t]=i<<24|i>>>8,ze[t]=i<<16|i>>>16,De[t]=i<<8|i>>>24,Me[t]=i,$?($=e^U[U[U[s^e]]],rt^=U[U[rt]]):(rt=1,$=rt)}const Ns=[0,1,2,4,8,16,32,64,128,27,54];class je extends dt{_doReset(){let t;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const e=this._keyPriorReset,n=e.words,s=e.sigBytes/4;this._nRounds=s+6;const i=(this._nRounds+1)*4;this._keySchedule=[];const o=this._keySchedule;for(let a=0;a<i;a+=1)a<s?o[a]=n[a]:(t=o[a-1],a%s?s>6&&a%s===4&&(t=M[t>>>24]<<24|M[t>>>16&255]<<16|M[t>>>8&255]<<8|M[t&255]):(t=t<<8|t>>>24,t=M[t>>>24]<<24|M[t>>>16&255]<<16|M[t>>>8&255]<<8|M[t&255],t^=Ns[a/s|0]<<24),o[a]=o[a-s]^t);this._invKeySchedule=[];const c=this._invKeySchedule;for(let a=0;a<i;a+=1){const f=i-a;a%4?t=o[f]:t=o[f-4],a<4||f<=4?c[a]=t:c[a]=Re[M[t>>>24]]^ze[M[t>>>16&255]]^De[M[t>>>8&255]]^Me[M[t&255]]}}encryptBlock(t,e){this._doCryptBlock(t,e,this._keySchedule,Cr,Or,Ir,Ar,M)}decryptBlock(t,e){const n=t;let s=n[e+1];n[e+1]=n[e+3],n[e+3]=s,this._doCryptBlock(n,e,this._invKeySchedule,Re,ze,De,Me,Br),s=n[e+1],n[e+1]=n[e+3],n[e+3]=s}_doCryptBlock(t,e,n,s,i,o,c,a){const f=t,h=this._nRounds;let l=f[e]^n[0],w=f[e+1]^n[1],S=f[e+2]^n[2],v=f[e+3]^n[3],m=4;for(let O=1;O<h;O+=1){const u=s[l>>>24]^i[w>>>16&255]^o[S>>>8&255]^c[v&255]^n[m];m+=1;const p=s[w>>>24]^i[S>>>16&255]^o[v>>>8&255]^c[l&255]^n[m];m+=1;const y=s[S>>>24]^i[v>>>16&255]^o[l>>>8&255]^c[w&255]^n[m];m+=1;const b=s[v>>>24]^i[l>>>16&255]^o[w>>>8&255]^c[S&255]^n[m];m+=1,l=u,w=p,S=y,v=b}const E=(a[l>>>24]<<24|a[w>>>16&255]<<16|a[S>>>8&255]<<8|a[v&255])^n[m];m+=1;const g=(a[w>>>24]<<24|a[S>>>16&255]<<16|a[v>>>8&255]<<8|a[l&255])^n[m];m+=1;const C=(a[S>>>24]<<24|a[v>>>16&255]<<16|a[l>>>8&255]<<8|a[w&255])^n[m];m+=1;const B=(a[v>>>24]<<24|a[l>>>16&255]<<16|a[w>>>8&255]<<8|a[S&255])^n[m];m+=1,f[e]=E,f[e+1]=g,f[e+2]=C,f[e+3]=B}}je.keySize=256/32;const Fs=dt._createHelper(je),Ls=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],Hr=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],Us=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],$s=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],Ks=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];function Et(r,t){const e=(this._lBlock>>>r^this._rBlock)&t;this._rBlock^=e,this._lBlock^=e<<r}function oe(r,t){const e=(this._rBlock>>>r^this._lBlock)&t;this._lBlock^=e,this._rBlock^=e<<r}class at extends dt{_doReset(){const t=this._key.words,e=[];for(let i=0;i<56;i+=1){const o=Ls[i]-1;e[i]=t[o>>>5]>>>31-o%32&1}this._subKeys=[];const n=this._subKeys;for(let i=0;i<16;i+=1){n[i]=[];const o=n[i],c=Us[i];for(let a=0;a<24;a+=1)o[a/6|0]|=e[(Hr[a]-1+c)%28]<<31-a%6,o[4+(a/6|0)]|=e[28+(Hr[a+24]-1+c)%28]<<31-a%6;o[0]=o[0]<<1|o[0]>>>31;for(let a=1;a<7;a+=1)o[a]>>>=(a-1)*4+3;o[7]=o[7]<<5|o[7]>>>27}this._invSubKeys=[];const s=this._invSubKeys;for(let i=0;i<16;i+=1)s[i]=n[15-i]}encryptBlock(t,e){this._doCryptBlock(t,e,this._subKeys)}decryptBlock(t,e){this._doCryptBlock(t,e,this._invSubKeys)}_doCryptBlock(t,e,n){const s=t;this._lBlock=t[e],this._rBlock=t[e+1],Et.call(this,4,252645135),Et.call(this,16,65535),oe.call(this,2,858993459),oe.call(this,8,16711935),Et.call(this,1,1431655765);for(let o=0;o<16;o+=1){const c=n[o],a=this._lBlock,f=this._rBlock;let h=0;for(let l=0;l<8;l+=1)h|=$s[l][((f^c[l])&Ks[l])>>>0];this._lBlock=f,this._rBlock=a^h}const i=this._lBlock;this._lBlock=this._rBlock,this._rBlock=i,Et.call(this,1,1431655765),oe.call(this,8,16711935),oe.call(this,2,858993459),Et.call(this,16,65535),Et.call(this,4,252645135),s[e]=this._lBlock,s[e+1]=this._rBlock}}at.keySize=64/32,at.ivSize=64/32,at.blockSize=64/32;const Vs=dt._createHelper(at);class zt extends dt{_doReset(){const t=this._key.words;if(t.length!==2&&t.length!==4&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");const e=t.slice(0,2),n=t.length<4?t.slice(0,2):t.slice(2,4),s=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=at.createEncryptor(k.create(e)),this._des2=at.createEncryptor(k.create(n)),this._des3=at.createEncryptor(k.create(s))}encryptBlock(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)}decryptBlock(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)}}zt.keySize=192/32,zt.ivSize=64/32,zt.blockSize=64/32;const Ws=dt._createHelper(zt),X=[],nt=[],x=[];function Ne(){const r=this._X,t=this._C;for(let e=0;e<8;e+=1)nt[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<nt[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<nt[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<nt[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<nt[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<nt[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<nt[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<nt[6]>>>0?1:0)|0,this._b=t[7]>>>0<nt[7]>>>0?1:0;for(let e=0;e<8;e+=1){const n=r[e]+t[e],s=n&65535,i=n>>>16,o=((s*s>>>17)+s*i>>>15)+i*i,c=((n&4294901760)*n|0)+((n&65535)*n|0);x[e]=o^c}r[0]=x[0]+(x[7]<<16|x[7]>>>16)+(x[6]<<16|x[6]>>>16)|0,r[1]=x[1]+(x[0]<<8|x[0]>>>24)+x[7]|0,r[2]=x[2]+(x[1]<<16|x[1]>>>16)+(x[0]<<16|x[0]>>>16)|0,r[3]=x[3]+(x[2]<<8|x[2]>>>24)+x[1]|0,r[4]=x[4]+(x[3]<<16|x[3]>>>16)+(x[2]<<16|x[2]>>>16)|0,r[5]=x[5]+(x[4]<<8|x[4]>>>24)+x[3]|0,r[6]=x[6]+(x[5]<<16|x[5]>>>16)+(x[4]<<16|x[4]>>>16)|0,r[7]=x[7]+(x[6]<<8|x[6]>>>24)+x[5]|0}class Pr extends ct{constructor(...t){super(...t),this.blockSize=128/32,this.ivSize=64/32}_doReset(){const t=this._key.words,{iv:e}=this.cfg;for(let i=0;i<4;i+=1)t[i]=(t[i]<<8|t[i]>>>24)&16711935|(t[i]<<24|t[i]>>>8)&4278255360;this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16];const n=this._X;this._C=[t[2]<<16|t[2]>>>16,t[0]&4294901760|t[1]&65535,t[3]<<16|t[3]>>>16,t[1]&4294901760|t[2]&65535,t[0]<<16|t[0]>>>16,t[2]&4294901760|t[3]&65535,t[1]<<16|t[1]>>>16,t[3]&4294901760|t[0]&65535];const s=this._C;this._b=0;for(let i=0;i<4;i+=1)Ne.call(this);for(let i=0;i<8;i+=1)s[i]^=n[i+4&7];if(e){const i=e.words,o=i[0],c=i[1],a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,f=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,h=a>>>16|f&4294901760,l=f<<16|a&65535;s[0]^=a,s[1]^=h,s[2]^=f,s[3]^=l,s[4]^=a,s[5]^=h,s[6]^=f,s[7]^=l;for(let w=0;w<4;w+=1)Ne.call(this)}}_doProcessBlock(t,e){const n=t,s=this._X;Ne.call(this),X[0]=s[0]^s[5]>>>16^s[3]<<16,X[1]=s[2]^s[7]>>>16^s[5]<<16,X[2]=s[4]^s[1]>>>16^s[7]<<16,X[3]=s[6]^s[3]>>>16^s[1]<<16;for(let i=0;i<4;i+=1)X[i]=(X[i]<<8|X[i]>>>24)&16711935|(X[i]<<24|X[i]>>>8)&4278255360,n[e+i]^=X[i]}}const qs=ct._createHelper(Pr),Y=[],st=[],T=[];function Fe(){const r=this._X,t=this._C;for(let e=0;e<8;e+=1)st[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<st[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<st[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<st[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<st[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<st[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<st[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<st[6]>>>0?1:0)|0,this._b=t[7]>>>0<st[7]>>>0?1:0;for(let e=0;e<8;e+=1){const n=r[e]+t[e],s=n&65535,i=n>>>16,o=((s*s>>>17)+s*i>>>15)+i*i,c=((n&4294901760)*n|0)+((n&65535)*n|0);T[e]=o^c}r[0]=T[0]+(T[7]<<16|T[7]>>>16)+(T[6]<<16|T[6]>>>16)|0,r[1]=T[1]+(T[0]<<8|T[0]>>>24)+T[7]|0,r[2]=T[2]+(T[1]<<16|T[1]>>>16)+(T[0]<<16|T[0]>>>16)|0,r[3]=T[3]+(T[2]<<8|T[2]>>>24)+T[1]|0,r[4]=T[4]+(T[3]<<16|T[3]>>>16)+(T[2]<<16|T[2]>>>16)|0,r[5]=T[5]+(T[4]<<8|T[4]>>>24)+T[3]|0,r[6]=T[6]+(T[5]<<16|T[5]>>>16)+(T[4]<<16|T[4]>>>16)|0,r[7]=T[7]+(T[6]<<8|T[6]>>>24)+T[5]|0}class Rr extends ct{constructor(...t){super(...t),this.blockSize=128/32,this.ivSize=64/32}_doReset(){const t=this._key.words,{iv:e}=this.cfg;this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16];const n=this._X;this._C=[t[2]<<16|t[2]>>>16,t[0]&4294901760|t[1]&65535,t[3]<<16|t[3]>>>16,t[1]&4294901760|t[2]&65535,t[0]<<16|t[0]>>>16,t[2]&4294901760|t[3]&65535,t[1]<<16|t[1]>>>16,t[3]&4294901760|t[0]&65535];const s=this._C;this._b=0;for(let i=0;i<4;i+=1)Fe.call(this);for(let i=0;i<8;i+=1)s[i]^=n[i+4&7];if(e){const i=e.words,o=i[0],c=i[1],a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,f=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,h=a>>>16|f&4294901760,l=f<<16|a&65535;s[0]^=a,s[1]^=h,s[2]^=f,s[3]^=l,s[4]^=a,s[5]^=h,s[6]^=f,s[7]^=l;for(let w=0;w<4;w+=1)Fe.call(this)}}_doProcessBlock(t,e){const n=t,s=this._X;Fe.call(this),Y[0]=s[0]^s[5]>>>16^s[3]<<16,Y[1]=s[2]^s[7]>>>16^s[5]<<16,Y[2]=s[4]^s[1]>>>16^s[7]<<16,Y[3]=s[6]^s[3]>>>16^s[1]<<16;for(let i=0;i<4;i+=1)Y[i]=(Y[i]<<8|Y[i]>>>24)&16711935|(Y[i]<<24|Y[i]>>>8)&4278255360,n[e+i]^=Y[i]}}const Xs=ct._createHelper(Rr);function zr(){const r=this._S;let t=this._i,e=this._j,n=0;for(let s=0;s<4;s+=1){t=(t+1)%256,e=(e+r[t])%256;const i=r[t];r[t]=r[e],r[e]=i,n|=r[(r[t]+r[e])%256]<<24-s*8}return this._i=t,this._j=e,n}class Dt extends ct{_doReset(){const t=this._key,e=t.words,n=t.sigBytes;this._S=[];const s=this._S;for(let i=0;i<256;i+=1)s[i]=i;for(let i=0,o=0;i<256;i+=1){const c=i%n,a=e[c>>>2]>>>24-c%4*8&255;o=(o+s[i]+a)%256;const f=s[i];s[i]=s[o],s[o]=f}this._j=0,this._i=this._j}_doProcessBlock(t,e){const n=t;n[e]^=zr.call(this)}}Dt.keySize=256/32,Dt.ivSize=0;const Ys=ct._createHelper(Dt);class Dr extends Dt{constructor(...t){super(...t),Object.assign(this.cfg,{drop:192})}_doReset(){super._doReset.call(this);for(let t=this.cfg.drop;t>0;t-=1)zr.call(this)}}const Gs=ct._createHelper(Dr);function Mr(r,t,e,n){const s=r;let i;const o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(let c=0;c<e;c+=1)s[t+c]^=i[c]}class Mt extends ft{}Mt.Encryptor=class extends Mt{processBlock(r,t){const e=this._cipher,{blockSize:n}=e;Mr.call(this,r,t,n,e),this._prevBlock=r.slice(t,t+n)}},Mt.Decryptor=class extends Mt{processBlock(r,t){const e=this._cipher,{blockSize:n}=e,s=r.slice(t,t+n);Mr.call(this,r,t,n,e),this._prevBlock=s}};class jt extends ft{}jt.Encryptor=class extends jt{processBlock(r,t){const e=r,n=this._cipher,{blockSize:s}=n,i=this._iv;let o=this._counter;i&&(this._counter=i.slice(0),o=this._counter,this._iv=void 0);const c=o.slice(0);n.encryptBlock(c,0),o[s-1]=o[s-1]+1|0;for(let a=0;a<s;a+=1)e[t+a]^=c[a]}},jt.Decryptor=jt.Encryptor;const jr=r=>{let t=r;if((r>>24&255)===255){let e=r>>16&255,n=r>>8&255,s=r&255;e===255?(e=0,n===255?(n=0,s===255?s=0:s+=1):n+=1):e+=1,t=0,t+=e<<16,t+=n<<8,t+=s}else t+=1<<24;return t},Qs=r=>{const t=r;return t[0]=jr(t[0]),t[0]===0&&(t[1]=jr(t[1])),t};class Nt extends ft{}Nt.Encryptor=class extends Nt{processBlock(r,t){const e=r,n=this._cipher,{blockSize:s}=n,i=this._iv;let o=this._counter;i&&(this._counter=i.slice(0),o=this._counter,this._iv=void 0),Qs(o);const c=o.slice(0);n.encryptBlock(c,0);for(let a=0;a<s;a+=1)e[t+a]^=c[a]}},Nt.Decryptor=Nt.Encryptor;class Ft extends ft{}Ft.Encryptor=class extends Ft{processBlock(r,t){this._cipher.encryptBlock(r,t)}},Ft.Decryptor=class extends Ft{processBlock(r,t){this._cipher.decryptBlock(r,t)}};class Lt extends ft{}Lt.Encryptor=class extends Lt{processBlock(r,t){const e=r,n=this._cipher,{blockSize:s}=n,i=this._iv;let o=this._keystream;i&&(this._keystream=i.slice(0),o=this._keystream,this._iv=void 0),n.encryptBlock(o,0);for(let c=0;c<s;c+=1)e[t+c]^=o[c]}},Lt.Decryptor=Lt.Encryptor;const Js={pad(r,t){const e=r,n=e.sigBytes,s=t*4,i=s-n%s,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad(r){const t=r,e=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=e}},Zs={pad(r,t){const e=t*4,n=e-r.sigBytes%e;r.concat(k.random(n-1)).concat(k.create([n<<24],1))},unpad(r){const t=r,e=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=e}},Le={pad(r,t){const e=r,n=t*4;e.clamp(),e.sigBytes+=n-(r.sigBytes%n||n)},unpad(r){const t=r,e=t.words;for(let n=t.sigBytes-1;n>=0;n-=1)if(e[n>>>2]>>>24-n%4*8&255){t.sigBytes=n+1;break}}},ti={pad(r,t){r.concat(k.create([2147483648],1)),Le.pad(r,t)},unpad(r){const t=r;Le.unpad(t),t.sigBytes-=1}},ei={pad(){},unpad(){}},ri={stringify(r){return r.ciphertext.toString(te)},parse(r){const t=te.parse(r);return Ht.create({ciphertext:t})}},ni={lib:{Base:I,WordArray:k,BufferedBlockAlgorithm:Ee,Hasher:A,Cipher:pt,StreamCipher:ct,BlockCipherMode:ft,BlockCipher:dt,CipherParams:Ht,SerializableCipher:yt,PasswordBasedCipher:Ce},x64:{Word:d,WordArray:xe},enc:{Hex:te,Latin1:ve,Utf8:Se,Utf16:ds,Utf16BE:dr,Utf16LE:ys,Base64:Te},algo:{HMAC:ke,MD5:ee,SHA1:re,SHA224:Oe,SHA256:mt,SHA384:Ie,SHA512:St,SHA3:He,RIPEMD160:Pe,PBKDF2:Tr,EvpKDF:Be,AES:je,DES:at,TripleDES:zt,Rabbit:Pr,RabbitLegacy:Rr,RC4:Dt,RC4Drop:Dr},mode:{CBC:gt,CFB:Mt,CTR:jt,CTRGladman:Nt,ECB:Ft,OFB:Lt},pad:{Pkcs7:hr,AnsiX923:Js,Iso10126:Zs,Iso97971:ti,NoPadding:ei,ZeroPadding:Le},format:{OpenSSL:lr,Hex:ri},kdf:{OpenSSL:pr},MD5:ls,HmacMD5:ps,SHA1:bs,HmacSHA1:ws,SHA224:vs,HmacSHA224:Ss,SHA256:gs,HmacSHA256:ms,SHA384:Ts,HmacSHA384:Bs,SHA512:ks,HmacSHA512:xs,SHA3:Cs,HmacSHA3:Os,RIPEMD160:Ds,HmacRIPEMD160:Ms,PBKDF2:js,EvpKDF:fs,AES:Fs,DES:Vs,TripleDES:Ws,Rabbit:qs,RabbitLegacy:Xs,RC4:Ys,RC4Drop:Gs};var Ue=function(r,t){return Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])},Ue(r,t)};function j(r,t){Ue(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ce(r){return typeof r=="function"}var Nr=!1,G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}Nr=r},get useDeprecatedSynchronousErrorHandling(){return Nr}};function kt(r){setTimeout(function(){throw r},0)}var ae={closed:!0,next:function(r){},error:function(r){if(G.useDeprecatedSynchronousErrorHandling)throw r;kt(r)},complete:function(){}},$e=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function Fr(r){return r!==null&&typeof r=="object"}var si=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),ue=si,_t=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,s=e._ctorUnsubscribe,i=e._unsubscribe,o=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var c=0;c<n.length;++c){var a=n[c];a.remove(this)}if(ce(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(l){t=l instanceof ue?Lr(l.errors):[l]}}if($e(o))for(var c=-1,f=o.length;++c<f;){var h=o[c];if(Fr(h))try{h.unsubscribe()}catch(w){t=t||[],w instanceof ue?t=t.concat(Lr(w.errors)):t.push(w)}}if(t)throw new ue(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var s=e._parentOrParents;if(s===null)e._parentOrParents=this;else if(s instanceof r){if(s===this)return e;e._parentOrParents=[s,this]}else if(s.indexOf(this)===-1)s.push(this);else return e;var i=this._subscriptions;return i===null?this._subscriptions=[e]:i.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function Lr(r){return r.reduce(function(t,e){return t.concat(e instanceof ue?e.errors:e)},[])}var he=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),it=function(r){j(t,r);function t(e,n,s){var i=r.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=ae;break;case 1:if(!e){i.destination=ae;break}if(typeof e=="object"){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new Ur(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new Ur(i,e,n,s);break}return i}return t.prototype[he]=function(){return this},t.create=function(e,n,s){var i=new t(e,n,s);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(_t),Ur=function(r){j(t,r);function t(e,n,s,i){var o=r.call(this)||this;o._parentSubscriber=e;var c,a=o;return ce(n)?c=n:n&&(c=n.next,s=n.error,i=n.complete,n!==ae&&(a=Object.create(n),ce(a.unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=c,o._error=s,o._complete=i,o}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!G.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,s=G.useDeprecatedSynchronousErrorHandling;if(this._error)!s||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)s?(n.syncErrorValue=e,n.syncErrorThrown=!0):kt(e),this.unsubscribe();else{if(this.unsubscribe(),s)throw e;kt(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var s=function(){return e._complete.call(e._context)};!G.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(s),this.unsubscribe()):(this.__tryOrSetError(n,s),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(s){if(this.unsubscribe(),G.useDeprecatedSynchronousErrorHandling)throw s;kt(s)}},t.prototype.__tryOrSetError=function(e,n,s){if(!G.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,s)}catch(i){return G.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(kt(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(it);function ii(r){for(;r;){var t=r,e=t.closed,n=t.destination,s=t.isStopped;if(e||s)return!1;n&&n instanceof it?r=n:r=null}return!0}function oi(r,t,e){if(r){if(r instanceof it)return r;if(r[he])return r[he]()}return!r&&!t&&!e?new it(ae):new it(r,t,e)}var Ke=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function $r(r){return r}function ci(r){return r.length===0?$r:r.length===1?r[0]:function(t){return r.reduce(function(e,n){return n(e)},t)}}var Q=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var s=this.operator,i=oi(t,e,n);if(s?i.add(s.call(i,this.source)):i.add(this.source||G.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),G.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){G.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),ii(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=Kr(e),new e(function(s,i){var o;o=n.subscribe(function(c){try{t(c)}catch(a){i(a),o&&o.unsubscribe()}},i,s)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[Ke]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:ci(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=Kr(t),new t(function(n,s){var i;e.subscribe(function(o){return i=o},function(o){return s(o)},function(){return n(i)})})},r.create=function(t){return new r(t)},r}();function Kr(r){if(r||(r=Promise),!r)throw new Error("no Promise impl found");return r}var ai=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),Ut=ai,ui=function(r){j(t,r);function t(e,n){var s=r.call(this)||this;return s.subject=e,s.subscriber=n,s.closed=!1,s}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var s=n.indexOf(this.subscriber);s!==-1&&n.splice(s,1)}}},t}(_t),hi=function(r){j(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return t}(it),$t=function(r){j(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[he]=function(){return new hi(this)},t.prototype.lift=function(e){var n=new Vr(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new Ut;if(!this.isStopped)for(var n=this.observers,s=n.length,i=n.slice(),o=0;o<s;o++)i[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new Ut;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,s=n.length,i=n.slice(),o=0;o<s;o++)i[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Ut;this.isStopped=!0;for(var e=this.observers,n=e.length,s=e.slice(),i=0;i<n;i++)s[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Ut;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Ut;return this.hasError?(e.error(this.thrownError),_t.EMPTY):this.isStopped?(e.complete(),_t.EMPTY):(this.observers.push(e),new ui(this,e))},t.prototype.asObservable=function(){var e=new Q;return e.source=this,e},t.create=function(e,n){return new Vr(e,n)},t}(Q),Vr=function(r){j(t,r);function t(e,n){var s=r.call(this)||this;return s.destination=e,s.source=n,s}return t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):_t.EMPTY},t}($t),li=function(r){j(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(_t),pi=function(r){j(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s.pending=!1,s}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),setInterval(e.flush.bind(e,this),s)},t.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!==null&&this.delay===s&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(e,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var s=!1,i=void 0;try{this.work(e)}catch(o){s=!0,i=!!o&&o||new Error(o)}if(s)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,s=n.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&s.splice(i,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(li),Wr=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}(),fi=function(r){j(t,r);function t(e,n){n===void 0&&(n=Wr.now);var s=r.call(this,e,function(){return t.delegate&&t.delegate!==s?t.delegate.now():n()})||this;return s.actions=[],s.active=!1,s.scheduled=void 0,s}return t.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,s):r.prototype.schedule.call(this,e,n,s)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var s;this.active=!0;do if(s=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,s){for(;e=n.shift();)e.unsubscribe();throw s}},t}(Wr);function Ve(r){return r&&typeof r.schedule=="function"}var qr=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}};function di(r,t){return new Q(function(e){var n=new _t,s=0;return n.add(t.schedule(function(){if(s===r.length){e.complete();return}e.next(r[s++]),e.closed||n.add(this.schedule())})),n})}function yi(r,t){return t?di(r,t):new Q(qr(r))}var bi=new fi(pi),wi=bi;function Xr(r,t){return function(e){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new _i(r,t))}}var _i=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new gi(t,this.project,this.thisArg))},r}(),gi=function(r){j(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=s||i,i}return t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(s){this.destination.error(s);return}this.destination.next(n)},t}(it),mi=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,kt),t}};function vi(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yr=vi(),Si=function(r){return function(t){var e=r[Yr]();do{var n=void 0;try{n=e.next()}catch(s){return t.error(s),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},Ei=function(r){return function(t){var e=r[Ke]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},ki=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function xi(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var Gr=function(r){if(r&&typeof r[Ke]=="function")return Ei(r);if(ki(r))return qr(r);if(xi(r))return mi(r);if(r&&typeof r[Yr]=="function")return Si(r);var t=Fr(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Ti(r,t){return r instanceof Q?r:new Q(Gr(r))}var Bi=function(r){j(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(it),Ci=function(r){j(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(it);function Oi(r,t){if(!t.closed){if(r instanceof Q)return r.subscribe(t);var e;try{e=Gr(r)(t)}catch(n){t.error(n)}return e}}function Qr(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(Qr(function(s,i){return Ti(r(s,i)).pipe(Xr(function(o,c){return t(s,o,i,c)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new Ii(r,e))})}var Ii=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new Ai(t,this.project,this.concurrent))},r}(),Ai=function(r){j(t,r);function t(e,n,s){s===void 0&&(s=Number.POSITIVE_INFINITY);var i=r.call(this,e)||this;return i.project=n,i.concurrent=s,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,s=this.index++;try{n=this.project(e,s)}catch(i){this.destination.error(i);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Bi(this),s=this.destination;s.add(n);var i=Oi(e,n);i!==n&&s.add(i)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Ci);function Hi(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),Qr($r,r)}function Jr(r,t,e,n){return ce(e)&&(n=e,e=void 0),n?Jr(r,t,e).pipe(Xr(function(s){return $e(s)?n.apply(void 0,s):n(s)})):new Q(function(s){function i(o){arguments.length>1?s.next(Array.prototype.slice.call(arguments)):s.next(o)}Zr(r,t,i,s,e)})}function Zr(r,t,e,n,s){var i;if(zi(r)){var o=r;r.addEventListener(t,e,s),i=function(){return o.removeEventListener(t,e,s)}}else if(Ri(r)){var c=r;r.on(t,e),i=function(){return c.off(t,e)}}else if(Pi(r)){var a=r;r.addListener(t,e),i=function(){return a.removeListener(t,e)}}else if(r&&r.length)for(var f=0,h=r.length;f<h;f++)Zr(r[f],t,e,n,s);else throw new TypeError("Invalid event target");n.add(i)}function Pi(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function Ri(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function zi(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function tn(r){return!$e(r)&&r-parseFloat(r)+1>=0}function Di(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,s=r[r.length-1];return Ve(s)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof s=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof Q?r[0]:Hi(e)(yi(r,n))}function Mi(r,t,e){r===void 0&&(r=0);var n=-1;return tn(t)?n=Number(t)<1&&1||Number(t):Ve(t)&&(e=t),Ve(e)||(e=wi),new Q(function(s){var i=tn(r)?r:+r-e.now();return e.schedule(ji,i,{index:0,period:n,subscriber:s})})}function ji(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}const en={ethereum:{1:"main",11155111:"sepolia",100:"xdai",137:"matic-main",80002:"matic-amoy"}},Ni=[2,3,4,42,56,250],rn={points:150,duration:1},nn=1e4;function D(r){const{name:t,value:e,type:n,optional:s,customValidation:i}=r;if(!s&&typeof e>"u")throw new Error(`"${t}" is required`);if(typeof e<"u"&&(n==="array"?Array.isArray(n):typeof e!==n))throw new Error(`"${t}" must be of type: ${n}, received type: ${typeof e} from value: ${e}`);if(typeof e<"u"&&i&&!i(e))throw new Error(`"${e}" is not a valid "${t}"`)}function Fi(r){D({name:"sdk options",value:r,type:"object"});const{dappId:t,system:e,name:n,appVersion:s,networkId:i,transactionHandlers:o,apiUrl:c,ws:a,onopen:f,ondown:h,onreopen:l,onerror:w,onclose:S,...v}=r;Ui(v,["dappId","system","name","appVersion","networkId","transactionHandlers","apiUrl","ws","onopen","ondown","onreopen","onerror","onclose"],"Initialization Options"),D({name:"dappId",value:t,type:"string",optional:!0}),D({name:"system",value:e,type:"string",optional:!0,customValidation:Li}),D({name:"name",value:n,type:"string",optional:!0}),D({name:"appVersion",value:s,type:"string",optional:!0}),D({name:"networkId",value:i,type:"number"}),Ni.includes(i)&&console.error(`Blocknative SDK: Network with ID: ${i} has been deprecated and you will no longer receive transaction events on this network.`),D({name:"transactionHandler",value:o,type:"array",optional:!0}),o&&o.forEach(m=>D({name:"transactionHandler",value:m,type:"function"})),D({name:"apiUrl",value:c,type:"string",optional:!0}),D({name:"ws",value:a,type:"function",optional:!0}),D({name:"onopen",value:f,type:"function",optional:!0}),D({name:"ondown",value:h,type:"function",optional:!0}),D({name:"onreopen",value:l,type:"function",optional:!0}),D({name:"onerror",value:w,type:"function",optional:!0}),D({name:"onclose",value:S,type:"function",optional:!0})}function Li(r){return!!en[r]}function Ui(r,t,e){const n=Object.keys(r);if(n.length>0)throw new Error(`${n[0]} is not a valid parameter for ${e}, must be one of the following valid parameters: ${t.join(", ")}`)}function We(){return{listeners:{},on:function(r,t){switch(r){case"txSent":case"txPool":case"txConfirmed":case"txSpeedUp":case"txCancel":case"txFailed":case"txDropped":case"txRequest":case"nsfFail":case"txRepeat":case"txAwaitingApproval":case"txConfirmReminder":case"txSendFail":case"txError":case"txUnderPriced":case"txPoolSimulation":case"all":break;default:throw new Error(`${r} is not a valid event code, for a list of valid event codes see: https://docs.blocknative.com/notify-sdk#event-codes`)}if(typeof t!="function")throw new Error("Listener must be a function");this.listeners[r]=t},off:function(r){delete this.listeners[r]},emit:function(r){if(this.listeners[r.eventCode])return this.listeners[r.eventCode](r);if(this.listeners.all)return this.listeners.all(r)}}}function sn(r,t){return en[r][t]}function $i(r){switch(r){case"txRequest":case"nsfFail":case"txRepeat":case"txAwaitingApproval":case"txConfirmReminder":case"txSendFail":case"txError":case"txUnderPriced":case"txSent":return!0;default:return!1}}function Ki(r){return r.reverse()[0]}function Vi(r,t){switch(r){case"ethereum":return t.length===42;case"bitcoin":return t.length!==64;default:return!1}}function Wi(r,t){switch(r){case"ethereum":return t.length===66;case"bitcoin":return t.length===64;default:return!1}}function qe(r){return new Promise(t=>{setTimeout(t,r)})}const qi=(r,t)=>t===void 0?"undefined":t;function on(){if(typeof window<"u"&&"localStorage"in window){const r="__testLocalStorage";try{return window.localStorage.setItem(r,"1"),window.localStorage.removeItem(r),!0}catch{return!1}}return!1}function Xi(r,t){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");const e=Date.now(),n=We(),s="txSent";this.watchedTransactions.push({hash:r,emitter:n});const i={...this._system==="ethereum"?{hash:r}:{txid:r},id:t||r,startTime:e,status:"sent"},o={...i,eventCode:s};this._sendMessage({eventCode:s,categoryCode:"activeTransaction",transaction:i});const c={details:o,emitter:n};function a(){const f=n.emit(o);this._transactionHandlers.forEach(h=>h({transaction:o,emitterResult:f}))}return setTimeout(a.bind(this),5),c}function Yi(r){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");r=this._system==="ethereum"?r.toLowerCase():r;const t=We(),e="watch",n=this.watchedAccounts.find(s=>s.address===r);return n?n.emitters.push(t):this.watchedAccounts.push({address:r,emitters:[t]}),this._sendMessage({eventCode:e,categoryCode:"accountAddress",account:{address:r}}),{emitter:t,details:{address:r}}}function Gi(r){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");this._sendMessage(r)}var Xe=function(r,t){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])},Xe(r,t)};function L(r,t){Xe(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Ye(r){return typeof r=="function"}var cn=!1,J={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}cn=r},get useDeprecatedSynchronousErrorHandling(){return cn}};function xt(r){setTimeout(function(){throw r},0)}var le={closed:!0,next:function(r){},error:function(r){if(J.useDeprecatedSynchronousErrorHandling)throw r;xt(r)},complete:function(){}},Qi=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function an(r){return r!==null&&typeof r=="object"}var Ji=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),pe=Ji,Ge=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,s=e._ctorUnsubscribe,i=e._unsubscribe,o=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var c=0;c<n.length;++c){var a=n[c];a.remove(this)}if(Ye(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(l){t=l instanceof pe?un(l.errors):[l]}}if(Qi(o))for(var c=-1,f=o.length;++c<f;){var h=o[c];if(an(h))try{h.unsubscribe()}catch(w){t=t||[],w instanceof pe?t=t.concat(un(w.errors)):t.push(w)}}if(t)throw new pe(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var s=e._parentOrParents;if(s===null)e._parentOrParents=this;else if(s instanceof r){if(s===this)return e;e._parentOrParents=[s,this]}else if(s.indexOf(this)===-1)s.push(this);else return e;var i=this._subscriptions;return i===null?this._subscriptions=[e]:i.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function un(r){return r.reduce(function(t,e){return t.concat(e instanceof pe?e.errors:e)},[])}var Qe=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),K=function(r){L(t,r);function t(e,n,s){var i=r.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=le;break;case 1:if(!e){i.destination=le;break}if(typeof e=="object"){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new hn(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new hn(i,e,n,s);break}return i}return t.prototype[Qe]=function(){return this},t.create=function(e,n,s){var i=new t(e,n,s);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Ge),hn=function(r){L(t,r);function t(e,n,s,i){var o=r.call(this)||this;o._parentSubscriber=e;var c,a=o;return Ye(n)?c=n:n&&(c=n.next,s=n.error,i=n.complete,n!==le&&(a=Object.create(n),Ye(a.unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=c,o._error=s,o._complete=i,o}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!J.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,s=J.useDeprecatedSynchronousErrorHandling;if(this._error)!s||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)s?(n.syncErrorValue=e,n.syncErrorThrown=!0):xt(e),this.unsubscribe();else{if(this.unsubscribe(),s)throw e;xt(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var s=function(){return e._complete.call(e._context)};!J.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(s),this.unsubscribe()):(this.__tryOrSetError(n,s),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(s){if(this.unsubscribe(),J.useDeprecatedSynchronousErrorHandling)throw s;xt(s)}},t.prototype.__tryOrSetError=function(e,n,s){if(!J.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,s)}catch(i){return J.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(xt(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(K);function Zi(r){for(;r;){var t=r,e=t.closed,n=t.destination,s=t.isStopped;if(e||s)return!1;n&&n instanceof K?r=n:r=null}return!0}function to(r,t,e){if(r){if(r instanceof K)return r;if(r[Qe])return r[Qe]()}return!r&&!t&&!e?new K(le):new K(r,t,e)}var Je=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function eo(r){return r}function ro(r){return r.length===0?eo:r.length===1?r[0]:function(t){return r.reduce(function(e,n){return n(e)},t)}}var ln=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var s=this.operator,i=to(t,e,n);if(s?i.add(s.call(i,this.source)):i.add(this.source||J.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),J.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){J.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Zi(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=pn(e),new e(function(s,i){var o;o=n.subscribe(function(c){try{t(c)}catch(a){i(a),o&&o.unsubscribe()}},i,s)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[Je]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:ro(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=pn(t),new t(function(n,s){var i;e.subscribe(function(o){return i=o},function(o){return s(o)},function(){return n(i)})})},r.create=function(t){return new r(t)},r}();function pn(r){if(r||(r=Promise),!r)throw new Error("no Promise impl found");return r}var no=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}},so=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,xt),t}};function io(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fn=io(),oo=function(r){return function(t){var e=r[fn]();do{var n=void 0;try{n=e.next()}catch(s){return t.error(s),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},co=function(r){return function(t){var e=r[Je]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},ao=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function uo(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var ho=function(r){if(r&&typeof r[Je]=="function")return co(r);if(ao(r))return no(r);if(uo(r))return so(r);if(r&&typeof r[fn]=="function")return oo(r);var t=an(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)},lo=function(r){L(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(K),po=function(r){L(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(K);function fo(r,t){if(!t.closed)return r instanceof ln?r.subscribe(t):ho(r)(t)}var yo=function(r){L(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(Ge),bo=function(r){L(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s.pending=!1,s}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),setInterval(e.flush.bind(e,this),s)},t.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!==null&&this.delay===s&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(e,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var s=!1,i=void 0;try{this.work(e)}catch(o){s=!0,i=!!o&&o||new Error(o)}if(s)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,s=n.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&s.splice(i,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(yo),dn=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}(),wo=function(r){L(t,r);function t(e,n){n===void 0&&(n=dn.now);var s=r.call(this,e,function(){return t.delegate&&t.delegate!==s?t.delegate.now():n()})||this;return s.actions=[],s.active=!1,s.scheduled=void 0,s}return t.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,s):r.prototype.schedule.call(this,e,n,s)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var s;this.active=!0;do if(s=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,s){for(;e=n.shift();)e.unsubscribe();throw s}},t}(dn),_o=new wo(bo),yn=_o;function go(r){return r instanceof Date&&!isNaN(+r)}function mo(r,t){return new ln(function(e){return e.error(r)})}var vo=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),So=vo;function fe(r,t){return function(e){return e.lift(new Eo(r,t))}}var Eo=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new ko(t,this.predicate,this.thisArg))},r}(),ko=function(r){L(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.predicate=n,i.thisArg=s,i.count=0,i}return t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(s){this.destination.error(s);return}n&&this.destination.next(e)},t}(K);function de(r){return function(t){return t.lift(new xo(r))}}var xo=function(){function r(t){if(this.total=t,this.total<0)throw new So}return r.prototype.call=function(t,e){return e.subscribe(new To(t,this.total))},r}(),To=function(r){L(t,r);function t(e,n){var s=r.call(this,e)||this;return s.total=n,s.count=0,s}return t.prototype._next=function(e){var n=this.total,s=++this.count;s<=n&&(this.destination.next(e),s===n&&(this.destination.complete(),this.unsubscribe()))},t}(K);function bn(r){return function(t){return t.lift(new Bo(r))}}var Bo=function(){function r(t){this.callback=t}return r.prototype.call=function(t,e){return e.subscribe(new Co(t,this.callback))},r}(),Co=function(r){L(t,r);function t(e,n){var s=r.call(this,e)||this;return s.add(new Ge(n)),s}return t}(K);function Oo(r,t){return function(e){return e.lift(new Io(r,t))}}var Io=function(){function r(t,e){this.predicate=t,this.inclusive=e}return r.prototype.call=function(t,e){return e.subscribe(new Ao(t,this.predicate,this.inclusive))},r}(),Ao=function(r){L(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.predicate=n,i.inclusive=s,i.index=0,i}return t.prototype._next=function(e){var n=this.destination,s;try{s=this.predicate(e,this.index++)}catch(i){n.error(i);return}this.nextOrComplete(e,s)},t.prototype.nextOrComplete=function(e,n){var s=this.destination;n?s.next(e):(this.inclusive&&s.next(e),s.complete())},t}(K),Ho=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),Po=Ho;function Ro(r,t,e){return e===void 0&&(e=yn),function(n){var s=go(r),i=s?+r-e.now():Math.abs(r);return n.lift(new zo(i,s,t,e))}}var zo=function(){function r(t,e,n,s){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=s}return r.prototype.call=function(t,e){return e.subscribe(new Do(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),Do=function(r){L(t,r);function t(e,n,s,i,o){var c=r.call(this,e)||this;return c.absoluteTimeout=n,c.waitFor=s,c.withObservable=i,c.scheduler=o,c.scheduleTimeout(),c}return t.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(fo(n,new lo(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(po);function Mo(r,t){return t===void 0&&(t=yn),Ro(r,mo(new Po),t)}const ye=new $t;function jo(r,t,e){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");const n=On();return this._sendMessage({categoryCode:"simulate",eventCode:"txSimulation",eventId:n,transaction:e}),new Promise((s,i)=>{ye.pipe(fe(({eventId:o})=>o===n),de(1)).subscribe({next:({transaction:o})=>s(o),error:({error:o})=>i(o.message)})})}function No(r){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");const t=On();return this._sendMessage({categoryCode:"simulate",eventCode:"txSimulation",eventId:t,transaction:r}),new Promise((e,n)=>{ye.pipe(fe(({eventId:s})=>s===t),de(1)).subscribe({next:({transaction:s})=>e(s),error:({error:s})=>n(s.message)})})}function Fo(r){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");const t=Vi(this._system,r),e=Wi(this._system,r);if(t){const n=this._system==="ethereum"?r.toLowerCase():r;this.watchedAccounts=this.watchedAccounts.filter(s=>s.address!==n),this.configurations.delete(n),this._sendMessage({categoryCode:"accountAddress",eventCode:"unwatch",account:{address:n}})}else if(e){this.watchedTransactions=this.watchedTransactions.filter(s=>s.hash!==r);const n={...this._system==="ethereum"?{hash:r}:{txid:r},id:r,status:"unsubscribed"};this._sendMessage({categoryCode:"activeTransaction",eventCode:"unwatch",transaction:n})}else throw new Error(`Error trying to unsubscribe ${r}: not a valid address or transaction id/hash`)}function Lo(r){if(this._destroyed)throw new Error("The WebSocket instance has been destroyed, re-initialize to continue making requests.");const t=this._system==="ethereum"?r.scope.toLowerCase():r.scope,e=this.configurations.get(t);e&&e.subscription&&e.subscription.next();const n=new $t,s=r.watchAddress?{emitter:We()}:{};return this.configurations.set(t,{...r,...s,subscription:n}),this._sendMessage({categoryCode:"configs",eventCode:"put",config:r}),new Promise((i,o)=>{n.pipe(de(1),Mo(5e3)).subscribe({next:()=>i({...s,details:{config:r}}),error:c=>{const a=c.message==="Timeout has occurred"?`Configuration with scope: ${r.scope} has been sent to the Blocknative server, but has not received a reply within 5 seconds.`:c.message;this._onerror?(this._onerror({message:a}),i(`Error: ${a}`)):o(a)}})})}function Uo(r){const{id:t,chainId:e,type:n}=r;if(!sn("ethereum",parseInt(e,16)))throw new Error(`chainId: ${e} is an unsupported network`);this.connections[e]||(this.connections[e]=new this.Blocknative({system:"ethereum",networkId:parseInt(e,16),dappId:this.apiKey,ws:this.ws,apiUrl:this.apiUrl,transactionHandlers:[({transaction:i})=>{this.onTransaction$.next(i)}],onerror:i=>this.errors$.next(i)}));const s=this.connections[e];if(n==="account"){const{filters:i=[],abi:o}=r;return s.configuration({scope:t,filters:i,...o?{abi:o}:{},watchAddress:!0}),this.transactions$.pipe(fe(({watchedAddress:c})=>c===t),bn(()=>{this.unsubscribe({id:t,chainId:e})}))}else{const{emitter:i}=s.transaction(t);return Jr(i,"all").pipe(Oo(({status:o})=>o!=="confirmed"&&o!=="failed"&&o!=="dropped",!0),bn(()=>{this.unsubscribe({id:t,chainId:e})}))}}function $o(r){const{id:t,chainId:e,timeout:n=0}=r,s=Mi(n),i=this.transactions$.pipe(fe(({hash:o,watchedAddress:c})=>o===t||c===t));Di(i,s).pipe(de(1)).subscribe(o=>{typeof o=="number"?Object.entries(this.connections).filter(([c,a])=>a!==null).forEach(([c,a])=>{e&&c!==e||(a.unsubscribe(t),!a.watchedAccounts.length&&!a.watchedTransactions.length&&!a.configurations.size&&(a.destroy(),this.connections[c]=null))}):this.unsubscribe(r)})}class Ko{constructor(t,e){const{ws:n}=t,{apiKey:s}=t,{apiUrl:i}=t;this.apiKey=s,this.apiUrl=i,this.ws=n,this.connections={},this.onTransaction$=new $t,this.transactions$=this.onTransaction$.asObservable(),this.errors$=new $t,this.Blocknative=e,this.subscribe=Uo.bind(this),this.unsubscribe=$o.bind(this)}}var Vo="4.6.9";function Wo(r){if(this._queuedMessages.length>nn)throw new Error(`Queue limit of ${nn} messages has been reached.`);this._queuedMessages.push(Ze.bind(this)(r)),this._processingQueue||this._processQueue()}async function qo(){for(this._processingQueue=!0,this._connected||await Yo.bind(this)();this._queuedMessages.length>0;){await qe(1),this._waitToRetry!==null&&(await this._waitToRetry,this._waitToRetry=null);const r=this._queuedMessages.shift(),t=this._limitRules.duration/this._limitRules.points*1e3;await qe(t),this._socket.send(r)}this._processingQueue=!1,this._limitRules=rn}function Xo(r){const{status:t,reason:e,event:n,connectionId:s,serverVersion:i,retryMs:o,limitRules:c,blockedMsg:a,dispatchTimestamp:f}=JSON.parse(r.data);if(s&&(on()&&window.localStorage.setItem(this._storageKey,s),this._connectionId=s),t==="error"){if(e.includes("ratelimit")&&!e.match(/IP (PendingSimulation|Notification) ratelimit reached/)){this._waitToRetry=qe(o),this._limitRules=c,a&&this._queuedMessages.unshift(a);return}if(e.includes("upgrade your plan"))if(this._onerror){this._onerror({message:e});return}else throw new Error(e);if(e.includes("not a valid API key"))if(this._onerror){this._onerror({message:e});return}else throw new Error(e);if(e.includes("network not supported"))if(this._onerror){this._onerror({message:e});return}else throw new Error(e);if(e.includes("maximum allowed amount"))if(this._onerror){this._onerror({message:e});return}else throw new Error(e);if(e.includes("invalid txid")){const h=`${n.transaction.txid} is an invalid txid`;if(this._onerror){this._onerror({message:h,transaction:n.transaction.txid});return}else throw new Error(h)}if(e.includes("invalid hash")){const h=`${n.transaction.hash} is an invalid transaction hash`;if(this._onerror){this._onerror({message:h,transaction:n.transaction.hash});return}else throw new Error(h)}if(e.includes("invalid address")){const h=`${n.account.address} is an invalid address`;if(this._onerror){this._onerror({message:h,account:n.account.address});return}else throw new Error(h)}if(e.includes("not a valid Bitcoin"))if(this._onerror){this._onerror({message:e,account:n.account.address});return}else throw new Error(e);if(e.includes("not a valid Ethereum"))if(this._onerror){this._onerror({message:e,account:n.account.address});return}else throw new Error(e);if(n&&n.categoryCode==="simulate"){ye.error({eventId:n.eventId,error:{message:e}});return}if(n&&n.config){const h=this.configurations.get(n.config.scope);h&&h.subscription&&h.subscription.error({message:e});return}if(this._onerror){this._onerror({message:e});return}else throw new Error(e)}if(n&&n.config){const h=this._system==="ethereum"?n.config.scope.toLowerCase():n.config.scope,l=this.configurations.get(h);l&&l.subscription&&l.subscription.next()}if(n&&n.transaction){const{eventId:h,transaction:l,eventCode:w,contractCall:S,timeStamp:v,blockchain:{system:m,network:E}}=n,g=this._system==="ethereum"?{...l,serverVersion:i,eventCode:w,timeStamp:v,dispatchTimestamp:f,system:m,network:E,contractCall:S}:{...l,serverVersion:i,eventCode:w,timeStamp:v,dispatchTimestamp:f,system:m,network:E};if($i(w)||l.status==="unsubscribed")return;if(g.originalHash&&(g.replaceHash=g.hash,g.hash=g.originalHash,delete g.originalHash),w==="txSpeedUp"&&g.status!=="speedup"&&(g.status="speedup"),w==="txCancel"&&g.status!=="cancel"&&(g.status="cancel"),(w==="txSpeedUp"||w==="txCancel")&&(this.watchedTransactions=this.watchedTransactions.map(B=>(B.hash===g.replaceHash&&(B.hash=l.hash||l.txid),B))),n&&n.categoryCode==="simulate"){g.contractCall=n.transaction.contractCall,delete g.dispatchTimestamp,ye.next({eventId:h,transaction:g});return}const C=l.watchedAddress&&this._system==="ethereum"?l.watchedAddress.toLowerCase():l.watchedAddress;if(C){const B=this.watchedAccounts.find(y=>y.address===C),O=B?Ki(B.emitters.map(y=>y.emit(g))):!1,u=this.configurations.get(C),p=u&&u.emitter&&u.emitter.emit(g)||O;this._transactionHandlers.forEach(y=>y({transaction:g,emitterResult:p}))}else{const B=this.watchedTransactions.find(u=>u.hash===g.hash||g.txid),O=B&&B.emitter.emit(g);this._transactionHandlers.forEach(u=>u({transaction:g,emitterResult:O})),(g.status==="speedup"||g.status==="cancel")&&(this.watchedTransactions=this.watchedTransactions.map(u=>u.hash===g.hash||g.txid?{...u,hash:g.replaceHash}:u))}}}function Ze(r){return JSON.stringify({timeStamp:new Date().toISOString(),dappId:this._dappId,version:Vo,appName:this._appName,appVersion:this._appVersion,blockchain:{system:this._system,network:sn(this._system,this._networkId)||"local"},...r},r.categoryCode==="configs"?qi:void 0)}function Yo(){return new Promise(r=>{const t=setInterval(()=>{this._connected&&(setTimeout(r,100),clearInterval(t))})})}const Go="unknown",Qo="unknown",Jo="ethereum";In=class{constructor(r){Fi(r);const{system:t=Jo,name:e=Go,appVersion:n=Qo,networkId:s,transactionHandlers:i=[],ws:o,onopen:c,ondown:a,onreopen:f,onerror:h,onclose:l}=r,{apiUrl:w}=r,{dappId:S}=r,v={connectTimeout:1e4},m=new os(w||"wss://api.blocknative.com/v0",o?{wsConstructor:o,...v}:{...v});m.onopen=Zo.bind(this,c),m.ondown=tc.bind(this,a),m.onreopen=ec.bind(this,f),m.onmessage=Xo.bind(this),m.onerror=C=>h&&h({message:"There was a WebSocket error",error:C}),m.onclose=()=>{this._pingTimeout&&clearInterval(this._pingTimeout),l&&l()};const E=ni.SHA1(`${S} - ${e}`).toString(),g=on()&&window.localStorage.getItem(E);this._storageKey=E,this._connectionId=g||void 0,this._dappId=S,this._system=t,this._networkId=s,this._appName=e,this._appVersion=n,this._transactionHandlers=i,this._socket=m,this._connected=!1,this._sendMessage=Wo.bind(this),this._pingTimeout=void 0,this._destroyed=!1,this._onerror=h,this._queuedMessages=[],this._limitRules=rn,this._waitToRetry=null,this._processingQueue=!1,this._processQueue=qo.bind(this),this._socket.ws.on&&(this._heartbeat=()=>{this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=setTimeout(()=>{this._socket.ws.terminate()},31e3)},this._socket.ws.on("ping",()=>{this._heartbeat&&this._heartbeat()})),this.watchedTransactions=[],this.watchedAccounts=[],this.configurations=new Map,this.transaction=Xi.bind(this),this.account=Yi.bind(this),this.event=Gi.bind(this),this.simulate=jo.bind(this),this.multiSim=No.bind(this),this.unsubscribe=Fo.bind(this),this.configuration=Lo.bind(this),this.destroy=()=>{this._socket.close(),this._destroyed=!0,this._socket.onclose()}}static multichain(r){return new Ko(r,this)}};function Zo(r){this._connected=!0;const t={categoryCode:"initialize",eventCode:"checkDappId",connectionId:this._connectionId};this._socket.send(Ze.bind(this)(t)),this._heartbeat&&this._heartbeat(),r&&r()}function tc(r,t){this._connected=!1,r&&r(t),this._pingTimeout&&clearTimeout(this._pingTimeout)}async function ec(r){this._connected=!0;const t={categoryCode:"initialize",eventCode:"checkDappId",connectionId:this._connectionId};this._socket.send(Ze.bind(this)(t));const e=Array.from(this.configurations.values()),n=this.configurations.get("global");if(n)try{const{emitter:s,subscription:i,...o}=n;await this.configuration(o)}catch(s){console.warn("Error re-sending global configuration upon reconnection:",s)}e.filter(({scope:s})=>s!=="global").forEach(s=>{const{emitter:i,subscription:o,...c}=s;this._sendMessage({categoryCode:"configs",eventCode:"put",config:c})}),this.watchedAccounts.forEach(s=>{this._sendMessage({eventCode:"accountAddress",categoryCode:"watch",account:{address:s.address}})}),r&&r(),this._socket.ws&&this._socket.ws.on&&(this._socket.ws.on("ping",()=>{this._heartbeat&&this._heartbeat()}),this._heartbeat())}});export{bc as __tla,In as default};
