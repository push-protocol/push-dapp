import{f3 as R,fi as F,gw as V,gx as K,dV as T,d_ as s,ej as f,el as N,em as $,gy as q,d$ as i,e2 as x,e3 as j,gz as B,dX as _,dW as b,ed as E,dZ as w,gA as W,en as P,gn as H,eo as J,gB as z,gC as A,ep as O,gD as U,gp as X,gE as Z,gF as G,__tla as Q}from"./index-BNFbPSez.js";import{u as Y,__tla as nn}from"./useGetChannelsList-CV74lTPj.js";import{u as sn,S as an,U as en,N as rn,V as tn,T as ln,__tla as cn}from"./VerifiedChannelTooltipContent-CSu0LHbH.js";import{C as on,__tla as dn}from"./CopyButton-CqgZwzdt.js";import{I as hn,__tla as xn}from"./InfiniteScroll-CH7efxwi.js";import{C as gn,__tla as pn}from"./ContentLayout-cR_mrFHy.js";import{__tla as mn}from"./useMutation-C-SZZUbv.js";import{__tla as un}from"./PushLogo-CrXXfWpq.js";import{__tla as fn}from"./Copy-BFly3vqc.js";let M,jn=Promise.all([(()=>{try{return Q}catch{}})(),(()=>{try{return nn}catch{}})(),(()=>{try{return cn}catch{}})(),(()=>{try{return dn}catch{}})(),(()=>{try{return xn}catch{}})(),(()=>{try{return pn}catch{}})(),(()=>{try{return mn}catch{}})(),(()=>{try{return un}catch{}})(),(()=>{try{return fn}catch{}})()]).then(async()=>{let v,S,C,y,D,k,L,I;v=n=>n==null?void 0:n.notifications,S=({userPushSDKInstance:n,address:l,limit:c,page:t})=>n.channel.notifications(l,{page:t,limit:c}).then(v),C=(n,l,c)=>{const{userPushSDKInstance:t}=R(d=>d.user);return F({queryKey:[V,n],queryFn:()=>S({userPushSDKInstance:t,address:n,page:l,limit:c}),enabled:n!==K})},y=({channel:n})=>{var a;const{wallet:l}=T(),c=!!((a=l==null?void 0:l.accounts)!=null&&a.length),{data:t,refetch:d,isLoading:o}=sn(n==null?void 0:n.channel,{enabled:c}),e=t&&(t==null?void 0:t.length),r=()=>{d()};return s.jsxs(f,{isLoading:o,children:[n&&!e&&s.jsx(an,{channelDetails:n,onSuccess:r,children:s.jsx(N,{variant:"tertiary",size:"small",block:!0,children:"Subscribe"})}),n&&!!e&&s.jsx(en,{channelDetail:n,onSuccess:r,userSetting:JSON.parse(t[0].user_settings),children:s.jsx(N,{variant:"secondary",size:"small",block:!0,leadingIcon:s.jsx(rn,{}),trailingIcon:s.jsx($,{}),children:"Subscribed"})})]})},D=({channelAddress:n})=>{const{mode:l}=q(),{data:c,isLoading:t,isSuccess:d}=C(n,1,20),o=t?Array(10).fill(0):c;return s.jsxs(i,{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"scroll",customScrollbar:!0,gap:"spacing-sm",children:[s.jsx(i,{padding:{ml:"spacing-none spacing-sm"},children:s.jsx(x,{color:"text-primary",variant:"h4-semibold",children:"Recent Notifications"})}),s.jsxs(i,{display:"flex",width:"-webkit-fill-available",height:"100%",flexDirection:"column",gap:"spacing-sm",padding:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-xxs spacing-none spacing-none"},margin:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-sm spacing-none spacing-none"},overflow:"scroll",justifyContent:"flex-start",customScrollbar:!0,children:[d&&!t&&!(o!=null&&o.length)&&s.jsx(i,{display:"flex",alignSelf:"center",width:"fit-content",borderRadius:"radius-xl",backgroundColor:"surface-secondary",padding:"spacing-xxs spacing-sm",children:s.jsxs(x,{color:"text-primary",variant:"bs-regular",children:[" ","No notifications to show yet"]})}),o==null?void 0:o.map(e=>{var a,m,h,u;const r=(a=e==null?void 0:e.message)==null?void 0:a.payload;return s.jsx(f,{isLoading:t,children:s.jsx(i,{css:j`
                  & > div {
                    margin: 0;
                  }
                `,children:s.jsx(B,{notificationTitle:r==null?void 0:r.title,notificationBody:r==null?void 0:r.body,cta:r==null?void 0:r.cta,image:r==null?void 0:r.embed,app:(m=e==null?void 0:e.channel)==null?void 0:m.name,icon:(h=e==null?void 0:e.channel)==null?void 0:h.icon,url:(u=e==null?void 0:e.channel)==null?void 0:u.url,chainName:e==null?void 0:e.source,theme:l})},e.payload_id)})})]})]})},k=({channel:n,isLoading:l})=>{var a,m,h,u;const[c,t]=_.useState(!1),d=b(),o=((n==null?void 0:n.info)||"").length>250,e=o?c?(n==null?void 0:n.info)||"":((n==null?void 0:n.info)||"").substring(0,250):(n==null?void 0:n.info)||"";let r=[E.coreContractChain,...((a=n==null?void 0:n.aliases)==null?void 0:a.filter(g=>g.is_alias_verified).map(g=>parseInt(g.alias_blockchain_id)))||[]];return s.jsxs(i,{display:"flex",flexDirection:"column",width:"100%",height:"100%",gap:"spacing-xl",children:[s.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",padding:{initial:"spacing-none spacing-md spacing-none spacing-none",ml:"spacing-sm"},children:[s.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xs",width:"100%",children:[s.jsx(i,{onClick:()=>d(w.Channels),cursor:"pointer",children:s.jsx(W,{size:24,color:"icon-primary"})}),s.jsxs(i,{display:"flex",justifyContent:"space-between",width:"100%",children:[s.jsxs(i,{display:"flex",gap:{initial:"spacing-sm",ml:"spacing-xs"},alignItems:{initial:"center",ml:"flex-start"},children:[s.jsxs(f,{isLoading:l,children:[s.jsx(i,{width:"90px",height:"90px",borderRadius:"radius-md",overflow:"hidden",border:"border-sm solid stroke-secondary",display:{initial:"flex",ml:"none"},css:j`
                    flex-shrink: 0;
                  `,children:s.jsx("img",{width:"100%",height:"100%",src:(n==null?void 0:n.iconV2)||"",alt:(n==null?void 0:n.name)||""})}),s.jsx(i,{width:"52px",height:"52px",borderRadius:"radius-sm",border:"border-sm solid stroke-secondary",display:{initial:"none",ml:"flex"},overflow:"hidden",children:s.jsx("img",{width:"100%",height:"100%",src:(n==null?void 0:n.iconV2)||"",alt:(n==null?void 0:n.name)||""})})]}),s.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xs",children:[s.jsx(f,{isLoading:l,children:s.jsxs(i,{display:"flex",flexDirection:"column",children:[s.jsxs(i,{display:"flex",alignItems:"center",gap:"spacing-xxxs",children:[s.jsx(x,{color:"text-primary",variant:"h4-semibold",children:(n==null?void 0:n.name)||""}),!!(n!=null&&n.verified_status)&&s.jsx(P,{overlay:s.jsx(tn,{}),children:s.jsx(i,{cursor:"pointer",display:"flex",children:s.jsx(ln,{color:"icon-tertiary",size:18})})}),r.length>0&&s.jsx(i,{display:"flex",alignItems:"center",margin:"spacing-none spacing-none spacing-none spacing-xxxs",children:r.map(g=>{const p=O[g];return p?s.jsx(i,{display:"flex",css:j`
                                  margin-left: -4px;
                                `,children:s.jsx(p,{width:18,height:18},g)}):null})})]}),s.jsxs(i,{display:"flex",gap:"spacing-xxxs",alignItems:"center",children:[s.jsx(x,{color:"text-tertiary",variant:"bs-regular",children:H((n==null?void 0:n.channel)||"",10,10)||""}),s.jsx(on,{tooltipTitle:"Copy Address",content:(n==null?void 0:n.channel)||""})]})]})}),s.jsx(f,{isLoading:l,children:s.jsxs(i,{display:"flex",gap:"spacing-xs",css:j`
                      flex-wrap: wrap;
                    `,alignItems:"center",children:[s.jsxs(x,{color:"text-tertiary-inverse",variant:"c-regular",children:[J(n==null?void 0:n.subscriber_count)," subscribers"]}),((m=n==null?void 0:n.tags)==null?void 0:m[0])&&s.jsx(z,{label:n.tags[0],variant:"info"}),!((h=n==null?void 0:n.tags)!=null&&h[0])&&((u=A)==null?void 0:u[n==null?void 0:n.channel])&&s.jsx(P,{title:"Suggested by Push",children:s.jsx(i,{cursor:"pointer",children:s.jsx(z,{label:A[n.channel]})})})]})})]})]}),s.jsx(i,{display:{initial:"inline",ml:"none"},children:s.jsx(y,{channel:n})})]})]}),s.jsx(f,{isLoading:l,children:s.jsxs(i,{children:[s.jsx(x,{display:{initial:"inline",ml:"none"},variant:"bs-regular",color:"text-tertiary",as:"span",children:e}),s.jsx(x,{display:{initial:"none",ml:"inline"},variant:"bs-regular",color:"text-tertiary",as:"span",children:e}),o&&s.jsxs(i,{as:"span",cursor:"pointer",onClick:()=>t(!c),children:[s.jsxs(x,{display:{initial:"inline",ml:"none"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]}),s.jsxs(x,{display:{initial:"none",ml:"inline"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]})]})]})}),s.jsx(i,{display:{initial:"none",ml:"block"},children:s.jsx(y,{channel:n})})]}),s.jsx(D,{channelAddress:n==null?void 0:n.channel})]})},L=({channels:n,fetchNextPage:l,setSelectedChannelId:c,isLoading:t,hasMoreData:d,isFetchingNextPage:o})=>{const e=b(),r=a=>{c(a==null?void 0:a.channel),e(w.ChannelDetails(a==null?void 0:a.channel))};return s.jsxs(i,{display:{initial:"flex",ml:"none"},width:"fit-content",justifyContent:"flex-start",overflow:"scroll",customScrollbar:!0,height:"100%",maxHeight:"100%",padding:"spacing-none spacing-sm spacing-none spacing-none",flexDirection:"column",children:[s.jsx(hn,{pageStart:1,loadMore:()=>{l()},hasMore:d,useWindow:!1,threshold:150,children:s.jsx(i,{display:"flex",flexDirection:"column",gap:"spacing-md",children:n==null?void 0:n.map(a=>s.jsx(f,{isLoading:t,children:s.jsx(i,{width:"46px",height:"46px",overflow:"hidden",borderRadius:"radius-sm",cursor:"pointer",onClick:()=>r(a),css:j`
                  flex-shrink: 0;
                `,children:s.jsx("img",{width:"100%",height:"100%",src:a==null?void 0:a.iconV2,alt:a==null?void 0:a.name})},a==null?void 0:a.channel)}))})}),o&&s.jsx(i,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:s.jsx(U,{size:"small",variant:"primary"})})]})},I=()=>{const{id:n}=X(),l=b(),[c,t]=_.useState(n||""),{data:d,fetchNextPage:o,hasNextPage:e,isLoading:r,isFetchingNextPage:a}=Y({pageSize:15}),{data:m}=Z(n||""),h=r?Array(10).fill(0):(d==null?void 0:d.pages.flatMap(p=>p.channels))||[],u=!a&&e,g=(h==null?void 0:h.find(p=>(p==null?void 0:p.channel)===c))||m;return _.useEffect(()=>{G.isAddress(n||"")||l(w.Channels)},[n]),(h==null?void 0:h.length)&&s.jsxs(i,{width:"-webkit-fill-available",padding:{initial:"spacing-md spacing-none spacing-none spacing-sm",ml:"spacing-none"},display:"flex",height:"100%",justifyContent:"flex-start",borderRadius:"radius-md radius-md radius-none radius-none",gap:"spacing-md",border:"border-sm solid stroke-secondary",backgroundColor:"surface-primary",children:[s.jsx(L,{channels:h,fetchNextPage:o,hasMoreData:u,isLoading:r,setSelectedChannelId:t,isFetchingNextPage:a}),s.jsx(k,{channel:g,isLoading:r})]})},M=()=>s.jsx(gn,{variant:"verticalStretch",children:s.jsx(I,{})})});export{jn as __tla,M as default};
