import{eU as F,fb as q,gx as K,gy as U,dV as T,d_ as e,em as y,eo as $,ep as I,eq as B,gz as E,d$ as n,e2 as m,e3 as j,gA as J,dX as _,dW as C,eh as O,dZ as v,gB as W,er as N,fJ as G,es as H,gC as z,gD as A,et as X,gE as Z,gq as Q,gF as Y,gG as ii,__tla as ei}from"./index-CJTHuC1y.js";import{u as ni,__tla as ai}from"./useGetChannelsList-D9wGc_KA.js";import{u as li,U as si,N as ti,V as ri,T as oi,__tla as ci}from"./VerifiedChannelTooltipContent-iqoBwWkS.js";import{C as di,__tla as hi}from"./CopyButton-DNX8jy8T.js";import{I as gi,__tla as xi}from"./InfiniteScroll-L_JNM2sf.js";import{U as pi,a as mi,__tla as fi}from"./UnlockProfileWrapper-DKujJlzs.js";import{C as ui,__tla as yi}from"./ContentLayout-Cz1JvJx6.js";import{__tla as ji}from"./PushLogo-DLNRiI4W.js";import{__tla as bi}from"./Copy-DTm5voFK.js";let R,_i=Promise.all([(()=>{try{return ei}catch{}})(),(()=>{try{return ai}catch{}})(),(()=>{try{return ci}catch{}})(),(()=>{try{return hi}catch{}})(),(()=>{try{return xi}catch{}})(),(()=>{try{return fi}catch{}})(),(()=>{try{return yi}catch{}})(),(()=>{try{return ji}catch{}})(),(()=>{try{return bi}catch{}})()]).then(async()=>{let S,M,V,w,k,D,P,L;S=i=>i==null?void 0:i.notifications,M=({userPushSDKInstance:i,address:r,limit:d,page:o})=>i.channel.notifications(r,{page:o,limit:d}).then(S),V=(i,r,d)=>{const{userPushSDKInstance:o}=F(c=>c.user);return q({queryKey:[K,i],queryFn:()=>M({userPushSDKInstance:o,address:i,page:r,limit:d}),enabled:i!==U})},w=({channel:i,onChangeProfileModalVisibility:r,profileModalVisibility:d})=>{var g;const{wallet:o}=T(),c=!!((g=o==null?void 0:o.accounts)!=null&&g.length),{data:t,refetch:l,isLoading:s}=li(i==null?void 0:i.channel,{enabled:c}),a=t&&(t==null?void 0:t.length),h=()=>{l()};return e.jsxs(y,{isLoading:s,children:[i&&!a&&e.jsx($,{channelDetails:i,onSuccess:h,onChangeProfileModalVisibility:r,profileModalVisibility:d,children:e.jsx(I,{variant:"tertiary",size:"small",block:!0,children:"Subscribe"})}),i&&!!a&&e.jsx(si,{channelDetail:i,onSuccess:h,onChangeProfileModalVisibility:r,profileModalVisibility:d,userSetting:JSON.parse(t[0].user_settings),children:e.jsx(I,{variant:"secondary",size:"small",block:!0,leadingIcon:e.jsx(ti,{}),trailingIcon:e.jsx(B,{}),children:"Subscribed"})})]})},k=({channelAddress:i})=>{const{mode:r}=E(),{data:d,isLoading:o,isSuccess:c}=V(i,1,20),t=o?Array(10).fill(0):d;return e.jsxs(n,{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"scroll",customScrollbar:!0,gap:"spacing-sm",children:[e.jsx(n,{padding:{ml:"spacing-none spacing-sm"},children:e.jsx(m,{color:"text-primary",variant:"h4-semibold",children:"Recent Notifications"})}),e.jsxs(n,{display:"flex",width:"-webkit-fill-available",height:"100%",flexDirection:"column",gap:"spacing-sm",padding:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-xxs spacing-none spacing-none"},margin:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-sm spacing-none spacing-none"},overflow:"scroll",justifyContent:"flex-start",customScrollbar:!0,children:[c&&!o&&!(t!=null&&t.length)&&e.jsx(n,{display:"flex",alignSelf:"center",width:"fit-content",borderRadius:"radius-xl",backgroundColor:"surface-secondary",padding:"spacing-xxs spacing-sm",children:e.jsxs(m,{color:"text-primary",variant:"bs-regular",children:[" ","No notifications to show yet"]})}),t==null?void 0:t.map(l=>{var a,h,g,u;const s=(a=l==null?void 0:l.message)==null?void 0:a.payload;return e.jsx(y,{isLoading:o,children:e.jsx(n,{css:j`
                  & > div {
                    margin: 0;
                  }
                `,children:e.jsx(J,{notificationTitle:s==null?void 0:s.title,notificationBody:s==null?void 0:s.body,cta:s==null?void 0:s.cta,image:s==null?void 0:s.embed,app:(h=l==null?void 0:l.channel)==null?void 0:h.name,icon:(g=l==null?void 0:l.channel)==null?void 0:g.icon,url:(u=l==null?void 0:l.channel)==null?void 0:u.url,chainName:l==null?void 0:l.source,theme:r})},l.payload_id)})})]})]})},D=({channel:i,isLoading:r,onChangeProfileModalVisibility:d,profileModalVisibility:o})=>{var g,u,x,b;const[c,t]=_.useState(!1),l=C(),s=((i==null?void 0:i.info)||"").length>250,a=s?c?(i==null?void 0:i.info)||"":((i==null?void 0:i.info)||"").substring(0,250):(i==null?void 0:i.info)||"";let h=[O.coreContractChain,...((g=i==null?void 0:i.aliases)==null?void 0:g.filter(f=>f.is_alias_verified).map(f=>parseInt(f.alias_blockchain_id)))||[]];return e.jsxs(n,{display:"flex",flexDirection:"column",width:"100%",height:"100%",gap:"spacing-xl",children:[e.jsxs(n,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",padding:{initial:"spacing-none spacing-md spacing-none spacing-none",ml:"spacing-sm"},children:[e.jsxs(n,{display:"flex",flexDirection:"column",gap:"spacing-xs",width:"100%",children:[e.jsx(n,{onClick:()=>l(v.Channels),cursor:"pointer",children:e.jsx(W,{size:24,color:"icon-primary"})}),e.jsxs(n,{display:"flex",justifyContent:"space-between",width:"100%",children:[e.jsxs(n,{display:"flex",gap:{initial:"spacing-sm",ml:"spacing-xs"},alignItems:{initial:"center",ml:"flex-start"},children:[e.jsxs(y,{isLoading:r,children:[e.jsx(n,{width:"90px",height:"90px",borderRadius:"radius-md",overflow:"hidden",border:"border-sm solid stroke-secondary",display:{initial:"flex",ml:"none"},css:j`
                    flex-shrink: 0;
                  `,children:e.jsx("img",{width:"100%",height:"100%",src:(i==null?void 0:i.iconV2)||"",alt:(i==null?void 0:i.name)||""})}),e.jsx(n,{width:"52px",height:"52px",borderRadius:"radius-sm",border:"border-sm solid stroke-secondary",display:{initial:"none",ml:"flex"},overflow:"hidden",children:e.jsx("img",{width:"100%",height:"100%",src:(i==null?void 0:i.iconV2)||"",alt:(i==null?void 0:i.name)||""})})]}),e.jsxs(n,{display:"flex",flexDirection:"column",gap:"spacing-xs",children:[e.jsx(y,{isLoading:r,children:e.jsxs(n,{display:"flex",flexDirection:"column",children:[e.jsxs(n,{display:"flex",alignItems:"center",gap:"spacing-xxxs",children:[e.jsx(m,{color:"text-primary",variant:"h4-semibold",children:(i==null?void 0:i.name)||""}),!!(i!=null&&i.verified_status)&&e.jsx(N,{overlay:e.jsx(ri,{}),children:e.jsx(n,{cursor:"pointer",display:"flex",children:e.jsx(oi,{color:"icon-tertiary",size:18})})}),h.length>0&&e.jsx(n,{display:"flex",alignItems:"center",margin:"spacing-none spacing-none spacing-none spacing-xxxs",children:h.map(f=>{const p=X[f];return p?e.jsx(n,{display:"flex",css:j`
                                  margin-left: -4px;
                                `,children:e.jsx(p,{width:18,height:18},f)}):null})})]}),e.jsxs(n,{display:"flex",gap:"spacing-xxxs",alignItems:"center",children:[e.jsx(m,{color:"text-tertiary",variant:"bs-regular",children:G((i==null?void 0:i.channel)||"",10,10)||""}),e.jsx(di,{tooltipTitle:"Copy Address",content:(i==null?void 0:i.channel)||""})]})]})}),e.jsx(y,{isLoading:r,children:e.jsxs(n,{display:"flex",gap:"spacing-xs",css:j`
                      flex-wrap: wrap;
                    `,alignItems:"center",children:[e.jsxs(m,{color:"text-tertiary-inverse",variant:"c-regular",children:[H(i==null?void 0:i.subscriber_count)," subscribers"]}),((u=i==null?void 0:i.tags)==null?void 0:u[0])&&e.jsx(z,{label:i.tags[0],variant:"info"}),!((x=i==null?void 0:i.tags)!=null&&x[0])&&((b=A)==null?void 0:b[i==null?void 0:i.channel])&&e.jsx(N,{title:"Suggested by Push",children:e.jsx(n,{cursor:"pointer",children:e.jsx(z,{label:A[i.channel]})})})]})})]})]}),e.jsx(n,{display:{initial:"inline",ml:"none"},children:e.jsx(w,{channel:i,onChangeProfileModalVisibility:d,profileModalVisibility:o})})]})]}),e.jsx(y,{isLoading:r,children:e.jsxs(n,{children:[e.jsx(m,{display:{initial:"inline",ml:"none"},variant:"bs-regular",color:"text-tertiary",as:"span",children:a}),e.jsx(m,{display:{initial:"none",ml:"inline"},variant:"bs-regular",color:"text-tertiary",as:"span",children:a}),s&&e.jsxs(n,{as:"span",cursor:"pointer",onClick:()=>t(!c),children:[e.jsxs(m,{display:{initial:"inline",ml:"none"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]}),e.jsxs(m,{display:{initial:"none",ml:"inline"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]})]})]})}),e.jsx(n,{display:{initial:"none",ml:"block"},children:e.jsx(w,{channel:i})})]}),e.jsx(k,{channelAddress:i==null?void 0:i.channel})]})},P=({channels:i,fetchNextPage:r,setSelectedChannelId:d,isLoading:o,hasMoreData:c,isFetchingNextPage:t})=>{const l=C(),s=a=>{d(a==null?void 0:a.channel),l(v.ChannelDetails(a==null?void 0:a.channel))};return e.jsxs(n,{display:{initial:"flex",ml:"none"},width:"fit-content",justifyContent:"flex-start",overflow:"scroll",customScrollbar:!0,height:"100%",maxHeight:"100%",padding:"spacing-none spacing-sm spacing-none spacing-none",flexDirection:"column",children:[e.jsx(gi,{pageStart:1,loadMore:()=>{r()},hasMore:c,useWindow:!1,threshold:150,children:e.jsx(n,{display:"flex",flexDirection:"column",gap:"spacing-md",children:i==null?void 0:i.map(a=>e.jsx(y,{isLoading:o,children:e.jsx(n,{width:"46px",height:"46px",overflow:"hidden",borderRadius:"radius-sm",cursor:"pointer",onClick:()=>s(a),css:j`
                  flex-shrink: 0;
                `,children:e.jsx("img",{width:"100%",height:"100%",src:a==null?void 0:a.iconV2,alt:a==null?void 0:a.name})},a==null?void 0:a.channel)}))})}),t&&e.jsx(n,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:e.jsx(Z,{size:"small",variant:"primary"})})]})},L=()=>{const{id:i}=Q(),r=C(),[d,o]=_.useState(i||""),[c,t]=_.useState({isVisible:!1,channel_id:null}),{data:l,fetchNextPage:s,hasNextPage:a,isLoading:h,isFetchingNextPage:g}=ni({pageSize:15}),{data:u}=Y(i||""),x=h?Array(10).fill(0):(l==null?void 0:l.pages.flatMap(p=>p.channels))||[],b=!g&&a,f=(x==null?void 0:x.find(p=>(p==null?void 0:p.channel)===d))||u;return _.useEffect(()=>{ii.isAddress(i||"")||r(v.Channels)},[i]),(x==null?void 0:x.length)&&e.jsxs(n,{width:"-webkit-fill-available",padding:{initial:"spacing-md spacing-none spacing-none spacing-sm",ml:"spacing-none"},display:"flex",height:"100%",justifyContent:"flex-start",borderRadius:"radius-md radius-md radius-none radius-none",gap:"spacing-md",border:"border-sm solid stroke-secondary",backgroundColor:"surface-primary",children:[e.jsx(P,{channels:x,fetchNextPage:s,hasMoreData:b,isLoading:h,setSelectedChannelId:o,isFetchingNextPage:g}),e.jsx(D,{channel:f,isLoading:h,onChangeProfileModalVisibility:p=>t(p),profileModalVisibility:c}),(c==null?void 0:c.isVisible)&&e.jsx(n,{display:"flex",justifyContent:"center",width:"-webkit-fill-available",alignItems:"center",css:j`
              z-index: 99999;
            `,children:e.jsx(pi,{type:mi.MODAL,showConnectModal:!0,onClose:()=>t({isVisible:!1,channel_id:null}),description:"Unlock your profile to proceed."})})]})},R=()=>e.jsx(ui,{variant:"verticalStretch",children:e.jsx(L,{})})});export{_i as __tla,R as default};
