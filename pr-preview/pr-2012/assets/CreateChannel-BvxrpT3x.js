import{d_ as i,ei as Sn,fD as Qe,fE as Pe,fC as et,f_ as En,je as _n,jf as Pn,jg as Un,jh as tt,fA as fe,ji as nt,jj as kn,jk as Tn,ev as Dn,dV as me,d$ as g,gr as rt,gs as Ln,gt as Nn,em as J,eg as b,fk as Bn,fm as Mn,jl as On,eb as Ue,ea as Fn,dX as S,f4 as Rn,hP as An,eh as Gn,dW as Hn,hc as Jn,gK as Vn,hY as Wn,eP as Kn,gf as qn,iH as zn,g0 as Xn,iE as Yn,j0 as $n,dZ as Zn,__tla as Qn}from"./index-DCsQoDbS.js";import{S as er,a as tr,u as nr,__tla as rr}from"./StakingVariant-CgkbhqX-.js";import{u as ir,__tla as ar}from"./useGetPaymentDetails-Vl3G00mC.js";import{S as sr,__tla as or}from"./Stepper-ByKBjwx_.js";import{I as lr,P as cr,__tla as dr}from"./ImportPushTokenMessage-CLndk6K2.js";import{u as hr,__tla as ur}from"./useGetChannelCategories-BnJJqnpQ.js";import{u as pr,F as gr,b as fr,c as mr,a as ye,__tla as yr}from"./index.esm-DTOgKTbz.js";import{a as xe,U as xr,b as it}from"./Common.form-NbJ1DVkQ.js";import{I as vr,__tla as wr}from"./ImageClipper-C5MEInec.js";let at,st,jr=Promise.all([(()=>{try{return Qn}catch{}})(),(()=>{try{return rr}catch{}})(),(()=>{try{return ar}catch{}})(),(()=>{try{return or}catch{}})(),(()=>{try{return dr}catch{}})(),(()=>{try{return ur}catch{}})(),(()=>{try{return yr}catch{}})(),(()=>{try{return wr}catch{}})()]).then(async()=>{const ot=e=>{const{svgProps:t,...n}=e;return i.jsx(Sn,{componentName:"CloudUpload",icon:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 53 52",fill:"none",...t,children:[i.jsx("path",{d:"M16.1888 26.3978L26.7966 15.7901L37.4043 26.3978",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),i.jsx("path",{d:"M27.0618 50.0001V16.8509",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),i.jsx("path",{d:"M21.4927 35.4144H11.1502C8.05625 35.0608 1.86841 32.4972 1.86841 25.0718C1.86841 17.6464 8.05625 14.9061 11.1502 14.4641C11.769 10.3094 15.6585 2 26.2662 2C39.2607 2 41.0286 10.8398 41.9126 16.0553C45.0065 15.9669 51.4596 19.2906 51.4596 26.9282C51.2828 29.7569 49.6032 35.4144 44.2993 35.4144C38.9955 35.4144 34.1336 35.4144 32.3656 35.4144",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...n})},lt=async e=>{const{channelType:t,identityBytes:n,fees:r,signer:a}=e;return(await new Qe(Pe.epnscore,et.epnscore,a).createChannelWithPUSH(t,n,r,0,{gasLimit:6e5})).wait()},ct=()=>En({mutationKey:[_n],mutationFn:lt});var ve={exports:{}},we={exports:{}},dt=Pn(),ke=Un().EventEmitter;we.exports=C,we.exports.default=C;function C(e){if(!(this instanceof C))return new C(e);ke.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}dt(C,ke);var ht=["pop","shift","indexOf","lastIndexOf"];ht.forEach(function(e){C.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}}),C.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},C.prototype.reverse=function(){return this.jobs.reverse(),this};var ut=["push","unshift","splice"];ut.forEach(function(e){C.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}}),Object.defineProperty(C.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),C.prototype.start=function(e){if(e&&gt.call(this,e),this.running=!0,this.pending>=this.concurrency)return;if(this.jobs.length===0){this.pending===0&&je.call(this);return}var t=this,n=this.jobs.shift(),r=!0,a=this.session,s=null,o=!1,f=null,I=n.timeout||this.timeout;function x(c,v){r&&t.session===a&&(r=!1,t.pending--,s!==null&&(delete t.timers[s],clearTimeout(s)),c?t.emit("error",c,n):o===!1&&(f!==null&&(t.results[f]=Array.prototype.slice.call(arguments,1)),t.emit("success",v,n)),t.session===a&&(t.pending===0&&t.jobs.length===0?je.call(t):t.running&&t.start()))}I&&(s=setTimeout(function(){o=!0,t.listeners("timeout").length>0?t.emit("timeout",x,n):x()},I),this.timers[s]=s),this.results&&(f=this.results.length,this.results[f]=null),this.pending++,t.emit("start",n);var d=n(x);d&&d.then&&typeof d.then=="function"&&d.then(function(c){return x(null,c)}).catch(function(c){return x(c||!0)}),this.running&&this.jobs.length>0&&this.start()},C.prototype.stop=function(){this.running=!1},C.prototype.end=function(e){pt.call(this),this.jobs.length=0,this.pending=0,je.call(this,e)};function pt(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}function gt(e){var t=this;this.on("error",n),this.on("end",r);function n(a){t.end(a)}function r(a){t.removeListener("error",n),t.removeListener("end",r),e(a,this.results)}}function je(e){this.session++,this.running=!1,this.emit("end",e)}var ft=we.exports,O={},V={};Object.defineProperty(V,"__esModule",{value:!0}),V.BMP=void 0,V.BMP={validate(e){return e.toString("ascii",0,2)==="BM"},calculate(e){return{height:Math.abs(e.readInt32LE(22)),width:e.readUInt32LE(18)}}};var W={},F={};Object.defineProperty(F,"__esModule",{value:!0}),F.ICO=void 0;const mt=1,yt=6,xt=16;function Te(e,t){const n=e.readUInt8(t);return n===0?256:n}function De(e,t){const n=yt+t*xt;return{height:Te(e,n+1),width:Te(e,n)}}F.ICO={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===mt},calculate(e){const t=e.readUInt16LE(4),n=De(e,0);if(t===1)return n;const r=[n];for(let a=1;a<t;a+=1)r.push(De(e,a));return{height:n.height,images:r,width:n.width}}},Object.defineProperty(W,"__esModule",{value:!0}),W.CUR=void 0;const vt=F,wt=2;W.CUR={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===wt},calculate(e){return vt.ICO.calculate(e)}};var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.DDS=void 0,K.DDS={validate(e){return e.readUInt32LE(0)===542327876},calculate(e){return{height:e.readUInt32LE(12),width:e.readUInt32LE(16)}}};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.GIF=void 0;const jt=/^GIF8[79]a/;q.GIF={validate(e){const t=e.toString("ascii",0,6);return jt.test(t)},calculate(e){return{height:e.readUInt16LE(8),width:e.readUInt16LE(6)}}};var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.ICNS=void 0;const Ct=8,It=4,bt=4,St={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function Le(e,t){const n=t+bt;return[e.toString("ascii",t,n),e.readUInt32BE(n)]}function Ne(e){const t=St[e];return{width:t,height:t,type:e}}z.ICNS={validate(e){return e.toString("ascii",0,4)==="icns"},calculate(e){const t=e.length,n=e.readUInt32BE(It);let r=Ct,a=Le(e,r),s=Ne(a[0]);if(r+=a[1],r===n)return s;const o={height:s.height,images:[s],width:s.width};for(;r<n&&r<t;)a=Le(e,r),s=Ne(a[0]),r+=a[1],o.images.push(s);return o}};var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.J2C=void 0,X.J2C={validate(e){return e.toString("hex",0,4)==="ff4fff51"},calculate(e){return{height:e.readUInt32BE(12),width:e.readUInt32BE(8)}}};var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.JP2=void 0;const $={ftyp:"66747970",jp2h:"6a703268",jp__:"6a502020",rreq:"72726571"},Et=e=>{const t=e.readUInt8(0);let n=1+2*t;const r=e.readUInt16BE(n)*(2+t);n=n+2+r;const a=e.readUInt16BE(n)*(16+t);return n+2+a},Be=e=>({height:e.readUInt32BE(4),width:e.readUInt32BE(8)});Y.JP2={validate(e){const t=e.toString("hex",4,8),n=e.readUInt32BE(0);if(t!==$.jp__||n<1)return!1;const r=n+4,a=e.readUInt32BE(n);return e.slice(r,r+a).toString("hex",0,4)===$.ftyp},calculate(e){const t=e.readUInt32BE(0),n=e.readUInt16BE(t+2);let r=t+4+n;switch(e.toString("hex",r,r+4)){case $.rreq:return r=r+4+4+Et(e.slice(r+4)),Be(e.slice(r+8,r+24));case $.jp2h:return Be(e.slice(r+8,r+24));default:throw new TypeError("Unsupported header found: "+e.toString("ascii",r,r+4))}}};var Z={},R={};Object.defineProperty(R,"__esModule",{value:!0}),R.readUInt=void 0;function _t(e,t,n,r){n=n||0;const a=r?"BE":"LE",s="readUInt"+t+a;return e[s].call(e,n)}R.readUInt=_t,Object.defineProperty(Z,"__esModule",{value:!0}),Z.JPG=void 0;const A=R,Pt="45786966",Ut=2,Ce=6,kt=2,Tt="4d4d",Dt="4949",Me=12,Lt=2;function Nt(e){return e.toString("hex",2,6)===Pt}function Bt(e,t){return{height:e.readUInt16BE(t),width:e.readUInt16BE(t+2)}}function Mt(e,t){const n=Ce+8,r=A.readUInt(e,16,n,t);for(let a=0;a<r;a++){const s=n+Lt+a*Me,o=s+Me;if(s>e.length)return;const f=e.slice(s,o);if(A.readUInt(f,16,0,t)===274)return A.readUInt(f,16,2,t)!==3||A.readUInt(f,32,4,t)!==1?void 0:A.readUInt(f,16,8,t)}}function Ot(e,t){const n=e.slice(Ut,t),r=n.toString("hex",Ce,Ce+kt),a=r===Tt;if(a||r===Dt)return Mt(n,a)}function Ft(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(e[t]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}Z.JPG={validate(e){return e.toString("hex",0,2)==="ffd8"},calculate(e){e=e.slice(4);let t,n;for(;e.length;){const r=e.readUInt16BE(0);if(Nt(e)&&(t=Ot(e,r)),Ft(e,r),n=e[r+1],n===192||n===193||n===194){const a=Bt(e,r+5);return t?{height:a.height,orientation:t,width:a.width}:a}e=e.slice(r+2)}throw new TypeError("Invalid JPG, no size found")}};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.KTX=void 0;const Rt="KTX 11";Q.KTX={validate(e){return Rt===e.toString("ascii",1,7)},calculate(e){return{height:e.readUInt32LE(40),width:e.readUInt32LE(36)}}};var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.PNG=void 0;const At=`PNG\r

`,Gt="IHDR",Oe="CgBI";ee.PNG={validate(e){if(At===e.toString("ascii",1,8)){let t=e.toString("ascii",12,16);if(t===Oe&&(t=e.toString("ascii",28,32)),t!==Gt)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return e.toString("ascii",12,16)===Oe?{height:e.readUInt32BE(36),width:e.readUInt32BE(32)}:{height:e.readUInt32BE(20),width:e.readUInt32BE(16)}}};var te={};Object.defineProperty(te,"__esModule",{value:!0}),te.PNM=void 0;const Fe={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},Ht=Object.keys(Fe),Re={default:e=>{let t=[];for(;e.length>0;){const n=e.shift();if(n[0]!=="#"){t=n.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const n=e.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[r,a]=n.split(" ");if(r&&a&&(t[r.toLowerCase()]=parseInt(a,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}};te.PNM={validate(e){const t=e.toString("ascii",0,2);return Ht.includes(t)},calculate(e){const t=e.toString("ascii",0,2),n=Fe[t],r=e.toString("ascii",3).split(/[\r\n]+/);return(Re[n]||Re.default)(r)}};var ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.PSD=void 0,ne.PSD={validate(e){return e.toString("ascii",0,4)==="8BPS"},calculate(e){return{height:e.readUInt32BE(14),width:e.readUInt32BE(18)}}};var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.SVG=void 0;const Ae=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,ie={height:/\sheight=(['"])([^%]+?)\1/,root:Ae,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},Ie=2.54,Jt={cm:96/Ie,em:16,ex:8,m:96/Ie*100,mm:96/Ie/10,pc:96/72/12,pt:96/72};function ae(e){const t=/([0-9.]+)([a-z]*)/.exec(e);if(t)return Math.round(parseFloat(t[1])*(Jt[t[2]]||1))}function Vt(e){const t=e.split(" ");return{height:ae(t[3]),width:ae(t[2])}}function Wt(e){const t=e.match(ie.width),n=e.match(ie.height),r=e.match(ie.viewbox);return{height:n&&ae(n[2]),viewbox:r&&Vt(r[2]),width:t&&ae(t[2])}}function Kt(e){return{height:e.height,width:e.width}}function qt(e,t){const n=t.width/t.height;return e.width?{height:Math.floor(e.width/n),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*n)}:{height:t.height,width:t.width}}re.SVG={validate(e){const t=String(e);return Ae.test(t)},calculate(e){const t=e.toString("utf8").match(ie.root);if(t){const n=Wt(t[0]);if(n.width&&n.height)return Kt(n);if(n.viewbox)return qt(n,n.viewbox)}throw new TypeError("Invalid SVG")}};var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.TIFF=void 0;const oe=tt,B=R;function zt(e,t,n){const r=B.readUInt(e,32,4,n);let a=1024;const s=oe.statSync(t).size;r+a>s&&(a=s-r-10);const o=fe.alloc(a),f=oe.openSync(t,"r");return oe.readSync(f,o,0,a,r),oe.closeSync(f),o.slice(2)}function Xt(e,t){const n=B.readUInt(e,16,8,t);return(B.readUInt(e,16,10,t)<<16)+n}function Yt(e){if(e.length>24)return e.slice(12)}function $t(e,t){const n={};let r=e;for(;r&&r.length;){const a=B.readUInt(r,16,0,t),s=B.readUInt(r,16,2,t),o=B.readUInt(r,32,4,t);if(a===0)break;o===1&&(s===3||s===4)&&(n[a]=Xt(r,t)),r=Yt(r)}return n}function Zt(e){const t=e.toString("ascii",0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}const Qt=["49492a00","4d4d002a"];se.TIFF={validate(e){return Qt.includes(e.toString("hex",0,4))},calculate(e,t){if(!t)throw new TypeError("Tiff doesn't support buffer");const n=Zt(e)==="BE",r=zt(e,t,n),a=$t(r,n),s=a[256],o=a[257];if(!s||!o)throw new TypeError("Invalid Tiff. Missing tags");return{height:o,width:s}}};var le={};Object.defineProperty(le,"__esModule",{value:!0}),le.WEBP=void 0;function en(e){return{height:1+e.readUIntLE(7,3),width:1+e.readUIntLE(4,3)}}function tn(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function nn(e){return{height:e.readInt16LE(8)&16383,width:e.readInt16LE(6)&16383}}le.WEBP={validate(e){const t=e.toString("ascii",0,4)==="RIFF",n=e.toString("ascii",8,12)==="WEBP",r=e.toString("ascii",12,15)==="VP8";return t&&n&&r},calculate(e){const t=e.toString("ascii",12,16);if(e=e.slice(20,30),t==="VP8X"){const r=e[0],a=(r&192)===0,s=(r&1)===0;if(a&&s)return en(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return nn(e);const n=e.toString("hex",3,6);if(t==="VP8L"&&n!=="9d012a")return tn(e);throw new TypeError("Invalid WebP")}},Object.defineProperty(O,"__esModule",{value:!0}),O.typeHandlers=void 0;const rn=V,an=W,sn=K,on=q,ln=z,cn=F,dn=X,hn=Y,un=Z,pn=Q,gn=ee,fn=te,mn=ne,yn=re,xn=se,vn=le;O.typeHandlers={bmp:rn.BMP,cur:an.CUR,dds:sn.DDS,gif:on.GIF,icns:ln.ICNS,ico:cn.ICO,j2c:dn.J2C,jp2:hn.JP2,jpg:un.JPG,ktx:pn.KTX,png:gn.PNG,pnm:fn.PNM,psd:mn.PSD,svg:yn.SVG,tiff:xn.TIFF,webp:vn.WEBP};var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.detector=void 0;const be=O,wn=Object.keys(be.typeHandlers),Ge={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function jn(e){const t=e[0];if(t in Ge){const r=Ge[t];if(be.typeHandlers[r].validate(e))return r}const n=r=>be.typeHandlers[r].validate(e);return wn.find(n)}ce.detector=jn,function(e,t){var n=nt&&nt.__awaiter||function(h,l,u,y){function E(k){return k instanceof u?k:new u(function(_){_(k)})}return new(u||(u=Promise))(function(k,_){function ue(w){try{D(y.next(w))}catch(L){_(L)}}function pe(w){try{D(y.throw(w))}catch(L){_(L)}}function D(w){w.done?k(w.value):E(w.value).then(ue,pe)}D((y=y.apply(h,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.setConcurrency=t.imageSize=void 0;const r=tt,a=kn,s=ft,o=O,f=ce,I=512*1024,x=new s.default({concurrency:100,autostart:!0});function d(h,l){const u=f.detector(h);if(u&&u in o.typeHandlers){const y=o.typeHandlers[u].calculate(h,l);if(y!==void 0)return y.type=u,y}throw new TypeError("unsupported file type: "+u+" (file: "+l+")")}function c(h){return n(this,void 0,void 0,function*(){const l=yield r.promises.open(h,"r"),{size:u}=yield l.stat();if(u<=0)throw yield l.close(),new Error("Empty file");const y=Math.min(u,I),E=fe.alloc(y);return yield l.read(E,0,y,0),yield l.close(),E})}function v(h){const l=r.openSync(h,"r"),{size:u}=r.fstatSync(l);if(u<=0)throw r.closeSync(l),new Error("Empty file");const y=Math.min(u,I),E=fe.alloc(y);return r.readSync(l,E,0,y,0),r.closeSync(l),E}e.exports=t=m,t.default=m;function m(h,l){if(fe.isBuffer(h))return d(h);if(typeof h!="string")throw new TypeError("invalid invocation");const u=a.resolve(h);if(typeof l=="function")x.push(()=>c(u).then(y=>Tn.nextTick(l,null,d(y,u))).catch(l));else{const y=v(u);return d(y,u)}}t.imageSize=m,t.setConcurrency=h=>{x.concurrency=h},t.types=Object.keys(o.typeHandlers)}(ve,ve.exports);var Cn=ve.exports;let He,Je,de,Ve,he,We,G,Se,Ke,qe,ze,Xe,Ee,Ye,$e,_e;st=Dn(Cn),He=mr().shape({channelName:ye().required(xe("Channel Name")).max(32,it(32)),channelDesc:ye().required(xe("Channel Description")).max(250,it(250)),channelCategory:ye().required(xe("Channel Category")),channelURL:ye().required(xe("Channel URL")).test("url","Please enter a valid channel url",e=>xr.test(e))}),Je=({children:e,onSubmit:t})=>{const n=pr({initialValues:{channelName:"",channelDesc:"",channelCategory:"",channelURL:"",image:null},validationSchema:He,onSubmit:t});return i.jsx(gr,{value:n,children:e})},de=()=>{const e=fr();if(!e)throw new Error("useChainAliasFormikContext must be used within a FormikChainAliasProvider");return e},Ve=({handleNextStep:e,setActiveStepKey:t})=>{const{values:n,touched:r,setFieldTouched:a,setFieldValue:s,errors:o,validateForm:f,setTouched:I}=de(),{isWalletConnected:x,connect:d}=me(),{data:c}=hr(),v=()=>{f().then(m=>{I({channelName:!0,channelDesc:!0,channelCategory:!0,channelURL:!0}),Object.keys(m).length===0&&(x||d(),e("uploadLogo"),t("uploadLogo"))})};return i.jsx(g,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:i.jsxs(g,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:[i.jsxs(g,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",children:[i.jsx(rt,{required:!0,label:"Channel Name",value:n.channelName,onChange:m=>{const h=m.target.value;a("channelName",!0),s("channelName",h)},totalCount:32,error:r.channelName&&!!(o!=null&&o.channelName),errorMessage:r.channelName?o==null?void 0:o.channelName:""}),i.jsx(Ln,{required:!0,label:"Channel Category",options:(c==null?void 0:c.selectFieldTags)||[],value:n.channelCategory,error:r.channelCategory&&!!(o!=null&&o.channelCategory),errorMessage:r.channelCategory?o==null?void 0:o.channelCategory:"",onSelect:m=>{a("channelCategory",!0),s("channelCategory",m)}}),i.jsx(Nn,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",value:n.channelDesc,onChange:m=>{const h=m.target.value;a("channelDesc",!0),s("channelDesc",h)},totalCount:250,error:r.channelDesc&&!!(o!=null&&o.channelDesc),errorMessage:r.channelURL?o==null?void 0:o.channelDesc:""}),i.jsx(rt,{required:!0,label:"Channel Website URL",value:n.channelURL,onChange:m=>{const h=m.target.value;a("channelURL",!0),s("channelURL",h)},error:r.channelURL&&!!(o!=null&&o.channelURL),errorMessage:r.channelURL?o==null?void 0:o.channelURL:""})]}),i.jsx(g,{display:"flex",justifyContent:"center",children:i.jsx(J,{onClick:v,children:"Next"})})]})})},he=50,We=[{label:"Channel Info",value:"channelInfo"},{label:"Upload Logo",value:"uploadLogo"},{label:"Stake Fees",value:"stakeFees"}],G={progress:null,progressInfo:"",processingInfo:""},Se={txErrorStatus:0,txError:""},Ke=()=>i.jsxs(g,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxs",alignSelf:"stretch",children:[i.jsx(b,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",initial:"block"},children:"Create Your Channel"}),i.jsx(b,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",initial:"block"},children:"Creating your own notification channel to manage, send and notify users."}),i.jsx(b,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",initial:"none"},children:"Create Your Channel"}),i.jsx(b,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",initial:"none"},textAlign:"center",children:"Creating your own notification channel to manage, send and notify users."})]}),qe=({progressState:e})=>i.jsxs(g,{display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"spacing-xl",alignItems:"center",children:[i.jsx(g,{padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:i.jsx(b,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:e.progressInfo})}),i.jsx(g,{width:"400px",children:i.jsx(Bn,{percent:e.progress,color:"#D548EC",backgroundColor:"#F3AEFF",height:"4px"})}),i.jsxs(g,{display:"flex",flexDirection:"row",alignItems:"center",gap:"spacing-xxxs",children:[i.jsx(Mn,{type:On.PROCESSING,size:16,color:"#D548EC"}),i.jsx(b,{variant:"bs-semibold",color:"text-secondary",children:e.processingInfo})]})]}),ze=()=>{const{switchChain:e}=me(),t=Ue.allowedNetworks[0],n=Fn[t];return i.jsxs(i.Fragment,{children:[i.jsx(g,{display:"flex",flexDirection:"column",padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:i.jsxs(b,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:["Please select ",n," Network in your Wallet to create a channel."]})}),i.jsx(g,{display:"flex",justifyContent:"center",children:i.jsx(J,{onClick:()=>e(Ue.coreContractChain),children:"Change Network"})})]})},Xe=({channelStakeFees:e,handleNextStep:t})=>{const n=he,{provider:r,account:a}=me(),[s,o]=S.useState(0),[f,I]=S.useState(!1),[x,d]=S.useState(!1),c=async()=>{d(!0);const l=await tr({address:a,provider:r});d(!1),o(l)};S.useEffect(()=>{c()},[s,a]);const{handleSubmit:v,validateForm:m}=de(),h=()=>{m().then(l=>{(l.channelName||l.channelDesc||l.channelURL||l.channelCategory)&&t("channelInfo"),l.image&&t("uploadLogo"),Object.keys(l).length||v()})};return i.jsxs(g,{display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",gap:"spacing-xl",children:[i.jsxs(g,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:[i.jsx(er,{fees:n,title:"Amount for Staking",balance:s,setBalance:o,showFaucet:!0,showBalance:!0}),i.jsx(lr,{title:"Don\u2019t see Push token in your wallet?"})]}),i.jsx(g,{display:"flex",justifyContent:"center",children:i.jsx(J,{disabled:f||s<n,onClick:()=>{h()},children:"Create Channel"})})]})},Ee=e=>e.type.startsWith("image/"),Ye=async({provider:e,account:t})=>{let n=await new Qe(Pe.pushToken,et.pushToken,e).allowance(t,Pe.epnscore);n=n==null?void 0:n.toString();const r=Rn(n);return Number(r)},$e=({view:e,setView:t,setActiveStepKey:n,handleNextStep:r})=>{const a=S.useRef(),{values:s,setFieldValue:o}=de(),f=async d=>{var v;const c=(v=d.currentTarget.files)==null?void 0:v[0];t(!1),c&&Ee(c)&&await x(c)},I=async d=>{var v;d.preventDefault(),d.stopPropagation(),t(!1);const c=(v=d.dataTransfer.files)==null?void 0:v[0];c&&Ee(c)&&await x(c)},x=async d=>{o("image",d);const c=new FileReader;c.readAsDataURL(d),c.onloadend=()=>{o("imageSrc",c.result),o("imageType",d.type)}};return i.jsxs(g,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[i.jsxs(g,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-lg",children:[i.jsx(b,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),i.jsx(An,{id:"file-upload",onChange:f,onDrop:I,children:i.jsxs(g,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:"border-xs dashed stroke-tertiary",borderRadius:"radius-md",backgroundColor:"surface-secondary",gap:"spacing-md",children:[s!=null&&s.image?e?i.jsx(g,{width:"128px",height:"128px",borderRadius:"radius-md",children:i.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:s.image,alt:"Cropped Img"})}):i.jsx(vr,{width:"200px",height:"200px",imageSrc:s.imageSrc,imageType:s.imageType,onImageCropped:d=>{t(!0),o("image",d)},ref:a}):i.jsx(ot,{size:50}),i.jsxs(g,{display:"flex",gap:"spacing-xxxs",children:[i.jsx(b,{variant:"bs-semibold",color:"text-tertiary",children:" Drag and Drop or"}),i.jsx("label",{htmlFor:"file-upload",children:i.jsx(b,{variant:"bs-semibold",color:"text-brand-medium",css:Gn`cursor:pointer;`,children:"Browse to Choose"})})]})]})})]}),(s==null?void 0:s.image)&&(e?i.jsx(i.Fragment,{children:i.jsx(J,{disabled:!e&&!(s!=null&&s.image),onClick:()=>{r("stakeFees"),n("stakeFees")},children:"Next"})}):i.jsx(i.Fragment,{children:i.jsx(J,{onClick:()=>{a.current.showCroppedImage()},children:"Crop Image"})}))]})},_e=Xn(he.toString(),18),at=()=>{const{account:e,provider:t,isWalletConnected:n,chainId:r,connect:a}=me(),s=qn(e,r),o=Hn(),[f]=Jn(),I=f.get("paymentId"),x=Ue.coreContractChain===r,{mutate:d}=nr(),{mutate:c}=ct(),[v,m]=S.useState("channelInfo"),[h,l]=S.useState(["channelInfo"]),u=p=>{l([...new Set([...h,p])]),m(p)},[y,E]=S.useState(!1),[k,_]=S.useState(G),[ue,pe]=S.useState(Se),{data:D}=Vn(),{data:w}=Wn({channelId:s}),L=D==null?void 0:D.find(p=>(p==null?void 0:p.id)==parseInt(w!=null&&w.pricing_plan_id?w==null?void 0:w.pricing_plan_id:"1")),{data:M}=ir({paymentId:I}),P=(p,U,j)=>{_(N=>({...N,progress:p,progressInfo:U,processingInfo:j}))},ge=(p,U)=>{pe(j=>({...j,txErrorStatus:p,txError:U}))},In=(p,U)=>{d({noOfTokenToApprove:_e,signer:p},{onSuccess:j=>{j.status===1&&(P(60,"Please complete the transaction in your wallet to continue.","Approving PUSH"),Ze(p,U))},onError:j=>(console.log("Error in approving PUSH Token",j),j.code===4001||j.code==="ACTION_REJECTED"?(console.log("Signature error ",j),ge(1,"User Rejected Signature. Please try again.")):ge(2,"Transaction failed due to one of the following reasons:"),_(G),!1)})},Ze=(p,U)=>{let j=$n.GENERAL;const N="1+"+U,H=Yn(N);P(70,"Please complete the transaction in your wallet to continue.","Creating Channel..."),c({channelType:j,identityBytes:H,fees:_e,signer:p},{onSuccess:T=>{T.status===0?ge(2,"Transaction failed due to one of the following reasons:"):(P(80,"Please wait while we confirm the transaction..","Transaction Confirmed.."),setTimeout(()=>{P(90,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh")},2e3),setTimeout(()=>{P(100,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh"),o(`${Zn.ChannelDashboard(e)}`)},3e3))},onError:T=>{console.log("Error in transaction from query >>>>",T),T.code===4001||T.code==="ACTION_REJECTED"?(console.log("Signature error ",T),ge(1,"User Rejected Signature. Please try again."),_(G)):(console.error("Error in creating channel--> %o",T),console.error({error:T}),P(0,"There was an error in creating the Channel","Kindly Contact support@epns.io to resolve the issue."))}})},bn=async p=>{if(_(G),pe(Se),!n){a();return}P(10,"Checking for PUSH Token Approval","Loading...");const U=await Ye({provider:t,account:e}),j=JSON.stringify({name:p.channelName,info:p.channelDesc,url:p.channelURL,icon:p.image,tags:[p.channelCategory]});P(20,"Please wait, payload is getting uploaded to IPFS","Loading...");let N=await zn(j);console.debug("IPFS storagePointer:",N),P(40,"Please complete the transaction in your wallet to continue.","Uploading Payload...");var H=t.getSigner(e);console.debug(H),U<50?In(H,N):Ze(H,N)};return console.log(I),i.jsxs(Je,{onSubmit:p=>bn(p),children:[(M==null?void 0:M.payment_status)=="SUCCESS"&&i.jsx(cr,{variant:"success",purchasedPlan:{planName:L==null?void 0:L.name},onAction:()=>{window.open(`https://sepolia.etherscan.io/tx/${M==null?void 0:M.transaction_hash}`,"_blank")}}),i.jsxs(g,{padding:{initial:"spacing-lg",ml:"spacing-sm"},display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"center",width:{initial:"648px",ml:"357px"},borderRadius:"radius-md",alignItems:"center",backgroundColor:"surface-primary",margin:{initial:"spacing-lg",ml:"spacing-sm"},children:[i.jsx(Ke,{}),!x&&i.jsx(ze,{}),x&&i.jsxs(i.Fragment,{children:[ue.txErrorStatus!==0&&i.jsx(g,{width:"100%",children:i.jsx(Kn,{variant:"error",heading:ue.txError,showIcon:!0})}),k.progress?i.jsx(qe,{progressState:k}):i.jsxs(g,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[i.jsx(g,{width:"100%",children:i.jsx(sr,{steps:We,completedSteps:h,setActiveStepKey:p=>m(p)})}),v=="channelInfo"&&i.jsx(Ve,{handleNextStep:u,setActiveStepKey:m}),v==="uploadLogo"&&i.jsx($e,{view:y,setView:E,setActiveStepKey:m,handleNextStep:u}),v==="stakeFees"&&i.jsx(Xe,{channelStakeFees:he,handleNextStep:u})]})]})]})]})}});export{at as C,jr as __tla,st as v};
