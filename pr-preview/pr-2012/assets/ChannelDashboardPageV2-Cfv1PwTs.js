import { ea as e, er as V, fD as z, fE as A, fC as O, fe as Me, iz as Te, f_ as U, iA as Re, iB as Fe, iC as Ue, iD as Ne, iE as _e, iF as Be, eb as s, ep as C, eo as He, e5 as w, e7 as u, eP as N, gr as H, ev as j, iG as he, eQ as ne, fO as ge, gf as E, e6 as W, hS as pe, hT as ue, es as v, eq as Z, g4 as Ze, iH as qe, ey as Ve, iI as xe, e9 as R, gl as me, ex as Ce, gA as B, g0 as $, h9 as ze, hb as Oe, hc as ee, en as q, g1 as le, gG as ce, h6 as F, hd as We, gB as Ke, ec as Ge, ed as Je, g7 as $e, hJ as Qe, gs as Ye, gt as Xe, fj as en, gC as nn, g$ as an, g8 as sn, iJ as tn, fi as rn, gX as on, e8 as fe, eJ as ln, __tla as __tla_0 } from "./index-C2jH2XEK.js";
import { C as cn, __tla as __tla_1 } from "./ContentLayout-CMvbJl9T.js";
import { u as ae, c as se, a as P, F as dn, b as hn, __tla as __tla_2 } from "./index.esm-BAVu81oq.js";
import { a as I, U as gn, b as de } from "./Common.form-NbJ1DVkQ.js";
import { u as je, S as te, g as ye, a as be, __tla as __tla_3 } from "./StakingVariant-DhW8W7sL.js";
import { C as ve, __tla as __tla_4 } from "./Copy-CB60wX7c.js";
import { I as pn, P as G, __tla as __tla_5 } from "./ImportPushTokenMessage-DhEjzXbZ.js";
import { C as we, __tla as __tla_6 } from "./ChannelDashboardNullState-3Zsl6sOP.js";
import { A as un, __tla as __tla_7 } from "./Add-DZK1B-7Z.js";
import { u as Se, __tla as __tla_8 } from "./useGetChannelCategories-CjTKHO4P.js";
import { u as xn, __tla as __tla_9 } from "./useGetPaymentDetails-BGjqsVRD.js";
import { I as mn, __tla as __tla_10 } from "./ImageClipper-jVAMwSyJ.js";
import { c as Cn } from "./index-KR9cftpy.js";
let Sa;
let __tla = Promise.all([
  (() => {
    try {
      return __tla_0;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_1;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_2;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_3;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_4;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_5;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_6;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_7;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_8;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_9;
    } catch {
    }
  })(),
  (() => {
    try {
      return __tla_10;
    } catch {
    }
  })()
]).then(async () => {
  let fn, jn, yn, bn, vn, wn, Sn, kn, Ln, Dn, Pn, In, An, En, Mn, ke, Tn, Rn, Fn, Un, Nn, _n, Q, Bn, Hn, Zn, qn, Vn, zn, ie, J, On, Wn, Kn, Gn, Jn, $n, Qn, Yn, Xn, ea, na, aa, sa, ta, re, ia, ra, oa, la, ca, da;
  fn = (n) => {
    const { svgProps: a, ...t } = n;
    return e.jsx(V, {
      componentName: "BellSimple",
      icon: e.jsxs("svg", {
        width: "inherit",
        height: "inherit",
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...a,
        children: [
          e.jsx("path", {
            d: "M9 20.9999H15",
            stroke: "currentColor",
            "stroke-width": "2",
            "stroke-linecap": "round",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M14.1313 3.34529L13.142 3.49112C13.197 3.86442 13.4575 4.17496 13.8155 4.29412L14.1313 3.34529ZM16.7729 4.97697L17.48 4.26986V4.26986L16.7729 4.97697ZM20.1468 16.8749L21.0128 16.3749L21.0122 16.3739L20.1468 16.8749ZM20.2472 17.2493L19.2472 17.2502V17.2502L20.2472 17.2493ZM19.874 17.8985L19.3717 17.0338L19.3717 17.0338L19.874 17.8985ZM19.4999 17.9999V18.9999L19.5034 18.9999L19.4999 17.9999ZM4.49988 17.9999L4.49387 18.9999H4.49988V17.9999ZM4.12646 17.8978L4.63038 17.034L4.63037 17.034L4.12646 17.8978ZM3.85375 17.623L2.98622 18.1204H2.98622L3.85375 17.623ZM3.85488 16.8749L2.98913 16.3745L2.98887 16.3749L3.85488 16.8749ZM7.22691 4.97697L6.51981 4.26986L7.22691 4.97697ZM9.86833 3.34533L10.1841 4.29415C10.5422 4.17499 10.8026 3.86444 10.8576 3.49114L9.86833 3.34533ZM13.8155 4.29412C14.6557 4.57375 15.4279 5.04625 16.0657 5.68407L17.48 4.26986C16.6203 3.41016 15.5793 2.77329 14.4471 2.39646L13.8155 4.29412ZM16.0657 5.68407C17.1441 6.76241 17.7499 8.22494 17.7499 9.74994H19.7499C19.7499 7.69451 18.9334 5.72327 17.48 4.26986L16.0657 5.68407ZM17.7499 9.74994C17.7499 13.2175 18.5462 16.1062 19.2813 17.376L21.0122 16.3739C20.5098 15.5062 19.7499 12.9986 19.7499 9.74994H17.7499ZM19.2807 17.3749C19.2588 17.337 19.2473 17.294 19.2472 17.2502L21.2472 17.2484C21.247 16.9417 21.1661 16.6405 21.0128 16.3749L19.2807 17.3749ZM19.2472 17.2502C19.2472 17.2064 19.2587 17.1633 19.2805 17.1253L21.0143 18.1223C21.1672 17.8564 21.2475 17.5551 21.2472 17.2484L19.2472 17.2502ZM19.2805 17.1253C19.3024 17.0874 19.3338 17.0558 19.3717 17.0338L20.3762 18.7632C20.6414 18.6091 20.8615 18.3881 21.0143 18.1223L19.2805 17.1253ZM19.3717 17.0338C19.4096 17.0118 19.4526 17.0001 19.4964 16.9999L19.5034 18.9999C19.8101 18.9989 20.1111 18.9172 20.3762 18.7632L19.3717 17.0338ZM19.4999 16.9999H4.49988V18.9999H19.4999V16.9999ZM4.5059 17C4.54965 17.0002 4.59257 17.012 4.63038 17.034L3.62255 18.7615C3.88713 18.9159 4.18758 18.9981 4.49387 18.9999L4.5059 17ZM4.63037 17.034C4.66817 17.0561 4.69951 17.0876 4.72128 17.1256L2.98622 18.1204C3.13856 18.3861 3.35799 18.6072 3.62256 18.7615L4.63037 17.034ZM4.72128 17.1256C4.74304 17.1636 4.75446 17.2066 4.75439 17.2503L2.7544 17.2473C2.75393 17.5536 2.83387 17.8547 2.98622 18.1204L4.72128 17.1256ZM4.75439 17.2503C4.75433 17.2941 4.74278 17.3371 4.7209 17.375L2.98887 16.3749C2.83571 16.6402 2.75486 16.941 2.7544 17.2473L4.75439 17.2503ZM4.72064 17.3754C5.45456 16.1058 6.24988 13.2164 6.24988 9.74994H4.24988C4.24988 12.9979 3.49084 15.5066 2.98913 16.3745L4.72064 17.3754ZM6.24988 9.74994C6.24988 8.22494 6.85568 6.76241 7.93402 5.68407L6.51981 4.26986C5.0664 5.72327 4.24988 7.69451 4.24988 9.74994H6.24988ZM7.93402 5.68407C8.57182 5.04627 9.344 4.57378 10.1841 4.29415L9.55252 2.3965C8.42035 2.77334 7.37948 3.41019 6.51981 4.26986L7.93402 5.68407ZM10.8576 3.49114C10.9453 2.89646 11.4397 2.47119 11.9998 2.47119V0.471191C10.3991 0.471191 9.10409 1.67243 8.87902 3.19951L10.8576 3.49114ZM11.9998 2.47119C12.5599 2.47119 13.0544 2.89645 13.142 3.49112L15.1206 3.19946C14.8955 1.67241 13.6005 0.471191 11.9998 0.471191V2.47119Z",
            fill: "currentColor"
          })
        ]
      }),
      ...t
    });
  };
  jn = (n) => {
    const { svgProps: a, ...t } = n;
    return e.jsx(V, {
      componentName: "BellSimpleSlash",
      icon: e.jsxs("svg", {
        width: "inherit",
        height: "inherit",
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...a,
        children: [
          e.jsx("path", {
            d: "M5.52783 4.4353L19.3386 19.6",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linecap": "round",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M7.42357 6.49341C7.04446 6.90863 6.28622 8.18319 6.28622 9.95964C6.28622 12.1802 5.85294 15.8631 4.39062 17.4337H17.2265",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linecap": "round",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M9.59013 20.25H15.3852M9.31934 4.70613C10.6192 3.80347 13.9554 2.73472 16.9017 5.68101C17.2912 6.07049 18.4295 7.23159 18.5807 10.9345C18.6168 11.8191 18.8731 14.0541 19.6097 15.9172",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linecap": "round",
            "stroke-linejoin": "round"
          })
        ]
      }),
      ...t
    });
  };
  yn = (n) => {
    const { svgProps: a, ...t } = n;
    return e.jsx(V, {
      componentName: "Cube",
      icon: e.jsxs("svg", {
        width: "inherit",
        height: "inherit",
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...a,
        children: [
          e.jsx("path", {
            d: "M11.8471 12.1528L4.6665 7.95139L11.8471 3.75L19.3332 7.95139L11.8471 12.1528Z",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M4.6665 8.02783V16.457L11.8471 20.2501L19.3332 16.457V8.02783",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M11.8472 20.2501V12.1528",
            stroke: "currentColor",
            "stroke-width": "1.5",
            "stroke-linejoin": "round"
          })
        ]
      }),
      ...t
    });
  };
  bn = (n) => {
    const { svgProps: a, ...t } = n;
    return e.jsx(V, {
      componentName: "KebabMenuHorizontal",
      icon: e.jsxs("svg", {
        width: "inherit",
        height: "inherit",
        viewBox: "0 0 32 32",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...a,
        children: [
          e.jsxs("g", {
            "clip-path": "url(#clip0_372_37305)",
            children: [
              e.jsx("path", {
                d: "M23 16C23 17.3807 24.1193 18.5 25.5 18.5C26.8807 18.5 28 17.3807 28 16C28 14.6193 26.8807 13.5 25.5 13.5C24.1193 13.5 23 14.6193 23 16Z",
                fill: "currentColor"
              }),
              e.jsx("path", {
                d: "M13.5 16C13.5 17.3807 14.6193 18.5 16 18.5C17.3807 18.5 18.5 17.3807 18.5 16C18.5 14.6193 17.3807 13.5 16 13.5C14.6193 13.5 13.5 14.6193 13.5 16Z",
                fill: "currentColor"
              }),
              e.jsx("path", {
                d: "M3.99999 16C3.99999 17.3807 5.11928 18.5 6.5 18.5C7.88071 18.5 9 17.3807 9 16C9 14.6193 7.88071 13.5 6.5 13.5C5.11928 13.5 3.99999 14.6193 3.99999 16Z",
                fill: "currentColor"
              })
            ]
          }),
          e.jsx("defs", {
            children: e.jsx("clipPath", {
              id: "clip0_372_37305",
              children: e.jsx("rect", {
                width: "32",
                height: "32",
                fill: "white",
                transform: "translate(32) rotate(90)"
              })
            })
          })
        ]
      }),
      ...t
    });
  };
  vn = (n) => {
    const { svgProps: a, ...t } = n;
    return e.jsx(V, {
      componentName: "Settings",
      icon: e.jsxs("svg", {
        width: "inherit",
        height: "inherit",
        viewBox: "0 0 32 32",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...a,
        children: [
          e.jsx("path", {
            d: "M26.6931 16.5931C26.7164 16.198 26.7164 15.802 26.6931 15.407H26.689C26.671 15.1342 26.7559 14.8646 26.9268 14.6513L28.8659 12.2271C28.6436 11.5199 28.3587 10.8339 28.0146 10.1773L24.929 9.83433C24.66 9.80448 24.4117 9.67594 24.2321 9.47357C23.969 9.17774 23.6889 8.89758 23.393 8.63454C23.1907 8.45489 23.0621 8.20657 23.0323 7.93762L22.6824 4.85341C22.0258 4.50947 21.3398 4.22457 20.6327 4.00207L18.2044 5.94115C17.9929 6.11047 17.726 6.1952 17.4555 6.17892C17.0605 6.15569 16.6645 6.15569 16.2694 6.17892C15.999 6.1952 15.7321 6.11047 15.5206 5.94115L13.0964 4.00207C12.3892 4.2244 11.7032 4.50931 11.0466 4.85341L10.7036 7.93762C10.6737 8.20725 10.5447 8.45614 10.3415 8.6359C10.0457 8.89894 9.7655 9.1791 9.50246 9.47494C9.32281 9.6773 9.07449 9.80584 8.80554 9.8357L5.72133 10.1855C5.3774 10.8422 5.0925 11.5282 4.87 12.2353L6.80907 14.6636C6.97839 14.8751 7.06313 15.142 7.04685 15.4124C7.02362 15.8075 7.02362 16.2035 7.04685 16.5986C7.06313 16.869 6.97839 17.1359 6.80907 17.3474L4.87 19.7716C5.09233 20.4788 5.37723 21.1647 5.72133 21.8214L8.80691 22.1657C9.07586 22.1956 9.32418 22.3241 9.50383 22.5265C9.76687 22.8223 10.047 23.1025 10.3429 23.3655C10.5452 23.5452 10.6738 23.7935 10.7036 24.0624L11.0534 27.1466C11.7101 27.4906 12.3961 27.7755 13.1032 27.998L15.5329 26.0575C15.7444 25.8882 16.0113 25.8035 16.2817 25.8198C16.6767 25.843 17.0728 25.843 17.4678 25.8198H17.5334C17.7817 25.8196 18.0227 25.9039 18.2167 26.0589L20.6409 27.998C21.3481 27.7756 22.034 27.4907 22.6906 27.1466L23.0336 24.0611C23.0635 23.7921 23.192 23.5438 23.3944 23.3641C23.6902 23.1011 23.9704 22.8209 24.2334 22.5251C24.4131 22.3227 24.6614 22.1942 24.9303 22.1643L28.0187 21.8145C28.3626 21.1578 28.6475 20.4719 28.87 19.7648L26.9309 17.3419C26.7616 17.1304 26.6769 16.8635 26.6931 16.5931Z",
            stroke: "currentColor",
            "stroke-width": "2",
            "stroke-linejoin": "round"
          }),
          e.jsx("path", {
            d: "M14.4385 19.6359C15.1576 20.1164 16.0031 20.3729 16.8679 20.3729C18.0277 20.3729 19.1399 19.9121 19.96 19.0921C20.7801 18.272 21.2408 17.1598 21.2408 16C21.2408 15.1352 20.9843 14.2897 20.5038 13.5706C20.0233 12.8515 19.3404 12.291 18.5414 11.9601C17.7423 11.6291 16.8631 11.5425 16.0149 11.7112C15.1666 11.8799 14.3874 12.2964 13.7759 12.908C13.1643 13.5195 12.7479 14.2987 12.5791 15.1469C12.4104 15.9952 12.497 16.8744 12.828 17.6734C13.159 18.4725 13.7194 19.1554 14.4385 19.6359Z",
            stroke: "currentColor",
            "stroke-width": "2",
            "stroke-linejoin": "round"
          })
        ]
      }),
      ...t
    });
  };
  wn = async ({ signer: n }) => (await new z(A.epnscore, O.epnscore, n).deactivateChannel()).wait();
  Sn = async (n) => {
    const { signer: a, account: t, identityBytes: i, fees: r } = n;
    return (await new z(A.epnscore, O.epnscore, a).updateChannelMeta(t, i, r, {
      gasLimit: 1e6
    })).wait();
  };
  kn = (n) => n;
  Ln = (n) => n;
  Dn = (n) => n;
  Pn = ({ userPushSDKInstance: n, channelAddressinCAIP: a }) => n.channel.delegate.get({
    channel: a
  }).then(kn);
  In = ({ userPushSDKInstance: n, delegateAddress: a }) => n.channel.delegate.add(a).then(Ln);
  An = async ({ identityBytes: n, signer: a }) => (await new z(A.epnscore, O.epnscore, a).addSubGraph(n)).wait();
  En = ({ userPushSDKInstance: n, delegateAddress: a }) => n.channel.delegate.remove(a).then(Dn);
  Mn = async ({ fees: n, signer: a }) => (await new z(A.epnscore, O.epnscore, a).reactivateChannel(n)).wait();
  ke = (n, a) => Me({
    queryKey: [
      Te,
      a
    ],
    queryFn: () => Pn({
      userPushSDKInstance: n,
      channelAddressinCAIP: a
    })
  });
  Tn = () => U({
    mutationKey: [
      Re
    ],
    mutationFn: En
  });
  Rn = () => U({
    mutationKey: [
      Fe
    ],
    mutationFn: wn
  });
  Fn = () => U({
    mutationKey: [
      Ue
    ],
    mutationFn: In
  });
  Un = () => U({
    mutationKey: [
      Ne
    ],
    mutationFn: An
  });
  Nn = () => U({
    mutationKey: [
      _e
    ],
    mutationFn: Mn
  });
  _n = () => U({
    mutationKey: [
      Be
    ],
    mutationFn: Sn
  });
  Q = ({ title: n, description: a }) => e.jsxs(s, {
    display: "flex",
    flexDirection: "column",
    alignItems: "center",
    gap: "spacing-xxxs",
    alignSelf: "stretch",
    children: [
      e.jsx(C, {
        variant: "h3-semibold",
        color: "text-primary",
        display: {
          ml: "none",
          initial: "block"
        },
        children: n
      }),
      e.jsx(C, {
        variant: "bs-regular",
        color: "text-tertiary",
        display: {
          ml: "none",
          initial: "block"
        },
        textAlign: "center",
        children: a
      }),
      e.jsx(C, {
        variant: "h4-semibold",
        color: "text-primary",
        display: {
          ml: "block",
          initial: "none"
        },
        children: n
      }),
      e.jsx(C, {
        variant: "bes-regular",
        color: "text-tertiary",
        display: {
          ml: "block",
          initial: "none"
        },
        textAlign: "center",
        children: a
      })
    ]
  });
  Bn = (n) => se().shape({
    delegateAddress: P().required(I("Delegate Address")).test("address", "Invalid Wallet Address", (a) => He(a)).test("uniqueDelegate", "Delegate address already exists", (a) => !(n == null ? void 0 : n.find((i) => i === a)))
  });
  Hn = ({ handleAddDelegate: n, channel_delegates: a }) => ae({
    initialValues: {
      delegateAddress: ""
    },
    validationSchema: Bn(a),
    onSubmit: () => {
      n();
    }
  });
  Zn = se().shape({
    subgraphId: P().required(I("Subgraph Id")),
    pollTime: P().required(I("Poll Time")).matches(/^\d+$/, "Must be a valid timestamp in seconds").test("is-valid-timestamp", "Invalid timestamp format", (n) => {
      const a = parseInt(n, 10);
      return !isNaN(a) && a > 0;
    })
  });
  qn = ({ handleAddSubgraph: n }) => ae({
    initialValues: {
      subgraphId: "",
      pollTime: ""
    },
    validationSchema: Zn,
    onSubmit: () => {
      n();
    }
  });
  Vn = ({ setActiveState: n }) => {
    const { account: a, provider: t } = w(), [i, r] = u.useState(null), { mutate: c, isPending: l } = Un(), o = qn({
      handleAddSubgraph: () => {
        r(null);
        const p = o.values.pollTime + "+" + o.values.subgraphId, d = he(p);
        var h = t.getSigner(a);
        console.debug(h), c({
          signer: h,
          identityBytes: d
        }, {
          onSuccess: () => {
            console.log("Subgraph Added successfully"), n("dashboard");
          },
          onError: (m) => {
            console.log("Error in adding subgraoh", m), r("Error in adding subgraph. Please Check console for more reason");
          }
        });
      }
    });
    return e.jsxs(s, {
      display: "flex",
      alignSelf: "stretch",
      flexDirection: "column",
      backgroundColor: "surface-primary",
      borderRadius: "radius-lg",
      padding: "spacing-lg",
      gap: "spacing-xl",
      width: {
        initial: "537px",
        ml: "275px"
      },
      children: [
        e.jsx(Q, {
          title: "Add Subgraph",
          description: "Enter Subgraph ID and Poll time (atleast 60 sec)"
        }),
        i && e.jsx(s, {
          width: "100%",
          children: e.jsx(N, {
            variant: "error",
            heading: i,
            showIcon: true
          })
        }),
        e.jsx("form", {
          onSubmit: o.handleSubmit,
          children: e.jsxs(s, {
            display: "flex",
            flexDirection: "column",
            gap: "spacing-md",
            children: [
              e.jsx(H, {
                required: true,
                label: "Subgraph ID",
                value: o.values.subgraphId,
                onChange: o.handleChange("subgraphId"),
                error: o.touched.subgraphId && !!o.errors.subgraphId,
                errorMessage: o.touched.subgraphId ? o.errors.subgraphId : ""
              }),
              e.jsx(H, {
                required: true,
                label: "Poll Time (in Seconds)",
                value: o.values.pollTime,
                onChange: o.handleChange("pollTime"),
                error: o.touched.pollTime && !!o.errors.pollTime,
                errorMessage: o.touched.pollTime ? o.errors.pollTime : ""
              })
            ]
          })
        }),
        e.jsxs(s, {
          display: "flex",
          gap: "spacing-sm",
          justifyContent: "center",
          children: [
            e.jsx(j, {
              size: "medium",
              variant: "outline",
              onClick: () => n("dashboard"),
              children: "Back"
            }),
            e.jsx(j, {
              disabled: l,
              onClick: () => o.handleSubmit(),
              children: l ? "Adding" : "Add Subgraph"
            })
          ]
        })
      ]
    });
  };
  zn = ({ setActiveState: n }) => {
    const { userPushSDKInstance: a } = ne((x) => x.user), { wallet: t, chainId: i, account: r } = w(), { handleConnectWalletAndEnableProfile: c } = u.useContext(ge), [l, g] = u.useState(null), o = u.useMemo(() => E(r, i), [
      i,
      r
    ]), { data: p, refetch: d } = ke(a, o), { mutate: h, isPending: m } = Fn(), f = Hn({
      handleAddDelegate: async () => {
        let x = a;
        (a == null ? void 0 : a.readmode()) && (x = await c({
          wallet: t
        }), !x || (x == null ? void 0 : x.readmode())) || h({
          userPushSDKInstance: x,
          delegateAddress: E(f.values.delegateAddress, i)
        }, {
          onSuccess: () => {
            console.log("Channel Delegate Added Successfully"), d(), n("dashboard");
          },
          onError: (b) => {
            console.log("Error in adding delegatee", b), g("Error in delegating. Check console for more reasons");
          }
        });
      },
      channel_delegates: p
    });
    return e.jsxs(s, {
      display: "flex",
      alignSelf: "stretch",
      flexDirection: "column",
      backgroundColor: "surface-primary",
      borderRadius: "radius-lg",
      padding: "spacing-lg",
      gap: "spacing-xl",
      width: {
        initial: "537px",
        ml: "275px"
      },
      children: [
        e.jsx(Q, {
          title: "Add Delegate",
          description: "Add an account who can send notifications on behalf of the channel"
        }),
        l && e.jsx(s, {
          width: "100%",
          children: e.jsx(N, {
            variant: "error",
            heading: l,
            showIcon: true
          })
        }),
        e.jsx("form", {
          onSubmit: f.handleSubmit,
          children: e.jsxs(s, {
            display: "flex",
            flexDirection: "column",
            gap: "spacing-md",
            children: [
              e.jsx(H, {
                required: true,
                label: "Delegate Address",
                onChange: f.handleChange("delegateAddress"),
                value: f.values.delegateAddress,
                error: !!f.errors.delegateAddress,
                errorMessage: f.errors.delegateAddress
              }),
              e.jsxs(s, {
                display: "flex",
                gap: "spacing-sm",
                justifyContent: "center",
                children: [
                  e.jsx(j, {
                    size: "medium",
                    variant: "outline",
                    onClick: () => n("dashboard"),
                    children: "Back"
                  }),
                  e.jsx(j, {
                    disabled: m,
                    loading: m,
                    children: m ? "Adding" : "Add"
                  })
                ]
              })
            ]
          })
        })
      ]
    });
  };
  ie = ({ channelDetails: n, showAddNewChain: a = false, onActiveNetwork: t = true, isAliasVerified: i }) => {
    var _a;
    const r = W(), { account: c, chainId: l } = w(), g = E(c, l), { data: o, isLoading: p } = pe({
      channelId: g
    }), { selectedPlan: d } = ue(o);
    let h = ((_a = n == null ? void 0 : n.aliases) == null ? void 0 : _a.filter((x) => x.is_alias_verified).map((x) => parseInt(x.alias_blockchain_id))) || [];
    const [m, y] = u.useState("Copy Wallet"), f = () => {
      n && (navigator.clipboard.writeText(n.channel), y("Copied")), setTimeout(() => {
        y("Copy Wallet");
      }, 1e3);
    };
    return e.jsxs(s, {
      display: "flex",
      gap: "spacing-sm",
      alignItems: "center",
      children: [
        e.jsx(v, {
          isLoading: !(n == null ? void 0 : n.name) || i,
          children: e.jsx(s, {
            width: "90px",
            height: "90px",
            border: "border-sm solid stroke-tertiary",
            borderRadius: "radius-md",
            css: Z`
            img {
              border-radius: 16px;
            }
          `,
            children: e.jsx("img", {
              width: "100%",
              height: "100%",
              src: n == null ? void 0 : n.iconV2
            })
          })
        }),
        e.jsxs(s, {
          display: "flex",
          flexDirection: "column",
          gap: "spacing-xxxs",
          children: [
            e.jsx(v, {
              isLoading: !(n == null ? void 0 : n.name) || i,
              width: "200px",
              height: "30px",
              children: e.jsxs(s, {
                display: "flex",
                alignItems: {
                  initial: "center",
                  ml: "baseline"
                },
                flexDirection: {
                  ml: "column",
                  initial: "row"
                },
                children: [
                  e.jsx(C, {
                    variant: "h4-semibold",
                    color: "text-primary",
                    children: n == null ? void 0 : n.name
                  }),
                  e.jsxs(s, {
                    display: "flex",
                    alignItems: "center",
                    children: [
                      e.jsxs(s, {
                        display: "flex",
                        alignItems: "center",
                        margin: {
                          initial: "spacing-none spacing-none spacing-none spacing-xxxs",
                          ml: "spacing-none"
                        },
                        children: [
                          !!(n == null ? void 0 : n.verified_status) && e.jsx(Ze, {
                            size: 22,
                            color: "icon-tertiary"
                          }),
                          e.jsx(qe, {
                            width: 18,
                            height: 18
                          }),
                          h.length > 0 && h.map((x) => {
                            const b = Ve[x];
                            return b ? e.jsx(s, {
                              display: "flex",
                              css: Z`
                          margin-left: -4px;
                        `,
                              children: e.jsx(b, {
                                width: 18,
                                height: 18
                              }, x)
                            }) : null;
                          })
                        ]
                      }),
                      a && e.jsx(s, {
                        display: "flex",
                        cursor: "pointer",
                        onClick: () => r(R.AddNewChain),
                        children: e.jsx(xe, {
                          size: 24,
                          color: "icon-primary"
                        })
                      })
                    ]
                  })
                ]
              })
            }),
            e.jsxs(s, {
              display: "flex",
              flexDirection: "column",
              gap: "spacing-xs",
              children: [
                e.jsx(v, {
                  isLoading: !(n == null ? void 0 : n.name) || i,
                  width: "100%",
                  children: e.jsxs(s, {
                    display: "flex",
                    gap: "spacing-xxxs",
                    children: [
                      e.jsx(C, {
                        color: "text-tertiary",
                        variant: "c-regular",
                        children: me(n ? n == null ? void 0 : n.channel : "", 5)
                      }),
                      e.jsx(Ce, {
                        title: m,
                        children: e.jsx(s, {
                          cursor: "pointer",
                          children: e.jsx(ve, {
                            onClick: f,
                            size: 14,
                            color: "icon-tertiary"
                          })
                        })
                      })
                    ]
                  })
                }),
                e.jsxs(s, {
                  display: "flex",
                  gap: "spacing-xs",
                  children: [
                    e.jsx(v, {
                      isLoading: !(n == null ? void 0 : n.name) || i,
                      children: e.jsxs(C, {
                        color: "text-tertiary",
                        variant: "c-regular",
                        children: [
                          n == null ? void 0 : n.subscriber_count,
                          " subscribers"
                        ]
                      })
                    }),
                    e.jsx(v, {
                      isLoading: !(n == null ? void 0 : n.name) || i,
                      children: t ? e.jsxs(e.Fragment, {
                        children: [
                          (n == null ? void 0 : n.activation_status) === 0 && e.jsx(B, {
                            label: "Deactivated",
                            variant: "danger"
                          }),
                          (n == null ? void 0 : n.activation_status) === 1 && e.jsx(B, {
                            label: "Active",
                            variant: "success"
                          })
                        ]
                      }) : e.jsx(B, {
                        label: "Setup Pending",
                        variant: "warning"
                      })
                    }),
                    e.jsx(v, {
                      isLoading: !(n == null ? void 0 : n.name) || i,
                      children: (n == null ? void 0 : n.tags.length) ? e.jsx(B, {
                        label: n.tags[0],
                        variant: "info"
                      }) : null
                    }),
                    e.jsx(v, {
                      isLoading: p,
                      children: d && (d == null ? void 0 : d.id) !== 1 ? e.jsx(B, {
                        label: `${d == null ? void 0 : d.name} Plan`
                      }) : null
                    })
                  ]
                })
              ]
            })
          ]
        })
      ]
    });
  };
  J = 50;
  On = ({ setActiveState: n, channelDetails: a, refetchChannelDetails: t }) => {
    const { provider: i, account: r } = w(), [c, l] = u.useState(""), [g, o] = u.useState(0), [p, d] = u.useState(0), h = async () => {
      const S = await be({
        address: r,
        provider: i
      });
      d(S);
    }, m = async () => {
      const S = await ye({
        address: r,
        provider: i,
        contractAddress: A.epnscore
      });
      o(parseInt(S));
    };
    u.useEffect(() => {
      !r || !i || (m(), h());
    }, [
      r,
      i
    ]);
    const { mutate: y, isPending: f } = je(), x = () => {
      l("");
      var S = i.getSigner(r);
      console.debug(S);
      const M = $((J - g).toString(), 18);
      y({
        noOfTokenToApprove: M,
        signer: S
      }, {
        onSuccess: () => {
          m();
        },
        onError: (L) => {
          console.log("Error in Approving PUSH", L), L.code == "ACTION_REJECTED" ? l("User rejected signature. Please try again.") : l("Error in approving PUSH Tokens");
        }
      });
    }, { mutate: b, isPending: D } = Nn(), K = () => {
      l("");
      const S = $(J.toString(), 18);
      var M = i.getSigner(r);
      console.debug(M), b({
        fees: S,
        signer: M
      }, {
        onSuccess: () => {
          console.log("Channel Reactivated"), t(), n("dashboard");
        },
        onError: (L) => {
          console.log("Error in Reactivating channel", L), L.code == "ACTION_REJECTED" ? l("User rejected signature. Please try again.") : l("Error in reactivating channel. Check console for more reasons.");
        }
      });
    };
    return e.jsxs(s, {
      display: "flex",
      width: {
        initial: "648px",
        ml: "357px"
      },
      padding: "spacing-md",
      flexDirection: "column",
      alignItems: "center",
      gap: "spacing-lg",
      backgroundColor: "surface-primary",
      borderRadius: "radius-lg",
      margin: "spacing-none spacing-none spacing-sm spacing-none",
      children: [
        e.jsx(Q, {
          title: "Reactivate Channel",
          description: "Performing this action will make your channel visible to users."
        }),
        c && e.jsx(s, {
          width: "100%",
          children: e.jsx(N, {
            variant: "error",
            heading: c,
            showIcon: true
          })
        }),
        e.jsx(ie, {
          channelDetails: a
        }),
        e.jsxs(s, {
          display: "flex",
          flexDirection: "column",
          gap: "spacing-sm",
          width: "-webkit-fill-available",
          children: [
            e.jsx(te, {
              title: "Channel Reactivation Fee",
              fees: J,
              pushApprovalAmount: g,
              showFaucet: true,
              showBalance: true,
              balance: p,
              setBalance: d
            }),
            e.jsx(pn, {
              title: "Don\u2019t see Push token in your wallet?"
            })
          ]
        }),
        e.jsxs(s, {
          display: "flex",
          gap: "spacing-sm",
          justifyContent: "center",
          children: [
            e.jsx(j, {
              size: "medium",
              variant: "outline",
              onClick: () => n("dashboard"),
              children: "Back"
            }),
            g >= J ? e.jsx(j, {
              disabled: D,
              onClick: K,
              loading: D,
              children: D ? "Activating" : "Activate"
            }) : e.jsx(j, {
              disabled: f,
              onClick: x,
              loading: f,
              children: f ? "Approving" : "Approve PUSH"
            })
          ]
        })
      ]
    });
  };
  Wn = 40;
  Kn = ({ setActiveState: n, channelDetails: a, refetchChannelDetails: t }) => {
    const { provider: i, account: r } = w(), [c, l] = u.useState(""), { mutate: g, isPending: o } = Rn(), p = () => {
      l("");
      var d = i.getSigner(r);
      console.debug(d), g({
        signer: d
      }, {
        onSuccess: () => {
          console.log("Channel Deactivated Successfully"), t(), n("dashboard");
        },
        onError: (h) => {
          console.log("Error in Deactivating Channel", h), h.code == "ACTION_REJECTED" ? l("User rejected signature. Please try again.") : l("Error in deactivating Channel. Check console for more reason.");
        }
      });
    };
    return e.jsxs(s, {
      display: "flex",
      width: {
        initial: "648px",
        ml: "357px"
      },
      padding: "spacing-md",
      flexDirection: "column",
      alignItems: "center",
      gap: "spacing-lg",
      backgroundColor: "surface-primary",
      borderRadius: "radius-lg",
      margin: "spacing-none spacing-none spacing-sm spacing-none",
      children: [
        e.jsx(Q, {
          title: "Deactivate Channel",
          description: "Deactivating your channel will disable sending notifications from it."
        }),
        c && e.jsx(s, {
          width: "100%",
          children: e.jsx(N, {
            variant: "error",
            heading: c,
            showIcon: true
          })
        }),
        e.jsx(ie, {
          channelDetails: a
        }),
        e.jsx(te, {
          fees: Wn,
          title: "You will receive as a refund"
        }),
        e.jsx(C, {
          variant: "bs-semibold",
          color: "text-primary",
          children: "Are you sure you want to deactivate your channel?"
        }),
        e.jsxs(s, {
          display: "flex",
          gap: "spacing-sm",
          justifyContent: "center",
          children: [
            e.jsx(j, {
              size: "medium",
              variant: "outline",
              onClick: () => n("dashboard"),
              children: "Back"
            }),
            e.jsx(j, {
              disabled: o,
              variant: "danger",
              onClick: p,
              loading: o,
              children: o ? "Deactivating" : "Deactivate"
            })
          ]
        })
      ]
    });
  };
  Gn = ({ channelDetails: n, setActiveState: a, onActiveNetwork: t, currentAliasDetails: i }) => {
    const { chainId: r } = w(), c = i && (i == null ? void 0 : i.is_alias_verified) === 0, l = q.coreContractChain === r;
    return e.jsxs(s, {
      display: "flex",
      justifyContent: "space-between",
      width: "100%",
      flexDirection: {
        ml: "column",
        initial: "row"
      },
      gap: {
        ml: "spacing-md"
      },
      children: [
        e.jsx(ie, {
          channelDetails: n,
          showAddNewChain: l,
          onActiveNetwork: t,
          isAliasVerified: c
        }),
        l && e.jsxs(s, {
          display: "flex",
          height: "fit-content",
          gap: "spacing-xxs",
          justifyContent: "center",
          children: [
            e.jsx(v, {
              isLoading: !(n == null ? void 0 : n.name),
              children: e.jsx(j, {
                variant: "outline",
                size: "small",
                onClick: () => a("editChannel"),
                disabled: (n == null ? void 0 : n.activation_status) === 0,
                children: "Edit Channel"
              })
            }),
            e.jsx(v, {
              isLoading: !(n == null ? void 0 : n.name),
              children: e.jsx(ze, {
                trigger: "hover",
                overlay: e.jsxs(Oe, {
                  children: [
                    e.jsx(ee, {
                      label: "Add Subgraph Details",
                      icon: e.jsx(yn, {
                        size: 24
                      }),
                      onClick: () => a("addSubgraph")
                    }),
                    (n == null ? void 0 : n.activation_status) ? e.jsx(ee, {
                      label: "Deactivate Channel",
                      icon: e.jsx(jn, {
                        size: 24
                      }),
                      onClick: () => a("deactivateChannel"),
                      type: "error"
                    }) : e.jsx(ee, {
                      label: "Activate Channel",
                      icon: e.jsx(fn, {
                        size: 24
                      }),
                      onClick: () => a("reactivateChannel"),
                      type: "success"
                    })
                  ]
                }),
                children: e.jsx(s, {
                  padding: "spacing-xs",
                  border: "border-sm solid stroke-tertiary",
                  borderRadius: "radius-xs",
                  display: "flex",
                  height: "16px",
                  cursor: "pointer",
                  alignItems: "center",
                  children: e.jsx(bn, {
                    size: 24,
                    color: "icon-primary"
                  })
                })
              })
            })
          ]
        })
      ]
    });
  };
  Jn = () => e.jsx(s, {
    display: "flex",
    flexDirection: "row",
    justifyContent: "space-between",
    alignSelf: "stretch",
    padding: "spacing-none spacing-sm",
    color: "text-tertiary",
    children: e.jsxs(s, {
      display: "flex",
      flexDirection: {
        initial: "row",
        ml: "column"
      },
      gap: {
        initial: "spacing-sm",
        ml: "spacing-none"
      },
      children: [
        e.jsx(le, {
          to: "https://push.org/privacy/",
          target: "_blank",
          textProps: {
            variant: "bes-semibold",
            color: "text-tertiary"
          },
          children: "Privacy Policy"
        }),
        e.jsx(le, {
          to: "https://push.org/tos/",
          target: "_blank",
          textProps: {
            variant: "bes-semibold",
            color: "text-tertiary"
          },
          children: "Terms and Conditions"
        })
      ]
    })
  });
  $n = ({ settingName: n, type: a }) => e.jsxs(s, {
    display: "flex",
    flexDirection: "column",
    height: "43px",
    children: [
      e.jsxs(s, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        height: "100%",
        children: [
          e.jsx(C, {
            variant: "bs-semibold",
            color: "text-primary",
            children: n
          }),
          a == 2 && e.jsx(ce, {
            children: "Range"
          }),
          a == 3 && e.jsx(ce, {
            children: "Multi-Range"
          })
        ]
      }),
      e.jsx(F, {})
    ]
  });
  Qn = ({ channel_settings: n, loadingChannelSettings: a }) => {
    const t = W(), { chainId: i } = w(), r = q.coreContractChain === i, c = () => {
      t(R.ChannelSettings);
    };
    return e.jsxs(s, {
      display: "flex",
      padding: "spacing-sm",
      width: "-webkit-fill-available",
      border: "border-sm solid stroke-tertiary",
      borderRadius: "radius-sm",
      flexDirection: "column",
      children: [
        e.jsxs(s, {
          display: "flex",
          flexDirection: "column",
          gap: "spacing-xxs",
          children: [
            e.jsxs(s, {
              display: "flex",
              justifyContent: "space-between",
              children: [
                e.jsxs(s, {
                  display: "flex",
                  flexDirection: "column",
                  gap: "spacing-xxxs",
                  children: [
                    e.jsx(v, {
                      isLoading: a,
                      children: e.jsx(C, {
                        variant: "h5-semibold",
                        color: "text-primary",
                        children: "Notification Settings"
                      })
                    }),
                    e.jsx(v, {
                      isLoading: a,
                      children: e.jsxs(C, {
                        variant: "c-regular",
                        color: "text-tertiary",
                        children: [
                          " ",
                          "Manage notification preferences for users"
                        ]
                      })
                    })
                  ]
                }),
                n && e.jsx(j, {
                  size: "extraSmall",
                  disabled: !r,
                  variant: "tertiary",
                  leadingIcon: e.jsx(vn, {}),
                  onClick: () => t(R.ChannelSettings),
                  children: "Manage"
                })
              ]
            }),
            e.jsx(F, {})
          ]
        }),
        e.jsx(s, {
          display: "flex",
          flexDirection: "column",
          overflow: "auto",
          height: {
            initial: "274px",
            ml: "230px"
          },
          justifyContent: n ? "flex-start" : "center",
          children: n ? e.jsx(e.Fragment, {
            children: JSON.parse(n).map((l, g) => e.jsx($n, {
              settingName: l.description,
              type: l.type
            }, g))
          }) : e.jsx(we, {
            state: "notificationSettings",
            title: "No settings yet",
            subTitle: "Add options for users to customize notifications.",
            onClick: r && c
          })
        })
      ]
    });
  };
  Yn = ({ delegate_address: n, refetchChannelDelegate: a, setChannelDashboardError: t }) => {
    const { userPushSDKInstance: i } = ne((y) => y.user), { wallet: r, chainId: c } = w(), { handleConnectWalletAndEnableProfile: l } = u.useContext(ge), { mutate: g, isPending: o } = Tn(), p = async () => {
      if (o) return;
      let y = i;
      (i == null ? void 0 : i.readmode()) && (y = await l({
        wallet: r
      }), !y || (y == null ? void 0 : y.readmode())) || g({
        userPushSDKInstance: y,
        delegateAddress: E(n, c)
      }, {
        onSuccess: () => {
          a();
        },
        onError: (f) => {
          console.log("Error in removing delegatee", f), t("User rejected signature. Please try again.");
        }
      });
    }, [d, h] = u.useState("Copy Wallet"), m = () => {
      n && (navigator.clipboard.writeText(n), h("Copied")), setTimeout(() => {
        h("Copy Wallet");
      }, 1e3);
    };
    return e.jsxs(s, {
      display: "flex",
      flexDirection: "column",
      height: "43px",
      children: [
        e.jsxs(s, {
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center",
          height: "100%",
          children: [
            e.jsxs(s, {
              display: "flex",
              alignItems: "center",
              gap: "spacing-xxxs",
              children: [
                e.jsx(C, {
                  variant: "bs-semibold",
                  color: "text-primary",
                  children: me(n, 7)
                }),
                e.jsx(Ce, {
                  title: d,
                  children: e.jsx(s, {
                    cursor: "pointer",
                    children: e.jsx(ve, {
                      onClick: m,
                      size: 14,
                      color: "icon-tertiary"
                    })
                  })
                })
              ]
            }),
            e.jsxs(s, {
              display: "flex",
              cursor: "pointer",
              gap: "spacing-xxxs",
              onClick: p,
              children: [
                e.jsx(We, {
                  size: 16,
                  color: "icon-primary"
                }),
                e.jsx(C, {
                  color: "text-tertiary-inverse",
                  children: o ? "Removing" : "Remove"
                })
              ]
            })
          ]
        }),
        e.jsx(F, {})
      ]
    });
  };
  Xn = ({ channel_delegates: n, loadingDelegates: a, setChannelDashboardError: t, setActiveState: i, refetchChannelDelegate: r }) => e.jsxs(s, {
    display: "flex",
    padding: "spacing-sm",
    border: "border-sm solid stroke-tertiary",
    borderRadius: "radius-sm",
    width: "-webkit-fill-available",
    flexDirection: "column",
    children: [
      e.jsxs(s, {
        display: "flex",
        flexDirection: "column",
        gap: "spacing-xxs",
        children: [
          e.jsxs(s, {
            display: "flex",
            justifyContent: "space-between",
            children: [
              e.jsxs(s, {
                display: "flex",
                flexDirection: "column",
                gap: "spacing-xxxs",
                children: [
                  e.jsx(v, {
                    isLoading: a,
                    children: e.jsx(C, {
                      variant: "h5-semibold",
                      color: "text-primary",
                      children: "Channel Delegates"
                    })
                  }),
                  e.jsx(v, {
                    isLoading: a,
                    children: e.jsxs(C, {
                      variant: "c-regular",
                      color: "text-tertiary",
                      children: [
                        " ",
                        "Delegates can send channel notifications",
                        " "
                      ]
                    })
                  })
                ]
              }),
              e.jsx(j, {
                onClick: () => i("addDelegate"),
                size: "extraSmall",
                variant: "tertiary",
                leadingIcon: e.jsx(un, {}),
                children: "Add"
              })
            ]
          }),
          e.jsx(F, {})
        ]
      }),
      e.jsx(s, {
        display: "flex",
        flexDirection: "column",
        overflow: "auto",
        height: {
          initial: "274px",
          ml: "230px"
        },
        justifyContent: n ? "flex-start" : "center",
        children: n && n.length > 0 ? e.jsx(e.Fragment, {
          children: n.map((c) => e.jsx(Yn, {
            delegate_address: c,
            refetchChannelDelegate: r,
            setChannelDashboardError: t
          }, c))
        }) : e.jsx(we, {
          state: "delegatee",
          title: "No delegates yet",
          subTitle: "Delegates added to your channel will appear here."
        })
      })
    ]
  });
  ea = ({ setActiveState: n, setChannelDashboardError: a, channelDetails: t, loadingChannelDetails: i }) => {
    const { account: r, chainId: c } = w(), { userPushSDKInstance: l } = ne((h) => h.user), g = u.useMemo(() => E(r, c), [
      c,
      r
    ]), { data: o, refetch: p, isLoading: d } = ke(l, g);
    return e.jsxs(s, {
      display: "flex",
      gap: "spacing-md",
      width: "100%",
      flexDirection: {
        ml: "column",
        initial: "row"
      },
      children: [
        e.jsx(Qn, {
          channel_settings: t == null ? void 0 : t.channel_settings,
          loadingChannelSettings: i
        }),
        e.jsx(Xn, {
          channel_delegates: o,
          loadingDelegates: d,
          setChannelDashboardError: a,
          refetchChannelDelegate: p,
          setActiveState: n
        })
      ]
    });
  };
  na = ({ currentAliasDetails: n }) => {
    const a = W(), t = !!(n && (n == null ? void 0 : n.is_alias_verified) === 0);
    return e.jsx(s, {
      height: "380px",
      display: "flex",
      flexDirection: "column",
      padding: "spacing-xl spacing-md",
      gap: "spacing-xs",
      justifyContent: "center",
      alignItems: "center",
      alignSelf: "stretch",
      children: t ? e.jsxs(s, {
        height: "100%",
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        gap: "spacing-xxs",
        children: [
          e.jsx(Ke, {
            variant: "default"
          }),
          e.jsx(C, {
            variant: "bs-semibold",
            children: "Channel is being created on the new network. Please wait..."
          })
        ]
      }) : e.jsxs(s, {
        display: "flex",
        flexDirection: "column",
        gap: "spacing-xl",
        alignItems: "center",
        alignSelf: "stretch",
        children: [
          e.jsx(s, {
            display: "flex",
            padding: "spacing-none spacing-md",
            flexDirection: "column",
            justifyContent: "center",
            gap: "spacing-sm",
            alignSelf: "stretch",
            alignItems: "center",
            children: e.jsx(C, {
              variant: "bs-semibold",
              children: "Channel does not exist on this chain. Please setup channel on new chain to proceed."
            })
          }),
          e.jsx(j, {
            onClick: () => a(R.AddNewChain),
            leadingIcon: e.jsx(xe, {}),
            children: "Add New Chain"
          })
        ]
      })
    });
  };
  aa = ({ setActiveState: n, channelDetails: a, loadingChannelDetails: t }) => {
    const { chainId: i, account: r } = w(), [c, l] = u.useState(""), g = a == null ? void 0 : a.aliases.find((d) => d.alias_address === E(r, i)), o = !!(g && (g == null ? void 0 : g.is_alias_verified)), p = q.coreContractChain === i || o && parseInt(g == null ? void 0 : g.alias_blockchain_id) === i;
    return e.jsxs(e.Fragment, {
      children: [
        e.jsxs(s, {
          display: "flex",
          width: {
            initial: "1120px",
            ml: "357px",
            tb: "700px"
          },
          padding: "spacing-md",
          flexDirection: "column",
          alignItems: "center",
          gap: "spacing-lg",
          backgroundColor: "surface-primary",
          borderRadius: "radius-lg",
          margin: "spacing-none spacing-none spacing-sm spacing-none",
          children: [
            e.jsx(Gn, {
              channelDetails: a,
              setActiveState: n,
              onActiveNetwork: p,
              currentAliasDetails: g
            }),
            c && e.jsx(s, {
              width: "100%",
              children: e.jsx(N, {
                variant: "error",
                heading: c,
                showIcon: true
              })
            }),
            !p && e.jsx(na, {
              currentAliasDetails: g
            }),
            p && e.jsx(s, {
              width: "100%",
              height: {
                initial: "355px",
                tb: "auto"
              },
              children: t || !(a == null ? void 0 : a.name) ? e.jsx(s, {
                height: "100%",
                display: "flex",
                justifyContent: "center",
                alignItems: "center",
                children: e.jsx(Ge, {
                  type: Je.SEAMLESS,
                  title: "Loading Channel Details. Please wait..."
                })
              }) : e.jsx(ea, {
                setActiveState: n,
                setChannelDashboardError: l,
                channelDetails: a,
                loadingChannelDetails: t
              })
            })
          ]
        }),
        e.jsx(Jn, {})
      ]
    });
  };
  sa = se().shape({
    channelName: P().required(I("Channel Name")).max(32, de(32)),
    channelDesc: P().required(I("Channel Description")).max(250, de(250)),
    channelURL: P().required(I("Channel URL")).test("url", "Please enter a valid channel url", (n) => gn.test(n)),
    channelCategory: P().required(I("Channel Category"))
  });
  ta = ({ children: n, channelDetails: a }) => {
    const t = ae({
      initialValues: {
        channelName: a.name,
        channelCategory: a.tags.length ? a.tags[0] : "",
        channelDesc: a.info,
        channelURL: a.url,
        channelIcon: a.iconV2,
        imageSrc: "",
        imageType: ""
      },
      validationSchema: sa,
      onSubmit: () => {
      }
    });
    return e.jsx(dn, {
      value: t,
      children: n
    });
  };
  re = () => {
    const n = hn();
    if (!n) throw new Error("useEditChannelFormikContext must be used within a FormikChainAliasProvider");
    return n;
  };
  ia = ({ onClose: n }) => {
    const { values: a, setFieldValue: t, isValid: i } = re(), r = u.useRef(), [c, l] = u.useState(a.channelIcon), g = async (d) => {
      var _a;
      const h = (_a = d.currentTarget.files) == null ? void 0 : _a[0];
      l(void 0), h && await p(h);
    }, o = async (d) => {
      var _a;
      d.preventDefault(), d.stopPropagation(), l(void 0);
      const h = (_a = d.dataTransfer.files) == null ? void 0 : _a[0];
      h && await p(h);
    }, p = async (d) => {
      t("channelIcon", d);
      const h = new FileReader();
      h.readAsDataURL(d), h.onloadend = () => {
        t("imageSrc", h.result), t("imageType", d.type);
      };
    };
    return e.jsxs(s, {
      display: "flex",
      flexDirection: "column",
      gap: "spacing-lg",
      alignItems: "center",
      alignSelf: "stretch",
      children: [
        e.jsx(s, {
          display: "flex",
          width: "100%",
          justifyContent: "end",
          color: "text-tertiary",
          cursor: "pointer",
          children: e.jsx($e, {
            size: 24,
            onClick: n
          })
        }),
        e.jsxs(s, {
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          gap: "spacing-lg",
          children: [
            e.jsx(C, {
              variant: "bes-regular",
              color: "text-tertiary",
              children: "Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."
            }),
            e.jsx(Qe, {
              id: "file-upload",
              onChange: g,
              onDrop: o,
              children: e.jsxs(s, {
                width: {
                  initial: "500px",
                  ml: "325px"
                },
                padding: "spacing-xxl spacing-none",
                display: "flex",
                flexDirection: "column",
                alignItems: "center",
                border: "border-sm dashed stroke-tertiary",
                borderRadius: "radius-md",
                backgroundColor: "surface-secondary",
                gap: "spacing-md",
                children: [
                  c ? e.jsx(s, {
                    width: "128px",
                    height: "128px",
                    borderRadius: "radius-md",
                    children: e.jsx("img", {
                      style: {
                        borderRadius: "inherit"
                      },
                      width: "100%",
                      height: "100%",
                      src: c,
                      alt: "Cropped Img"
                    })
                  }) : e.jsx(mn, {
                    width: "200px",
                    height: "200px",
                    imageSrc: a.imageSrc,
                    imageType: a.imageType,
                    onImageCropped: (d) => {
                      l(d), t("channelIcon", d);
                    },
                    ref: r
                  }),
                  e.jsxs(s, {
                    display: "flex",
                    gap: "spacing-xxxs",
                    children: [
                      e.jsx(C, {
                        variant: "bs-semibold",
                        color: "text-tertiary",
                        children: "Drag and Drop or"
                      }),
                      e.jsx("label", {
                        htmlFor: "file-upload",
                        children: e.jsx(C, {
                          variant: "bs-semibold",
                          color: "text-brand-medium",
                          css: Z`
                    cursor: pointer;
                  `,
                          children: "Browse to Choose"
                        })
                      })
                    ]
                  })
                ]
              })
            })
          ]
        }),
        e.jsx(s, {
          children: c ? e.jsx(e.Fragment, {
            children: e.jsx(j, {
              onClick: () => {
                i && (t("channelIcon", c), n());
              },
              children: "Upload Image"
            })
          }) : e.jsx(e.Fragment, {
            children: e.jsx(j, {
              onClick: () => {
                r.current.showCroppedImage();
              },
              children: "Crop Image"
            })
          })
        })
      ]
    });
  };
  ra = ({ UploadLogoComponent: n, displayUplaodLogoModal: a }) => {
    const { values: t, errors: i, handleChange: r, setFieldValue: c } = re(), { data: l } = Se();
    return e.jsxs(s, {
      display: "flex",
      flexDirection: {
        initial: "row",
        ml: "column"
      },
      gap: "spacing-lg",
      width: "100%",
      padding: "spacing-sm spacing-md",
      justifyContent: "center",
      children: [
        e.jsxs(s, {
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          gap: "spacing-sm",
          children: [
            e.jsx(s, {
              width: "90px",
              height: "90px",
              border: "border-sm solid stroke-tertiary",
              borderRadius: "radius-md",
              css: Z`
            img {
              border-radius: 16px;
            }
          `,
              children: e.jsx("img", {
                width: "100%",
                height: "100%",
                src: t.channelIcon
              })
            }),
            e.jsx(j, {
              size: "extraSmall",
              onClick: a,
              children: "Upload Logo"
            })
          ]
        }),
        e.jsx(s, {
          display: {
            initial: "block",
            ml: "none"
          },
          height: "330px",
          margin: "spacing-none spacing-lg",
          children: e.jsx(F, {
            orientation: "vertical"
          })
        }),
        e.jsx(s, {
          display: {
            initial: "none",
            ml: "block"
          },
          children: e.jsx(F, {
            orientation: "horizontal"
          })
        }),
        e.jsx(s, {
          width: {
            initial: "550px",
            ml: "350px"
          },
          children: e.jsx("form", {
            children: e.jsx(s, {
              display: "flex",
              flexDirection: "column",
              gap: "spacing-xl",
              alignSelf: "stretch",
              children: e.jsxs(s, {
                display: "flex",
                flexDirection: "column",
                gap: "spacing-sm",
                alignSelf: "stretch",
                css: Z`
                flex: 1;
              `,
                children: [
                  e.jsx(H, {
                    required: true,
                    label: "Channel Name",
                    value: t.channelName,
                    onChange: r("channelName"),
                    error: !!i.channelName,
                    errorMessage: i.channelName,
                    totalCount: 32
                  }),
                  e.jsx(Ye, {
                    required: true,
                    label: "Channel Category",
                    placeholder: "Please select a category",
                    options: (l == null ? void 0 : l.selectFieldTags) || [],
                    value: t.channelCategory,
                    error: !!(i == null ? void 0 : i.channelCategory),
                    errorMessage: i == null ? void 0 : i.channelCategory,
                    onSelect: (g) => {
                      c("channelCategory", g);
                    }
                  }),
                  e.jsx(Xe, {
                    required: true,
                    label: "Channel Description",
                    placeholder: "Get notified about ...",
                    description: "Enter a Brief description of the notifications the user will receive",
                    error: !!i.channelDesc,
                    errorMessage: i.channelDesc,
                    value: t.channelDesc,
                    onChange: r("channelDesc"),
                    totalCount: 250
                  }),
                  e.jsx(H, {
                    required: true,
                    label: "Channel Website URL",
                    value: t.channelURL,
                    onChange: r("channelURL"),
                    error: !!i.channelURL,
                    errorMessage: i.channelURL
                  })
                ]
              })
            })
          })
        }),
        e.jsx(n, {
          InnerComponent: ia,
          modalPosition: en.ON_PARENT
        })
      ]
    });
  };
  oa = 50;
  la = ({ setActiveState: n }) => {
    const { account: a, provider: t, chainId: i } = w(), { values: r, isValid: c, initialValues: l } = re(), { data: g, refetch: o } = nn(a), { mutate: p, isPending: d } = je(), [h, m] = u.useState(0), [y, f] = u.useState(0), [x, b] = u.useState(""), [D, K] = u.useState(0), S = async () => {
      const k = await be({
        address: a,
        provider: t
      });
      K(k);
    }, M = async () => {
      const _ = q.coreContractChain === i ? t : new sn(q.coreRPC), X = await new z(A.epnscore, O.epnscore, _).channelUpdateCounter(a);
      m(oa * (Number(X) + 1));
    }, L = async () => {
      const k = await ye({
        address: a,
        provider: t,
        contractAddress: A.epnscore
      });
      f(parseInt(k));
    };
    u.useEffect(() => {
      !a || !t || (M(), L(), S());
    }, [
      a,
      t
    ]);
    const Le = u.useMemo(() => !!an.isEqual(r, l), [
      r
    ]), De = () => {
      if (b(""), h == 0) return;
      var k = t.getSigner(a);
      console.debug(k);
      const _ = $(h.toString(), 18);
      p({
        noOfTokenToApprove: _,
        signer: k
      }, {
        onSuccess: () => {
          console.log("Successfully Approved PUSH"), L();
        },
        onError: (T) => {
          console.log("Error in Approving PUSH", T), T.code == "ACTION_REJECTED" ? b("User rejected signature. Please try again.") : b("Error in approving PUSH Tokens");
        }
      });
    }, { mutate: Pe, isPending: Y } = _n(), Ie = async () => {
      if (b(""), !!c) {
        var k = t.getSigner(a);
        if (console.debug(k), g) {
          const _ = JSON.stringify({
            name: r.channelName,
            info: r.channelDesc,
            url: r.channelURL,
            icon: r.channelIcon,
            tags: [
              r.channelCategory
            ]
          }), T = await tn(_);
          console.debug("IPFS storagePointer:", T);
          const X = "1+" + T, Ae = he(X), Ee = $(h.toString(), 18);
          Pe({
            account: a,
            identityBytes: Ae,
            fees: Ee,
            signer: k
          }, {
            onSuccess: () => {
              console.log("Successfully edited channel"), o(), n("dashboard");
            },
            onError: (oe) => {
              console.log("Error in updating channel details", oe), oe.code == "ACTION_REJECTED" ? b("User rejected signature. Please try again.") : b("Error in updating Channel. Check console for more reasons.");
            }
          });
        }
      }
    };
    return e.jsxs(s, {
      display: "flex",
      flexDirection: "column",
      alignSelf: "stretch",
      children: [
        x && e.jsx(s, {
          width: "100%",
          children: e.jsx(N, {
            variant: "error",
            heading: x,
            showIcon: true
          })
        }),
        e.jsx(te, {
          title: "Channel edit fee",
          description: "Editing channel details requires fees to be deposited",
          fees: h,
          pushApprovalAmount: y,
          showFaucet: true,
          showBalance: true,
          balance: D,
          setBalance: K
        }),
        e.jsxs(s, {
          display: "flex",
          justifyContent: "end",
          gap: "spacing-sm",
          margin: "spacing-lg spacing-none spacing-none spacing-none",
          children: [
            e.jsx(j, {
              size: "medium",
              variant: "outline",
              onClick: () => n("dashboard"),
              children: "Back"
            }),
            h && y >= h ? e.jsx(j, {
              disabled: Le || Y || !c,
              onClick: Ie,
              loading: Y,
              children: Y ? "Updating" : "Save Changes"
            }) : e.jsx(j, {
              variant: "primary",
              size: "medium",
              disabled: d,
              onClick: De,
              loading: d,
              children: d ? "Approving" : "Approve PUSH"
            })
          ]
        })
      ]
    });
  };
  ca = ({ channelDetails: n, setActiveState: a }) => {
    const { showModal: t, ModalComponent: i } = rn();
    return e.jsx(ta, {
      channelDetails: n,
      children: e.jsxs(s, {
        display: "flex",
        width: {
          initial: "846px",
          ml: "357px"
        },
        padding: "spacing-md",
        flexDirection: "column",
        alignItems: "center",
        gap: "spacing-lg",
        backgroundColor: "surface-primary",
        borderRadius: "radius-lg",
        margin: "spacing-none spacing-none spacing-sm spacing-none",
        children: [
          n && e.jsx(ra, {
            displayUplaodLogoModal: t,
            UploadLogoComponent: i,
            channelDetails: n
          }),
          e.jsx(la, {
            setActiveState: a
          })
        ]
      })
    });
  };
  da = () => {
    const [n, a] = u.useState("dashboard"), [t] = on(), i = t.get("paymentId"), { account: r, chainId: c } = w(), l = E(r, c), g = W(), { data: o } = pe({
      channelId: l
    }), { selectedPlan: p, isUserOnFreePlan: d } = ue(o), { data: h } = xn({
      paymentId: i
    }), { channelDetails: m, loadingChannelDetails: y, refetchChannelDetails: f } = fe();
    Se();
    const x = Cn(o), b = ((o == null ? void 0 : o.email_total_quota) ?? 0) + ((o == null ? void 0 : o.discord_total_quota) ?? 0) + ((o == null ? void 0 : o.telegram_total_quota) ?? 0), D = ((o == null ? void 0 : o.email_quota_used) ?? 0) + ((o == null ? void 0 : o.discord_quota_used) ?? 0) + ((o == null ? void 0 : o.telegram_quota_used) ?? 0);
    return e.jsxs(s, {
      display: "flex",
      flexDirection: "column",
      gap: "spacing-sm",
      children: [
        n === "dashboard" && e.jsxs(s, {
          children: [
            (h == null ? void 0 : h.payment_status) == "SUCCESS" && e.jsx(G, {
              variant: "success",
              purchasedPlan: {
                planName: p == null ? void 0 : p.name
              },
              onAction: () => {
                window.open(`https://sepolia.etherscan.io/tx/${h == null ? void 0 : h.transaction_hash}`, "_blank");
              }
            }),
            o && !d && (x == null ? void 0 : x.isExpired) && e.jsx(G, {
              variant: "expired",
              purchasedPlan: {
                planName: p == null ? void 0 : p.name
              },
              onAction: () => {
                g("/pricing");
              }
            }),
            o && !d && parseInt(x == null ? void 0 : x.timeRemaining) < 7 && e.jsx(G, {
              variant: "renewalReminder",
              purchasedPlan: {
                planName: p == null ? void 0 : p.name,
                daysRemaining: parseInt(x == null ? void 0 : x.timeRemaining)
              },
              onAction: () => {
                g("/pricing");
              }
            }),
            d && b - D < 100 && e.jsx(G, {
              variant: "notificationLimit",
              onAction: () => {
                g("/pricing");
              }
            })
          ]
        }),
        n === "dashboard" && e.jsx(aa, {
          setActiveState: a,
          channelDetails: m,
          loadingChannelDetails: y
        }),
        n === "addDelegate" && e.jsx(zn, {
          setActiveState: a
        }),
        n === "addSubgraph" && e.jsx(Vn, {
          setActiveState: a
        }),
        n === "deactivateChannel" && e.jsx(Kn, {
          setActiveState: a,
          channelDetails: m,
          refetchChannelDetails: f
        }),
        n === "reactivateChannel" && e.jsx(On, {
          setActiveState: a,
          channelDetails: m,
          refetchChannelDetails: f
        }),
        n === "editChannel" && m && e.jsx(ca, {
          setActiveState: a,
          channelDetails: m
        })
      ]
    });
  };
  Sa = () => {
    const { account: n } = w(), a = W(), t = ln(), { channelDetails: i, loadingChannelDetails: r, refetchChannelDetails: c } = fe();
    return u.useEffect(() => {
      a(!r && !i ? `${R.CreateChannel}${t.search}` : `${R.ChannelDashboard(n)}${t.search}`);
    }, [
      i,
      r
    ]), u.useEffect(() => {
      let l;
      return i && !i.name && (l = setInterval(() => {
        c();
      }, 3e3)), () => {
        clearInterval(l);
      };
    }, [
      i,
      i == null ? void 0 : i.name
    ]), e.jsx(cn, {
      children: e.jsx(da, {})
    });
  };
});
export {
  __tla,
  Sa as default
};
