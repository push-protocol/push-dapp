import{ea as i,er as J,eQ as Fe,hy as Ie,gX as Be,eJ as Te,e7 as f,hz as Re,hA as $e,hB as qe,hC as Q,eH as We,eb as u,gr as Ke,gs as Ue,gQ as G,en as V,ev as H,eq as S,hD as X,es as Je,gC as Qe,gB as Ge,fV as Y,gz as Z,hE as He,gh as ee,ep as Xe,__tla as Ye}from"./index-DZCEXmT_.js";import{S as ae,__tla as Ze}from"./Search-BEBZy9ad.js";import{u as ea,__tla as aa}from"./useGetChannelsList-DkP0R7R_.js";import{u as ia,I as ta,__tla as ra}from"./InfiniteScroll-CAr8MQqp.js";import{u as na,__tla as sa}from"./useGetChannelCategories-BsV9-qAg.js";import{u as la,__tla as oa}from"./VerifiedChannelTooltipContent-HS0Kj6Z8.js";import{C as ca,__tla as ha}from"./ChannelDetailsCard-6c9CFox4.js";import{U as da,b as ua,__tla as ga}from"./UnlockProfileWrapper-DHiEstNC.js";import{C as pa,__tla as fa}from"./ContentLayout-D_OVjazn.js";import{__tla as ma}from"./PushLogo-BAPh8IMA.js";let ie,xa=Promise.all([(()=>{try{return Ye}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return ha}catch{}})(),(()=>{try{return ga}catch{}})(),(()=>{try{return fa}catch{}})(),(()=>{try{return ma}catch{}})()]).then(async()=>{const te=e=>{const{svgProps:a,...r}=e;return i.jsx(J,{componentName:"CaretLeft",icon:i.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,children:i.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...r})},re=e=>{const{svgProps:a,...r}=e;return i.jsx(J,{componentName:"CaretRight",icon:i.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,children:[i.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:i.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0_4239_16009",children:i.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...r})},ne=({userPushSDKInstance:e,page:a,pageSize:r,query:s,chain:t,tag:o})=>e.channel.search(s,{limit:r,page:a,...t?{filter:Number(t)}:{},...o?{tag:o}:{}}),se=({pageSize:e,query:a,chain:r,tag:s})=>{const{userPushSDKInstance:t}=Fe(o=>o.user);return ia({queryKey:[Ie,a,r,s],initialPageParam:1,enabled:!!a,queryFn:({pageParam:o})=>ne({userPushSDKInstance:t,pageSize:e,page:o,query:a,chain:r,tag:s}),getNextPageParam:({},o,n)=>o[n-1].length<e?null:n+1})},le=({initialChain:e,initialCategory:a})=>{const[,r]=Be(),{search:s}=Te(),t=f.useMemo(()=>Object.fromEntries(new URLSearchParams(s).entries()),[s]),o=n=>{const l=Object.entries({...t,...n}).reduce((c,[d,g])=>g?{...c,[d]:g}:c,{});r(l)};return f.useEffect(()=>{const n={};(!t.chain||!t.category)&&(n.chain=t.chain||e,n.category=t.category||a),(t.chain!==e||t.search)&&t.category!==a&&(n.category=a),Object.keys(n).length&&o(n)},[]),{filters:{chain:(t==null?void 0:t.chain)||e,category:(t==null?void 0:t.category)||"",search:(t==null?void 0:t.search)||""},setFilter:o}};var oe=Re,ce=function(){return oe.Date.now()},he=ce,de=/\s/;function ue(e){for(var a=e.length;a--&&de.test(e.charAt(a)););return a}var ge=ue,pe=ge,fe=/^\s+/;function me(e){return e&&e.slice(0,pe(e)+1).replace(fe,"")}var xe=me,ye=qe,ve=$e,je="[object Symbol]";function _e(e){return typeof e=="symbol"||ve(e)&&ye(e)==je}var be=_e,we=xe,A=Q,Ce=be,z=NaN,Se=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,Pe=/^0o[0-7]+$/i,Me=parseInt;function ke(e){if(typeof e=="number")return e;if(Ce(e))return z;if(A(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=A(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=we(e);var r=Le.test(e);return r||Pe.test(e)?Me(e.slice(2),r?2:8):Se.test(e)?z:+e}var Ne=ke,De=Q,k=he,O=Ne,Ee="Expected a function",Ve=Math.max,Ae=Math.min;function ze(e,a,r){var s,t,o,n,l,c,d=0,g=!1,y=!1,j=!0;if(typeof e!="function")throw new TypeError(Ee);a=O(a)||0,De(r)&&(g=!!r.leading,y="maxWait"in r,o=y?Ve(O(r.maxWait)||0,a):o,j="trailing"in r?!!r.trailing:j);function _(h){var x=s,C=t;return s=t=void 0,d=h,n=e.apply(C,x),n}function b(h){return d=h,l=setTimeout(v,a),g?_(h):n}function L(h){var x=h-c,C=h-d,U=a-x;return y?Ae(U,o-C):U}function P(h){var x=h-c,C=h-d;return c===void 0||x>=a||x<0||y&&C>=o}function v(){var h=k();if(P(h))return w(h);l=setTimeout(v,L(h))}function w(h){return l=void 0,j&&s?_(h):(s=t=void 0,n)}function M(){l!==void 0&&clearTimeout(l),d=0,s=c=t=l=void 0}function m(){return l===void 0?n:w(k())}function E(){var h=k(),x=P(h);if(s=arguments,t=this,c=h,x){if(l===void 0)return b(c);if(y)return clearTimeout(l),l=setTimeout(v,a),_(c)}return l===void 0&&(l=setTimeout(v,a)),n}return E.cancel=M,E.flush=m,E}var Oe=ze;let F,p,N,I,B,T,D,R,$,q,W,K;F=We(Oe),p="All",N=["0x8AAAa9c3a06a4A9FE7C5cCe17d8B5db1E225Eadf"],I=({filters:e,setFilter:a})=>{const[r,s]=f.useState(e.search),[t,o]=f.useState(!0),n=f.useCallback(F(l=>{l!==""&&a({search:l,category:p})},800),[a]);return f.useEffect(()=>{e.search||s("")},[e.search]),f.useEffect(()=>{!t&&n(r)},[r]),f.useEffect(()=>{o(!1)},[]),i.jsxs(u,{display:"flex",gap:"spacing-xs",flexDirection:{initial:"row",ml:"column"},width:"100%",children:[i.jsx(u,{width:"100%",children:i.jsx(Ke,{icon:i.jsx(ae,{}),onChange:l=>s(l.target.value),placeholder:"Search Web3 domain or 0x123",value:r})}),i.jsx(u,{width:{initial:"300px",ml:"100%"},children:i.jsx(Ue,{options:G(V.allowedNetworks),value:e.chain,onSelect:l=>a({chain:l,category:p})})})]})},B=150,T=({filters:e,setFilter:a})=>{const r=f.useRef(null),{data:s,isLoading:t}=na(),o=t?Array(15).fill(0):(s==null?void 0:s.tags)||[];return i.jsxs(u,{display:"flex",alignItems:"center",css:S`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{mm:"346px",ml:"392px"},position:"relative",children:[i.jsx(u,{backgroundColor:"surface-primary",css:S`
          position: absolute;
        `,borderRadius:"radius-round",children:i.jsx(H,{iconOnly:i.jsx(te,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=r==null?void 0:r.current)==null||n.scrollBy({left:-150,behavior:"smooth"})}})}),i.jsxs(u,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:r,padding:"spacing-none spacing-xxl",children:[!t&&i.jsx(X,{isActive:e.category===p,onClick:()=>a({category:p}),children:p}),o.map((n,l)=>i.jsx(Je,{isLoading:t,width:"200px",borderRadius:"radius-round",children:i.jsx(X,{isActive:n===e.category,onClick:()=>a({category:n,search:"",chain:V.coreContractChain.toString()}),children:n},`${l}`)}))]}),i.jsx(u,{backgroundColor:"surface-primary",css:S`
          position: absolute;
          right: 0;
        `,borderRadius:"radius-round",children:i.jsx(H,{iconOnly:i.jsx(re,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=r==null?void 0:r.current)==null||n.scrollBy({left:B,behavior:"smooth"})}})})]})},D=({channelDetails:e,isLoading:a,onChangeProfileModalVisibility:r,profileModalVisibility:s})=>{const{data:t,refetch:o,isLoading:n}=la(void 0,{refetchOnWindowFocus:!1,staleTime:1/0,refetchInterval:9e5}),l=()=>{o()},c=t==null?void 0:t.find(g=>g.channel===(e==null?void 0:e.channel)),d=JSON.parse((c==null?void 0:c.user_settings)||"[]")||[];return i.jsx(ca,{onChangeProfileModalVisibility:r,profileModalVisibility:s,channelDetails:e,isLoading:a,isSubscribed:!!c,isSubscriptionLoading:n,handleRefetch:l,subscribeButtonVariant:"outline",userSettings:d,width:{initial:"inherit",tb:"auto",lp:"auto",mm:"auto"}})},R=({channelAddress:e,onChangeProfileModalVisibility:a,profileModalVisibility:r})=>{const{data:s,isLoading:t}=Qe(e);return i.jsx(D,{channelDetails:s,isLoading:t,onChangeProfileModalVisibility:a,profileModalVisibility:r})},$=({channels:e,hasMoreData:a,isLoading:r,isLoadingNextPage:s,loadMore:t,suggestedChannels:o})=>{const[n,l]=f.useState({isVisible:!1,channel_id:null});return i.jsxs(u,{height:"100%",overflow:"auto",customScrollbar:!0,padding:"spacing-none spacing-xxs",margin:{initial:"spacing-none spacing-sm",ml:"spacing-none spacing-xxs"},css:S`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${Y.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${Y.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[i.jsxs(ta,{pageStart:1,loadMore:t,hasMore:a,useWindow:!1,threshold:150,className:"channel-scroll",children:[o.map(c=>i.jsx(R,{channelAddress:c},`${c}`)),e.map((c,d)=>i.jsx(D,{onChangeProfileModalVisibility:g=>l(g),profileModalVisibility:n,channelDetails:c,isLoading:r},`${d}`))]}),s&&i.jsx(u,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:i.jsx(Ge,{size:"medium",variant:"primary"})}),(n==null?void 0:n.isVisible)&&i.jsx(u,{display:"flex",justifyContent:"center",width:"-webkit-fill-available",alignItems:"center",css:S`
            z-index: 99999;
          `,children:i.jsx(da,{type:ua.MODAL,showConnectModal:!0,onClose:()=>l({isVisible:!1,channel_id:null}),description:"Unlock your profile to proceed."})})]})},q=e=>He()==="prod"&&(e==null?void 0:e.category)&&(e==null?void 0:e.category)!=p,W=(e,a)=>{if(q(a)){const r=e.map(s=>s.channel);return Object.keys(Z).filter(s=>!r.includes(s)&&!N.includes(s)&&Z[s]===a.category)}return[]},K=()=>{var w,M;const e=G(V.allowedNetworks),{filters:a,setFilter:r}=le({initialChain:e[0].value,initialCategory:p}),s=(w=e.find(m=>m.value===a.chain))==null?void 0:w.label.includes("Ethereum"),{data:t,isLoading:o,fetchNextPage:n,isFetchingNextPage:l,hasNextPage:c}=ea({pageSize:21,order:ee.ChannelListOrderType.DESCENDING,sort:ee.ChannelListSortType.SUBSCRIBER,chain:s?"":a.chain,tag:a.category===p?"":a.category}),{data:d,isLoading:g,fetchNextPage:y,isFetchingNextPage:j,hasNextPage:_}=se({pageSize:21,query:a.search,chain:s?"":a.chain,tag:a.category===p?"":a.category}),b=o||g?Array(9).fill(0):((M=a.search?d==null?void 0:d.pages.flatMap(m=>m):t==null?void 0:t.pages.flatMap(m=>m.channels))==null?void 0:M.filter(m=>!N.includes(m.channel)))||[],L=W(b,a),P=a.search?!j&&_:!l&&c,v=o||g;return i.jsx(u,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",height:"100%",children:i.jsxs(u,{display:"flex",flexDirection:"column",width:"100%",gap:{initial:"spacing-md",ml:"spacing-lg"},children:[i.jsxs(u,{display:"flex",flexDirection:"column",gap:"spacing-sm",padding:{initial:"spacing-md spacing-md spacing-none spacing-md",ml:"spacing-sm spacing-sm spacing-none spacing-sm"},children:[i.jsx(I,{filters:a,setFilter:r}),i.jsx(T,{filters:a,setFilter:r})]}),!b.length&&!L.length&&!v?i.jsxs(u,{display:"flex",gap:"spacing-xs",alignItems:"center",flexDirection:"column",justifyContent:"center",height:"100%",children:[i.jsx(ae,{size:48,color:"icon-tertiary"}),i.jsx(Xe,{variant:"h5-bold",children:"No channels to display"})]}):i.jsx($,{channels:b,hasMoreData:P,suggestedChannels:L,isLoading:v,isLoadingNextPage:l||j,loadMore:a.search?y:n})]})})},ie=()=>i.jsx(pa,{variant:"verticalStretch",children:i.jsx(K,{})})});export{xa as __tla,ie as default};
