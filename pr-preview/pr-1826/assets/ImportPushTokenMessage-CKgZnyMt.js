import{ef as Kt,g6 as rt,d_ as z,e1 as J,g7 as Zt,e6 as Xt,e2 as Vt,eq as bt,ep as $t,__tla as te}from"./index-kz2isoow.js";import{i as ee,__tla as re}from"./PushTokenContractHelper-4ScZVzl1.js";let Et,yt,ie=Promise.all([(()=>{try{return te}catch{}})(),(()=>{try{return re}catch{}})()]).then(async()=>{var ot={exports:{}};(function(y,h){(function(r){y.exports=r()})(function(){return function(){function r(A,I,p){function e(s,o){if(!I[s]){if(!A[s]){var t=typeof rt=="function"&&rt;if(!o&&t)return t(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var i=I[s]={exports:{}};A[s][0].call(i.exports,function(c){var g=A[s][1][c];return e(g||c)},i,i.exports,r,A,I,p)}return I[s].exports}for(var a=typeof rt=="function"&&rt,n=0;n<p.length;n++)e(p[n]);return e}return r}()({1:[function(r,A,I){var p=r("multimath"),e=r("./mm_unsharp_mask"),a=r("./mm_resize");function n(s){var o=s||[],t={js:o.indexOf("js")>=0,wasm:o.indexOf("wasm")>=0};p.call(this,t),this.features={js:t.js,wasm:t.wasm&&this.has_wasm()},this.use(e),this.use(a)}n.prototype=Object.create(p.prototype),n.prototype.constructor=n,n.prototype.resizeAndUnsharp=function(s,o){var t=this.resize(s,o);return s.unsharpAmount&&this.unsharp_mask(t,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),t},A.exports=n},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(r,A,I){function p(t){return t<0?0:t>255?255:t}function e(t){return t>=0?t:0}function a(t,l,i,c,g,f){var m,C,Q,_,x,D,b,w,U,M,R,G=0,j=0;for(U=0;U<c;U++){for(x=0,M=0;M<g;M++){for(D=f[x++],b=f[x++],w=G+D*4|0,m=C=Q=_=0;b>0;b--)R=f[x++],_=_+R*t[w+3]|0,Q=Q+R*t[w+2]|0,C=C+R*t[w+1]|0,m=m+R*t[w]|0,w=w+4|0;l[j+3]=e(_>>7),l[j+2]=e(Q>>7),l[j+1]=e(C>>7),l[j]=e(m>>7),j=j+c*4|0}j=(U+1)*4|0,G=(U+1)*i*4|0}}function n(t,l,i,c,g,f){var m,C,Q,_,x,D,b,w,U,M,R,G=0,j=0;for(U=0;U<c;U++){for(x=0,M=0;M<g;M++){for(D=f[x++],b=f[x++],w=G+D*4|0,m=C=Q=_=0;b>0;b--)R=f[x++],_=_+R*t[w+3]|0,Q=Q+R*t[w+2]|0,C=C+R*t[w+1]|0,m=m+R*t[w]|0,w=w+4|0;m>>=7,C>>=7,Q>>=7,_>>=7,l[j+3]=p(_+8192>>14),l[j+2]=p(Q+8192>>14),l[j+1]=p(C+8192>>14),l[j]=p(m+8192>>14),j=j+c*4|0}j=(U+1)*4|0,G=(U+1)*i*4|0}}function s(t,l,i,c,g,f){var m,C,Q,_,x,D,b,w,U,M,R,G,j=0,P=0;for(M=0;M<c;M++){for(D=0,R=0;R<g;R++){for(b=f[D++],w=f[D++],U=j+b*4|0,m=C=Q=_=0;w>0;w--)G=f[D++],x=t[U+3],_=_+G*x|0,Q=Q+G*t[U+2]*x|0,C=C+G*t[U+1]*x|0,m=m+G*t[U]*x|0,U=U+4|0;Q=Q/255|0,C=C/255|0,m=m/255|0,l[P+3]=e(_>>7),l[P+2]=e(Q>>7),l[P+1]=e(C>>7),l[P]=e(m>>7),P=P+c*4|0}P=(M+1)*4|0,j=(M+1)*i*4|0}}function o(t,l,i,c,g,f){var m,C,Q,_,x,D,b,w,U,M,R,G=0,j=0;for(U=0;U<c;U++){for(x=0,M=0;M<g;M++){for(D=f[x++],b=f[x++],w=G+D*4|0,m=C=Q=_=0;b>0;b--)R=f[x++],_=_+R*t[w+3]|0,Q=Q+R*t[w+2]|0,C=C+R*t[w+1]|0,m=m+R*t[w]|0,w=w+4|0;m>>=7,C>>=7,Q>>=7,_>>=7,_=p(_+8192>>14),_>0&&(m=m*255/_|0,C=C*255/_|0,Q=Q*255/_|0),l[j+3]=_,l[j+2]=p(Q+8192>>14),l[j+1]=p(C+8192>>14),l[j]=p(m+8192>>14),j=j+c*4|0}j=(U+1)*4|0,G=(U+1)*i*4|0}}A.exports={convolveHor:a,convolveVert:n,convolveHorWithPre:s,convolveVertWithPre:o}},{}],3:[function(r,A,I){A.exports="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"},{}],4:[function(r,A,I){A.exports={name:"resize",fn:r("./resize"),wasm_fn:r("./resize_wasm"),wasm_src:r("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(r,A,I){var p=r("./resize_filter_gen"),e=r("./convolve"),a=e.convolveHor,n=e.convolveVert,s=e.convolveHorWithPre,o=e.convolveVertWithPre;function t(i,c,g){for(var f=3,m=c*g*4|0;f<m;){if(i[f]!==255)return!0;f=f+4|0}return!1}function l(i,c,g){for(var f=3,m=c*g*4|0;f<m;)i[f]=255,f=f+4|0}A.exports=function(i){var c=i.src,g=i.width,f=i.height,m=i.toWidth,C=i.toHeight,Q=i.scaleX||i.toWidth/i.width,_=i.scaleY||i.toHeight/i.height,x=i.offsetX||0,D=i.offsetY||0,b=i.dest||new Uint8Array(m*C*4),w=typeof i.filter>"u"?"mks2013":i.filter,U=p(w,g,m,Q,x),M=p(w,f,C,_,D),R=new Uint16Array(m*f*4);return t(c,g,f)?(s(c,R,g,f,m,U),o(R,b,f,m,C,M)):(a(c,R,g,f,m,U),n(R,b,f,m,C,M),l(b,m,C)),b}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(r,A,I){var p=r("./resize_filter_info"),e=14;function a(n){return Math.round(n*((1<<e)-1))}A.exports=function(n,s,o,t,l){var i=p.filter[n].fn,c=1/t,g=Math.min(1,t),f=p.filter[n].win/g,m,C,Q,_,x,D,b,w,U,M,R,G,j,P,H,u,B,d=Math.floor((f+1)*2),E=new Int16Array((d+2)*o),v=0,F=!E.subarray||!E.set;for(m=0;m<o;m++){for(C=(m+.5)*c+l,Q=Math.max(0,Math.floor(C-f)),_=Math.min(s-1,Math.ceil(C+f)),x=_-Q+1,D=new Float32Array(x),b=new Int16Array(x),w=0,U=Q,M=0;U<=_;U++,M++)R=i((U+.5-C)*g),w+=R,D[M]=R;for(G=0,M=0;M<D.length;M++)j=D[M]/w,G+=j,b[M]=a(j);for(b[o>>1]+=a(1-G),P=0;P<b.length&&b[P]===0;)P++;if(P<b.length){for(H=b.length-1;H>0&&b[H]===0;)H--;if(u=Q+P,B=H-P+1,E[v++]=u,E[v++]=B,!F)E.set(b.subarray(P,H+1),v),v+=B;else for(M=P;M<=H;M++)E[v++]=b[M]}else E[v++]=0,E[v++]=0}return E}},{"./resize_filter_info":7}],7:[function(r,A,I){var p={box:{win:.5,fn:function(e){return e<0&&(e=-e),e<.5?1:0}},hamming:{win:1,fn:function(e){if(e<0&&(e=-e),e>=1)return 0;if(e<11920929e-14)return 1;var a=e*Math.PI;return Math.sin(a)/a*(.54+.46*Math.cos(a/1))}},lanczos2:{win:2,fn:function(e){if(e<0&&(e=-e),e>=2)return 0;if(e<11920929e-14)return 1;var a=e*Math.PI;return Math.sin(a)/a*Math.sin(a/2)/(a/2)}},lanczos3:{win:3,fn:function(e){if(e<0&&(e=-e),e>=3)return 0;if(e<11920929e-14)return 1;var a=e*Math.PI;return Math.sin(a)/a*Math.sin(a/3)/(a/3)}},mks2013:{win:2.5,fn:function(e){return e<0&&(e=-e),e>=2.5?0:e>=1.5?-.125*(e-2.5)*(e-2.5):e>=.5?.25*(4*e*e-11*e+7):1.0625-1.75*e*e}}};A.exports={filter:p,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(r,A,I){var p=r("./resize_filter_gen");function e(t,l,i){for(var c=3,g=l*i*4|0;c<g;){if(t[c]!==255)return!0;c=c+4|0}return!1}function a(t,l,i){for(var c=3,g=l*i*4|0;c<g;)t[c]=255,c=c+4|0}function n(t){return new Uint8Array(t.buffer,0,t.byteLength)}var s=!0;try{s=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function o(t,l,i){if(s){l.set(n(t),i);return}for(var c=i,g=0;g<t.length;g++){var f=t[g];l[c++]=f&255,l[c++]=f>>8&255}}A.exports=function(t){var l=t.src,i=t.width,c=t.height,g=t.toWidth,f=t.toHeight,m=t.scaleX||t.toWidth/t.width,C=t.scaleY||t.toHeight/t.height,Q=t.offsetX||0,_=t.offsetY||0,x=t.dest||new Uint8Array(g*f*4),D=typeof t.filter>"u"?"mks2013":t.filter,b=p(D,i,g,m,Q),w=p(D,c,f,C,_),U=0,M=Math.max(l.byteLength,x.byteLength),R=this.__align(U+M),G=c*g*4*2,j=this.__align(R+G),P=this.__align(j+b.byteLength),H=P+w.byteLength,u=this.__instance("resize",H),B=new Uint8Array(this.__memory.buffer),d=new Uint32Array(this.__memory.buffer),E=new Uint32Array(l.buffer);d.set(E),o(b,B,j),o(w,B,P);var v=u.exports.convolveHV||u.exports._convolveHV;e(l,i,c)?v(j,P,R,i,c,g,f,1):(v(j,P,R,i,c,g,f,0),a(x,g,f));var F=new Uint32Array(x.buffer);return F.set(new Uint32Array(this.__memory.buffer,0,f*g)),x}},{"./resize_filter_gen":6}],9:[function(r,A,I){A.exports={name:"unsharp_mask",fn:r("./unsharp_mask"),wasm_fn:r("./unsharp_mask_wasm"),wasm_src:r("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(r,A,I){var p=r("glur/mono16");function e(a,n,s){for(var o=n*s,t=new Uint16Array(o),l,i,c,g,f=0;f<o;f++)l=a[4*f],i=a[4*f+1],c=a[4*f+2],g=l>=i&&l>=c?l:i>=c&&i>=l?i:c,t[f]=g<<8;return t}A.exports=function(a,n,s,o,t,l){var i,c,g,f,m;if(!(o===0||t<.5)){t>2&&(t=2);var C=e(a,n,s),Q=new Uint16Array(C);p(Q,n,s,t);for(var _=o/100*4096+.5|0,x=l<<8,D=n*s,b=0;b<D;b++)i=C[b],f=i-Q[b],Math.abs(f)>=x&&(c=i+(_*f+2048>>12),c=c>65280?65280:c,c=c<0?0:c,i=i!==0?i:1,g=(c<<12)/i|0,m=b*4,a[m]=a[m]*g+2048>>12,a[m+1]=a[m+1]*g+2048>>12,a[m+2]=a[m+2]*g+2048>>12)}}},{"glur/mono16":18}],11:[function(r,A,I){A.exports=function(p,e,a,n,s,o){if(!(n===0||s<.5)){s>2&&(s=2);var t=e*a,l=t*4,i=t*2,c=t*2,g=Math.max(e,a)*4,f=8*4,m=0,C=l,Q=C+i,_=Q+c,x=_+c,D=x+g,b=this.__instance("unsharp_mask",l+i+c*2+g+f,{exp:Math.exp}),w=new Uint32Array(p.buffer),U=new Uint32Array(this.__memory.buffer);U.set(w);var M=b.exports.hsv_v16||b.exports._hsv_v16;M(m,C,e,a),M=b.exports.blurMono16||b.exports._blurMono16,M(C,Q,_,x,D,e,a,s),M=b.exports.unsharp||b.exports._unsharp,M(m,m,C,Q,e,a,n,o),w.set(new Uint32Array(this.__memory.buffer,0,t))}}},{}],12:[function(r,A,I){A.exports="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"},{}],13:[function(r,A,I){var p=100;function e(a,n){this.create=a,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=n||2e3}e.prototype.acquire=function(){var a=this,n;return this.available.length!==0?n=this.available.pop():(n=this.create(),n.id=this.lastId++,n.release=function(){return a.release(n)}),this.acquired[n.id]=n,n},e.prototype.release=function(a){var n=this;delete this.acquired[a.id],a.lastUsed=Date.now(),this.available.push(a),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return n.gc()},p))},e.prototype.gc=function(){var a=this,n=Date.now();this.available=this.available.filter(function(s){return n-s.lastUsed>a.idle?(s.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return a.gc()},p):this.timeoutId=0},A.exports=e},{}],14:[function(r,A,I){var p=2;A.exports=function(e,a,n,s,o,t){var l=n/e,i=s/a,c=(2*t+p+1)/o;if(c>.5)return[[n,s]];var g=Math.ceil(Math.log(Math.min(l,i))/Math.log(c));if(g<=1)return[[n,s]];for(var f=[],m=0;m<g;m++){var C=Math.round(Math.pow(Math.pow(e,g-m-1)*Math.pow(n,m+1),1/g)),Q=Math.round(Math.pow(Math.pow(a,g-m-1)*Math.pow(s,m+1),1/g));f.push([C,Q])}return f}},{}],15:[function(r,A,I){var p=1e-5;function e(n){var s=Math.round(n);return Math.abs(n-s)<p?s:Math.floor(n)}function a(n){var s=Math.round(n);return Math.abs(n-s)<p?s:Math.ceil(n)}A.exports=function(n){var s=n.toWidth/n.width,o=n.toHeight/n.height,t=e(n.srcTileSize*s)-2*n.destTileBorder,l=e(n.srcTileSize*o)-2*n.destTileBorder;if(t<1||l<1)throw new Error("Internal error in pica: target tile width/height is too small.");var i,c,g,f,m,C,Q=[],_;for(f=0;f<n.toHeight;f+=l)for(g=0;g<n.toWidth;g+=t)i=g-n.destTileBorder,i<0&&(i=0),m=g+t+n.destTileBorder-i,i+m>=n.toWidth&&(m=n.toWidth-i),c=f-n.destTileBorder,c<0&&(c=0),C=f+l+n.destTileBorder-c,c+C>=n.toHeight&&(C=n.toHeight-c),_={toX:i,toY:c,toWidth:m,toHeight:C,toInnerX:g,toInnerY:f,toInnerWidth:t,toInnerHeight:l,offsetX:i/s-e(i/s),offsetY:c/o-e(c/o),scaleX:s,scaleY:o,x:e(i/s),y:e(c/o),width:a(m/s),height:a(C/o)},Q.push(_);return Q}},{}],16:[function(r,A,I){function p(e){return Object.prototype.toString.call(e)}A.exports.isCanvas=function(e){var a=p(e);return a==="[object HTMLCanvasElement]"||a==="[object OffscreenCanvas]"||a==="[object Canvas]"},A.exports.isImage=function(e){return p(e)==="[object HTMLImageElement]"},A.exports.isImageBitmap=function(e){return p(e)==="[object ImageBitmap]"},A.exports.limiter=function(e){var a=0,n=[];function s(){a<e&&n.length&&(a++,n.shift()())}return function(o){return new Promise(function(t,l){n.push(function(){o().then(function(i){t(i),a--,s()},function(i){l(i),a--,s()})}),s()})}},A.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},A.exports.cib_support=function(e){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var a=e(100,100);return createImageBitmap(a,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(n){var s=n.width===10;return n.close(),a=null,s})}).catch(function(){return!1})},A.exports.worker_offscreen_canvas_support=function(){return new Promise(function(e,a){if(typeof OffscreenCanvas>"u"){e(!1);return}function n(t){if(typeof createImageBitmap>"u"){t.postMessage(!1);return}Promise.resolve().then(function(){var l=new OffscreenCanvas(10,10),i=l.getContext("2d");return i.rect(0,0,1,1),createImageBitmap(l,0,0,1,1)}).then(function(){return t.postMessage(!0)},function(){return t.postMessage(!1)})}var s=btoa("(".concat(n.toString(),")(self);")),o=new Worker("data:text/javascript;base64,".concat(s));o.onmessage=function(t){return e(t.data)},o.onerror=a}).then(function(e){return e},function(){return!1})},A.exports.can_use_canvas=function(e){var a=!1;try{var n=e(2,1),s=n.getContext("2d"),o=s.createImageData(2,1);o.data[0]=12,o.data[1]=23,o.data[2]=34,o.data[3]=255,o.data[4]=45,o.data[5]=56,o.data[6]=67,o.data[7]=255,s.putImageData(o,0,0),o=null,o=s.getImageData(0,0,2,1),o.data[0]===12&&o.data[1]===23&&o.data[2]===34&&o.data[3]===255&&o.data[4]===45&&o.data[5]===56&&o.data[6]===67&&o.data[7]===255&&(a=!0)}catch{}return a},A.exports.cib_can_use_region=function(){return new Promise(function(e){if(typeof Image>"u"||typeof createImageBitmap>"u"){e(!1);return}var a=new Image;a.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",a.onload=function(){createImageBitmap(a,0,0,a.width,a.height).then(function(n){n.width===a.width&&n.height===a.height?e(!0):e(!1)},function(){return e(!1)})},a.onerror=function(){return e(!1)}})}},{}],17:[function(r,A,I){A.exports=function(){var p=r("./mathlib"),e;onmessage=function(a){var n=a.data.opts;if(!n.src&&n.srcBitmap){var s=new OffscreenCanvas(n.width,n.height),o=s.getContext("2d");o.drawImage(n.srcBitmap,0,0),n.src=o.getImageData(0,0,n.width,n.height).data,s.width=s.height=0,s=null,n.srcBitmap.close(),n.srcBitmap=null}e||(e=new p(a.data.features));var t=e.resizeAndUnsharp(n);postMessage({data:t},[t.buffer])}}},{"./mathlib":1}],18:[function(r,A,I){var p,e,a,n,s,o,t,l;function i(f){f<.5&&(f=.5);var m=Math.exp(.726*.726)/f,C=Math.exp(-m),Q=Math.exp(-2*m),_=(1-C)*(1-C)/(1+2*m*C-Q);return p=_,e=_*(m-1)*C,a=_*(m+1)*C,n=-_*Q,s=2*C,o=-Q,t=(p+e)/(1-s-o),l=(a+n)/(1-s-o),new Float32Array([p,e,a,n,s,o,t,l])}function c(f,m,C,Q,_,x){var D,b,w,U,M,R,G,j,P,H,u,B,d,E;for(P=0;P<x;P++){for(R=P*_,G=P,j=0,D=f[R],M=D*Q[6],U=M,u=Q[0],B=Q[1],d=Q[4],E=Q[5],H=0;H<_;H++)b=f[R],w=b*u+D*B+U*d+M*E,M=U,U=w,D=b,C[j]=U,j++,R++;for(R--,j--,G+=x*(_-1),D=f[R],M=D*Q[7],U=M,b=D,u=Q[2],B=Q[3],H=_-1;H>=0;H--)w=b*u+D*B+U*d+M*E,M=U,U=w,D=b,b=f[R],m[G]=C[j]+U,R--,j--,G-=x}}function g(f,m,C,Q){if(Q){var _=new Uint16Array(f.length),x=new Float32Array(Math.max(m,C)),D=i(Q);c(f,_,x,D,m,C),c(_,f,x,D,C,m)}}A.exports=g},{}],19:[function(r,A,I){var p=r("object-assign"),e=r("./lib/base64decode"),a=r("./lib/wa_detect"),n={js:!0,wasm:!0};function s(o){if(!(this instanceof s))return new s(o);var t=p({},n,o||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=a,s.prototype.use=function(o){return this.__modules[o.name]=o,this.options.wasm&&this.has_wasm()&&o.wasm_fn?this[o.name]=o.wasm_fn:this[o.name]=o.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var o=this;return this.__init_promise=Promise.all(Object.keys(o.__modules).map(function(t){var l=o.__modules[t];return!o.options.wasm||!o.has_wasm()||!l.wasm_fn||o.__wasm[t]?null:WebAssembly.compile(o.__base64decode(l.wasm_src)).then(function(i){o.__wasm[t]=i})})).then(function(){return o}),this.__init_promise},s.prototype.__base64decode=e,s.prototype.__reallocate=function(o){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(o/(64*1024))}),this.__memory;var t=this.__memory.buffer.byteLength;return t<o&&this.__memory.grow(Math.ceil((o-t)/(64*1024))),this.__memory},s.prototype.__instance=function(o,t,l){if(t&&this.__reallocate(t),!this.__wasm[o]){var i=this.__modules[o];this.__wasm[o]=new WebAssembly.Module(this.__base64decode(i.wasm_src))}if(!this.__cache[o]){var c={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[o]=new WebAssembly.Instance(this.__wasm[o],{env:p(c,l||{})})}return this.__cache[o]},s.prototype.__align=function(o,t){t=t||8;var l=o%t;return o+(l?t-l:0)},A.exports=s},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(r,A,I){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";A.exports=function(e){for(var a=e.replace(/[\r\n=]/g,""),n=a.length,s=new Uint8Array(n*3>>2),o=0,t=0,l=0;l<n;l++)l%4===0&&l&&(s[t++]=o>>16&255,s[t++]=o>>8&255,s[t++]=o&255),o=o<<6|p.indexOf(a.charAt(l));var i=n%4*6;return i===0?(s[t++]=o>>16&255,s[t++]=o>>8&255,s[t++]=o&255):i===18?(s[t++]=o>>10&255,s[t++]=o>>2&255):i===12&&(s[t++]=o>>4&255),s}},{}],21:[function(r,A,I){var p;A.exports=function(){if(typeof p<"u"||(p=!1,typeof WebAssembly>"u"))return p;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),a=new WebAssembly.Module(e),n=new WebAssembly.Instance(a,{});return n.exports.test(4)!==0&&(p=!0),p}catch{}return p}},{}],22:[function(r,A,I){var p=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var t={},l=0;l<10;l++)t["_"+String.fromCharCode(l)]=l;var i=Object.getOwnPropertyNames(t).map(function(g){return t[g]});if(i.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(g){c[g]=g}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}A.exports=s()?Object.assign:function(o,t){for(var l,i=n(o),c,g=1;g<arguments.length;g++){l=Object(arguments[g]);for(var f in l)e.call(l,f)&&(i[f]=l[f]);if(p){c=p(l);for(var m=0;m<c.length;m++)a.call(l,c[m])&&(i[c[m]]=l[c[m]])}}return i}},{}],23:[function(r,A,I){var p=arguments[3],e=arguments[4],a=arguments[5],n=JSON.stringify;A.exports=function(s,o){for(var t,l=Object.keys(a),i=0,c=l.length;i<c;i++){var g=l[i],f=a[g].exports;if(f===s||f&&f.default===s){t=g;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var m={},i=0,c=l.length;i<c;i++){var g=l[i];m[g]=g}e[t]=["function(require,module,exports){"+s+"(self); }",m]}var C=Math.floor(Math.pow(16,8)*Math.random()).toString(16),Q={};Q[t]=t,e[C]=["function(require,module,exports){var f = require("+n(t)+");(f.default ? f.default : f)(self);}",Q];var _={};x(C);function x(R){_[R]=!0;for(var G in e[R][1]){var j=e[R][1][G];_[j]||x(j)}}var D="("+p+")({"+Object.keys(_).map(function(R){return n(R)+":["+e[R][0]+","+n(e[R][1])+"]"}).join(",")+"},{},["+n(C)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([D],{type:"text/javascript"});if(o&&o.bare)return w;var U=b.createObjectURL(w),M=new Worker(U);return M.objectURL=U,M}},{}],"/index.js":[function(r,A,I){function p(u,B){return o(u)||s(u,B)||a(u,B)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(u,B){if(u){if(typeof u=="string")return n(u,B);var d=Object.prototype.toString.call(u).slice(8,-1);if(d==="Object"&&u.constructor&&(d=u.constructor.name),d==="Map"||d==="Set")return Array.from(u);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return n(u,B)}}function n(u,B){(B==null||B>u.length)&&(B=u.length);for(var d=0,E=new Array(B);d<B;d++)E[d]=u[d];return E}function s(u,B){var d=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(d!=null){var E=[],v=!0,F=!1,k,O;try{for(d=d.call(u);!(v=(k=d.next()).done)&&(E.push(k.value),!(B&&E.length===B));v=!0);}catch(S){F=!0,O=S}finally{try{!v&&d.return!=null&&d.return()}finally{if(F)throw O}}return E}}function o(u){if(Array.isArray(u))return u}var t=r("object-assign"),l=r("webworkify"),i=r("./lib/mathlib"),c=r("./lib/pool"),g=r("./lib/utils"),f=r("./lib/worker"),m=r("./lib/stepper"),C=r("./lib/tiler"),Q=r("./lib/mm_resize/resize_filter_info"),_={},x=!1;try{typeof navigator<"u"&&navigator.userAgent&&(x=navigator.userAgent.indexOf("Safari")>=0)}catch{}var D=1;typeof navigator<"u"&&(D=Math.min(navigator.hardwareConcurrency||1,4));var b={tile:1024,concurrency:D,features:["js","wasm","ww"],idle:2e3,createCanvas:function(u,B){var d=document.createElement("canvas");return d.width=u,d.height=B,d}},w={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},U=!1,M=!1,R=!1,G=!1,j=!1;function P(){return{value:l(f),destroy:function(){if(this.value.terminate(),typeof window<"u"){var u=window.URL||window.webkitURL||window.mozURL||window.msURL;u&&u.revokeObjectURL&&this.value.objectURL&&u.revokeObjectURL(this.value.objectURL)}}}}function H(u){if(!(this instanceof H))return new H(u);this.options=t({},b,u||{});var B="lk_".concat(this.options.concurrency);this.__limit=_[B]||g.limiter(this.options.concurrency),_[B]||(_[B]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}H.prototype.init=function(){var u=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),U=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?M=!0:this.debug("ImageBitmap does not support .close(), disabled"));var B=this.options.features.slice();if(B.indexOf("all")>=0&&(B=["cib","wasm","js","ww"]),this.__requested_features=B,this.__mathlib=new i(B),B.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var d=r("webworkify")(function(){});d.terminate(),this.features.ww=!0;var E="wp_".concat(JSON.stringify(this.options));_[E]?this.__workersPool=_[E]:(this.__workersPool=new c(P,this.options.idle),_[E]=this.__workersPool)}catch{}var v=this.__mathlib.init().then(function(S){t(u.features,S.features)}),F;M?F=g.cib_support(this.options.createCanvas).then(function(S){if(u.features.cib&&B.indexOf("cib")<0){u.debug("createImageBitmap() resize supported, but disabled by config");return}B.indexOf("cib")>=0&&(u.features.cib=S)}):F=Promise.resolve(!1),R=g.can_use_canvas(this.options.createCanvas);var k;M&&U&&B.indexOf("ww")!==-1?k=g.worker_offscreen_canvas_support():k=Promise.resolve(!1),k=k.then(function(S){G=S});var O=g.cib_can_use_region().then(function(S){j=S});return this.__initPromise=Promise.all([v,F,k,O]).then(function(){return u}),this.__initPromise},H.prototype.__invokeResize=function(u,B){var d=this;return B.__mathCache=B.__mathCache||{},Promise.resolve().then(function(){return d.features.ww?new Promise(function(E,v){var F=d.__workersPool.acquire();B.cancelToken&&B.cancelToken.catch(function(O){return v(O)}),F.value.onmessage=function(O){F.release(),O.data.err?v(O.data.err):E(O.data)};var k=[];u.src&&k.push(u.src.buffer),u.srcBitmap&&k.push(u.srcBitmap),F.value.postMessage({opts:u,features:d.__requested_features,preload:{wasm_nodule:d.__mathlib.__}},k)}):{data:d.__mathlib.resizeAndUnsharp(u,B.__mathCache)}})},H.prototype.__extractTileData=function(u,B,d,E,v){if(this.features.ww&&G&&(g.isCanvas(B)||j))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(E.srcImageBitmap||B,u.x,u.y,u.width,u.height).then(function(O){return v.srcBitmap=O,v});if(g.isCanvas(B))return E.srcCtx||(E.srcCtx=B.getContext("2d")),this.debug("Get tile pixel data"),v.src=E.srcCtx.getImageData(u.x,u.y,u.width,u.height).data,v;this.debug("Draw tile imageBitmap/image to temporary canvas");var F=this.options.createCanvas(u.width,u.height),k=F.getContext("2d");return k.globalCompositeOperation="copy",k.drawImage(E.srcImageBitmap||B,u.x,u.y,u.width,u.height,0,0,u.width,u.height),this.debug("Get tile pixel data"),v.src=k.getImageData(0,0,u.width,u.height).data,F.width=F.height=0,v},H.prototype.__landTileData=function(u,B,d){var E;if(this.debug("Convert raw rgba tile result to ImageData"),B.bitmap)return d.toCtx.drawImage(B.bitmap,u.toX,u.toY),null;if(U)E=new ImageData(new Uint8ClampedArray(B.data),u.toWidth,u.toHeight);else if(E=d.toCtx.createImageData(u.toWidth,u.toHeight),E.data.set)E.data.set(B.data);else for(var v=E.data.length-1;v>=0;v--)E.data[v]=B.data[v];return this.debug("Draw tile"),x?d.toCtx.putImageData(E,u.toX,u.toY,u.toInnerX-u.toX,u.toInnerY-u.toY,u.toInnerWidth+1e-5,u.toInnerHeight+1e-5):d.toCtx.putImageData(E,u.toX,u.toY,u.toInnerX-u.toX,u.toInnerY-u.toY,u.toInnerWidth,u.toInnerHeight),null},H.prototype.__tileAndResize=function(u,B,d){var E=this,v={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},F=function(k){return E.__limit(function(){if(d.canceled)return d.cancelToken;var O={width:k.width,height:k.height,toWidth:k.toWidth,toHeight:k.toHeight,scaleX:k.scaleX,scaleY:k.scaleY,offsetX:k.offsetX,offsetY:k.offsetY,filter:d.filter,unsharpAmount:d.unsharpAmount,unsharpRadius:d.unsharpRadius,unsharpThreshold:d.unsharpThreshold};return E.debug("Invoke resize math"),Promise.resolve(O).then(function(S){return E.__extractTileData(k,u,d,v,S)}).then(function(S){return E.debug("Invoke resize math"),E.__invokeResize(S,d)}).then(function(S){return d.canceled?d.cancelToken:(v.srcImageData=null,E.__landTileData(k,S,v))})})};return Promise.resolve().then(function(){if(v.toCtx=B.getContext("2d"),g.isCanvas(u))return null;if(g.isImageBitmap(u))return v.srcImageBitmap=u,v.isImageBitmapReused=!0,null;if(g.isImage(u))return M?(E.debug("Decode image via createImageBitmap"),createImageBitmap(u).then(function(k){v.srcImageBitmap=k}).catch(function(k){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(d.canceled)return d.cancelToken;E.debug("Calculate tiles");var k=C({width:d.width,height:d.height,srcTileSize:E.options.tile,toWidth:d.toWidth,toHeight:d.toHeight,destTileBorder:d.__destTileBorder}),O=k.map(function(T){return F(T)});function S(T){T.srcImageBitmap&&(T.isImageBitmapReused||T.srcImageBitmap.close(),T.srcImageBitmap=null)}return E.debug("Process tiles"),Promise.all(O).then(function(){return E.debug("Finished!"),S(v),B},function(T){throw S(v),T})})},H.prototype.__processStages=function(u,B,d,E){var v=this;if(E.canceled)return E.cancelToken;var F=u.shift(),k=p(F,2),O=k[0],S=k[1],T=u.length===0,q;T||Q.q2f.indexOf(E.filter)<0?q=E.filter:E.filter==="box"?q="box":q="hamming",E=t({},E,{toWidth:O,toHeight:S,filter:q});var L;return T||(L=this.options.createCanvas(O,S)),this.__tileAndResize(B,T?d:L,E).then(function(){return T?d:(E.width=O,E.height=S,v.__processStages(u,L,d,E))}).then(function(et){return L&&(L.width=L.height=0),et})},H.prototype.__resizeViaCreateImageBitmap=function(u,B,d){var E=this,v=B.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(u,{resizeWidth:d.toWidth,resizeHeight:d.toHeight,resizeQuality:g.cib_quality_name(Q.f2q[d.filter])}).then(function(F){if(d.canceled)return d.cancelToken;if(!d.unsharpAmount)return v.drawImage(F,0,0),F.close(),v=null,E.debug("Finished!"),B;E.debug("Unsharp result");var k=E.options.createCanvas(d.toWidth,d.toHeight),O=k.getContext("2d");O.drawImage(F,0,0),F.close();var S=O.getImageData(0,0,d.toWidth,d.toHeight);return E.__mathlib.unsharp_mask(S.data,d.toWidth,d.toHeight,d.unsharpAmount,d.unsharpRadius,d.unsharpThreshold),v.putImageData(S,0,0),k.width=k.height=0,S=O=k=v=null,E.debug("Finished!"),B})},H.prototype.resize=function(u,B,d){var E=this;this.debug("Start resize...");var v=t({},w);if(isNaN(d)?d&&(v=t(v,d)):v=t(v,{quality:d}),v.toWidth=B.width,v.toHeight=B.height,v.width=u.naturalWidth||u.width,v.height=u.naturalHeight||u.height,Object.prototype.hasOwnProperty.call(v,"quality")){if(v.quality<0||v.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(v.quality));v.filter=Q.q2f[v.quality]}if(B.width===0||B.height===0)return Promise.reject(new Error("Invalid output size: ".concat(B.width,"x").concat(B.height)));v.unsharpRadius>2&&(v.unsharpRadius=2),v.canceled=!1,v.cancelToken&&(v.cancelToken=v.cancelToken.then(function(k){throw v.canceled=!0,k},function(k){throw v.canceled=!0,k}));var F=3;return v.__destTileBorder=Math.ceil(Math.max(F,2.5*v.unsharpRadius|0)),this.init().then(function(){if(v.canceled)return v.cancelToken;if(E.features.cib){if(Q.q2f.indexOf(v.filter)>=0)return E.__resizeViaCreateImageBitmap(u,B,v);E.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!R){var k=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw k.code="ERR_GET_IMAGE_DATA",k}var O=m(v.width,v.height,v.toWidth,v.toHeight,E.options.tile,v.__destTileBorder);return E.__processStages(O,u,B,v)})},H.prototype.resizeBuffer=function(u){var B=this,d=t({},w,u);if(Object.prototype.hasOwnProperty.call(d,"quality")){if(d.quality<0||d.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(d.quality));d.filter=Q.q2f[d.quality]}return this.init().then(function(){return B.__mathlib.resizeAndUnsharp(d)})},H.prototype.toBlob=function(u,B,d){return B=B||"image/png",new Promise(function(E){if(u.toBlob){u.toBlob(function(S){return E(S)},B,d);return}if(u.convertToBlob){E(u.convertToBlob({type:B,quality:d}));return}for(var v=atob(u.toDataURL(B,d).split(",")[1]),F=v.length,k=new Uint8Array(F),O=0;O<F;O++)k[O]=v.charCodeAt(O);E(new Blob([k],{type:B}))})},H.prototype.debug=function(){},A.exports=H},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(ot);var Ct=ot.exports;const Qt=Kt(Ct);function At(y,h){var r=Object.keys(y);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(y);h&&(A=A.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),r.push.apply(r,A)}return r}function V(y){for(var h=1;h<arguments.length;h++){var r=arguments[h]!=null?arguments[h]:{};h%2?At(Object(r),!0).forEach(function(A){Dt(y,A,r[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(A){Object.defineProperty(y,A,Object.getOwnPropertyDescriptor(r,A))})}return y}function _t(y,h){if(!(y instanceof h))throw new TypeError("Cannot call a class as a function")}function st(y,h){for(var r=0;r<h.length;r++){var A=h[r];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,ut(A.key),A)}}function xt(y,h,r){return h&&st(y.prototype,h),r&&st(y,r),Object.defineProperty(y,"prototype",{writable:!1}),y}function Dt(y,h,r){return h=ut(h),h in y?Object.defineProperty(y,h,{value:r,enumerable:!0,configurable:!0,writable:!0}):y[h]=r,y}function $(){return $=Object.assign?Object.assign.bind():function(y){for(var h=1;h<arguments.length;h++){var r=arguments[h];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(y[A]=r[A])}return y},$.apply(this,arguments)}function Ut(y,h){if(typeof y!="object"||y===null)return y;var r=y[Symbol.toPrimitive];if(r!==void 0){var A=r.call(y,h||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(y)}function ut(y){var h=Ut(y,"string");return typeof h=="symbol"?h:String(h)}var ht={exports:{}};(function(y){typeof window>"u"||function(h){var r=h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype,A=h.Blob&&function(){try{return!!new Blob}catch{return!1}}(),I=A&&h.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),p=h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder||h.MSBlobBuilder,e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(A||p)&&h.atob&&h.ArrayBuffer&&h.Uint8Array&&function(n){var s,o,t,l,i,c,g,f,m;if(s=n.match(e),!s)throw new Error("invalid data URI");for(o=s[2]?s[1]:"text/plain"+(s[3]||";charset=US-ASCII"),t=!!s[4],l=n.slice(s[0].length),t?i=atob(l):i=decodeURIComponent(l),c=new ArrayBuffer(i.length),g=new Uint8Array(c),f=0;f<i.length;f+=1)g[f]=i.charCodeAt(f);return A?new Blob([I?g:c],{type:o}):(m=new p,m.append(c),m.getBlob(o))};h.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(n,s,o){var t=this;setTimeout(function(){o&&r.toDataURL&&a?n(a(t.toDataURL(s,o))):n(t.mozGetAsFile("blob",s))})}:r.toDataURL&&a&&(r.msToBlob?r.toBlob=function(n,s,o){var t=this;setTimeout(function(){(s&&s!=="image/png"||o)&&r.toDataURL&&a?n(a(t.toDataURL(s,o))):n(t.msToBlob(s))})}:r.toBlob=function(n,s,o){var t=this;setTimeout(function(){n(a(t.toDataURL(s,o)))})})),y.exports?y.exports=a:h.dataURLtoBlob=a}(window)})(ht);var ct=ht.exports,Mt=function(y){return typeof Blob>"u"?!1:y instanceof Blob||Object.prototype.toString.call(y)==="[object Blob]"},lt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Rt=typeof window<"u"&&typeof window.document<"u",W=Rt?window:{},tt=function(y){return y>0&&y<1/0},kt=Array.prototype.slice;function it(y){return Array.from?Array.from(y):kt.call(y)}var jt=/^image\/.+$/;function nt(y){return jt.test(y)}function Gt(y){var h=nt(y)?y.substr(6):"";return h==="jpeg"&&(h="jpg"),".".concat(h)}var gt=String.fromCharCode;function Ht(y,h,r){var A="",I;for(r+=h,I=h;I<r;I+=1)A+=gt(y.getUint8(I));return A}var Ft=W.btoa;function ft(y,h){for(var r=[],A=8192,I=new Uint8Array(y);I.length>0;)r.push(gt.apply(null,it(I.subarray(0,A)))),I=I.subarray(A);return"data:".concat(h,";base64,").concat(Ft(r.join("")))}function Ot(y){var h=new DataView(y),r;try{var A,I,p;if(h.getUint8(0)===255&&h.getUint8(1)===216)for(var e=h.byteLength,a=2;a+1<e;){if(h.getUint8(a)===255&&h.getUint8(a+1)===225){I=a;break}a+=1}if(I){var n=I+4,s=I+10;if(Ht(h,n,4)==="Exif"){var o=h.getUint16(s);if(A=o===18761,(A||o===19789)&&h.getUint16(s+2,A)===42){var t=h.getUint32(s+4,A);t>=8&&(p=s+t)}}}if(p){var l=h.getUint16(p,A),i,c;for(c=0;c<l;c+=1)if(i=p+c*12+2,h.getUint16(i,A)===274){i+=8,r=h.getUint16(i,A),h.setUint16(i,1,A);break}}}catch{r=1}return r}function Pt(y){var h=0,r=1,A=1;switch(y){case 2:r=-1;break;case 3:h=-180;break;case 4:A=-1;break;case 5:h=90,A=-1;break;case 6:h=90;break;case 7:h=90,r=-1;break;case 8:h=-90;break}return{rotate:h,scaleX:r,scaleY:A}}var St=/\.\d*(?:0|9){12}\d*$/;function mt(y){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return St.test(y)?Math.round(y*h)/h:y}function K(y){var h=y.aspectRatio,r=y.height,A=y.width,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",p=tt(A),e=tt(r);if(p&&e){var a=r*h;(I==="contain"||I==="none")&&a>A||I==="cover"&&a<A?r=A/h:A=r*h}else p?r=A/h:e&&(A=r*h);return{width:A,height:r}}function Tt(y){for(var h=it(new Uint8Array(y)),r=h.length,A=[],I=0;I+3<r;){var p=h[I],e=h[I+1];if(p===255&&e===218)break;if(p===255&&e===216)I+=2;else{var a=h[I+2]*256+h[I+3],n=I+a+2,s=h.slice(I,n);A.push(s),I=n}}return A.reduce(function(o,t){return t[0]===255&&t[1]===225?o.concat(t):o},[])}function Lt(y,h){var r=it(new Uint8Array(y));if(r[2]!==255||r[3]!==224)return y;var A=r[4]*256+r[5],I=[255,216].concat(h,r.slice(4+A));return new Uint8Array(I)}var Wt=W.ArrayBuffer,at=W.FileReader,Y=W.URL||W.webkitURL,qt=/\.\w+$/,zt=W.Compressor,Yt=function(){function y(h,r){_t(this,y),this.file=h,this.exif=[],this.image=new Image,this.options=V(V({},lt),r),this.aborted=!1,this.result=null,this.init()}return xt(y,[{key:"init",value:function(){var h=this,r=this.file,A=this.options;if(!Mt(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var I=r.type;if(!nt(I)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!Y||!at){this.fail(new Error("The current browser does not support image compression."));return}Wt||(A.checkOrientation=!1,A.retainExif=!1);var p=I==="image/jpeg",e=p&&A.checkOrientation,a=p&&A.retainExif;if(Y&&!e&&!a)this.load({url:Y.createObjectURL(r)});else{var n=new at;this.reader=n,n.onload=function(s){var o=s.target,t=o.result,l={},i=1;e&&(i=Ot(t),i>1&&$(l,Pt(i))),a&&(h.exif=Tt(t)),e||a?!Y||i>1?l.url=ft(t,I):l.url=Y.createObjectURL(r):l.url=t,h.load(l)},n.onabort=function(){h.fail(new Error("Aborted to read the image with FileReader."))},n.onerror=function(){h.fail(new Error("Failed to read the image with FileReader."))},n.onloadend=function(){h.reader=null},e||a?n.readAsArrayBuffer(r):n.readAsDataURL(r)}}},{key:"load",value:function(h){var r=this,A=this.file,I=this.image;I.onload=function(){r.draw(V(V({},h),{},{naturalWidth:I.naturalWidth,naturalHeight:I.naturalHeight}))},I.onabort=function(){r.fail(new Error("Aborted to load the image."))},I.onerror=function(){r.fail(new Error("Failed to load the image."))},W.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(W.navigator.userAgent)&&(I.crossOrigin="anonymous"),I.alt=A.name,I.src=h.url}},{key:"draw",value:function(h){var r=this,A=h.naturalWidth,I=h.naturalHeight,p=h.rotate,e=p===void 0?0:p,a=h.scaleX,n=a===void 0?1:a,s=h.scaleY,o=s===void 0?1:s,t=this.file,l=this.image,i=this.options,c=document.createElement("canvas"),g=c.getContext("2d"),f=Math.abs(e)%180===90,m=(i.resize==="contain"||i.resize==="cover")&&tt(i.width)&&tt(i.height),C=Math.max(i.maxWidth,0)||1/0,Q=Math.max(i.maxHeight,0)||1/0,_=Math.max(i.minWidth,0)||0,x=Math.max(i.minHeight,0)||0,D=A/I,b=i.width,w=i.height;if(f){var U=[Q,C];C=U[0],Q=U[1];var M=[x,_];_=M[0],x=M[1];var R=[w,b];b=R[0],w=R[1]}m&&(D=b/w);var G=K({aspectRatio:D,width:C,height:Q},"contain");C=G.width,Q=G.height;var j=K({aspectRatio:D,width:_,height:x},"cover");if(_=j.width,x=j.height,m){var P=K({aspectRatio:D,width:b,height:w},i.resize);b=P.width,w=P.height}else{var H=K({aspectRatio:D,width:b,height:w}),u=H.width;b=u===void 0?A:u;var B=H.height;w=B===void 0?I:B}b=Math.floor(mt(Math.min(Math.max(b,_),C))),w=Math.floor(mt(Math.min(Math.max(w,x),Q)));var d=-b/2,E=-w/2,v=b,F=w,k=[];if(m){var O=0,S=0,T=A,q=I,L=K({aspectRatio:D,width:A,height:I},{contain:"cover",cover:"contain"}[i.resize]);T=L.width,q=L.height,O=(A-T)/2,S=(I-q)/2,k.push(O,S,T,q)}if(k.push(d,E,v,F),f){var et=[w,b];b=et[0],w=et[1]}c.width=b,c.height=w,nt(i.mimeType)||(i.mimeType=t.type);var It="transparent";t.size>i.convertSize&&i.convertTypes.indexOf(i.mimeType)>=0&&(i.mimeType="image/jpeg");var pt=i.mimeType==="image/jpeg";if(pt&&(It="#fff"),g.fillStyle=It,g.fillRect(0,0,b,w),i.beforeDraw&&i.beforeDraw.call(this,g,c),!this.aborted&&(g.save(),g.translate(b/2,w/2),g.rotate(e*Math.PI/180),g.scale(n,o),g.drawImage.apply(g,[l].concat(k)),g.restore(),i.drew&&i.drew.call(this,g,c),!this.aborted)){var wt=function(Z){if(!r.aborted){var Bt=function(X){return r.done({naturalWidth:A,naturalHeight:I,result:X})};if(Z&&pt&&i.retainExif&&r.exif&&r.exif.length>0){var vt=function(X){return Bt(ct(ft(Lt(X,r.exif),i.mimeType)))};if(Z.arrayBuffer)Z.arrayBuffer().then(vt).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var N=new at;r.reader=N,N.onload=function(X){var Jt=X.target;vt(Jt.result)},N.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},N.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},N.onloadend=function(){r.reader=null},N.readAsArrayBuffer(Z)}}else Bt(Z)}};c.toBlob?c.toBlob(wt,i.mimeType,i.quality):wt(ct(c.toDataURL(i.mimeType,i.quality)))}}},{key:"done",value:function(h){var r=h.naturalWidth,A=h.naturalHeight,I=h.result,p=this.file,e=this.image,a=this.options;if(Y&&e.src.indexOf("blob:")===0&&Y.revokeObjectURL(e.src),I)if(a.strict&&!a.retainExif&&I.size>p.size&&a.mimeType===p.type&&!(a.width>r||a.height>A||a.minWidth>r||a.minHeight>A||a.maxWidth<r||a.maxHeight<A))I=p;else{var n=new Date;I.lastModified=n.getTime(),I.lastModifiedDate=n,I.name=p.name,I.name&&I.type!==p.type&&(I.name=I.name.replace(qt,Gt(I.type)))}else I=p;this.result=I,a.success&&a.success.call(this,I)}},{key:"fail",value:function(h){var r=this.options;if(r.error)r.error.call(this,h);else throw h}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=zt,y}},{key:"setDefaults",value:function(h){$(lt,h)}}]),y}();function Nt(){return window.navigator.brave!=null?window.navigator.brave.isBrave.name=="isBrave":!1}let dt;Et=z.forwardRef((y,h)=>{const{imageSrc:r,imageType:A,onImageCropped:I,width:p,height:e}=y,[a,n]=z.useState({x:0,y:0}),[s,o]=z.useState(1),[t,l]=z.useState(null);z.useState(null);const i=z.useCallback((x,D)=>{l(D)},[]);z.useImperativeHandle(h,()=>({async showCroppedImage(){try{if(r){const x=await C(r,t),D=await f(x),b=Nt()?await g(x):await c(D),w=await f(b);I(w)}else return"Nothing"}catch(x){console.error(x)}}}));async function c(x){const D=Qt();let b=await Q(x);const w=document.createElement("canvas");return w.height=128,w.width=128,new Promise(U=>{U(D.resize(b,w,{unsharpAmount:100,unsharpRadius:.7,unsharpThreshold:2}).then(M=>D.toBlob(M,A,1)))})}async function g(x){return new Promise((D,b)=>{new Yt(x,{quality:1,strict:!0,maxWidth:128,maxHeight:128,checkOrientation:!1,success:D,error:b})})}const f=async x=>await m(x),m=x=>new Promise((D,b)=>{const w=new FileReader;w.readAsDataURL(x),w.onload=()=>D(w.result),w.onerror=U=>b(U)});async function C(x,D){const b=await Q(x),w=document.createElement("canvas");w.width=D.width,w.height=D.height;const U=w.getContext("2d"),M="none.jpg";return U.drawImage(b,D.x,D.y,D.width,D.height,0,0,D.width,D.height),new Promise((R,G)=>{w.toBlob(j=>{R(new File([j],M,{type:A,lastModified:Date.now()}))},A,1)})}const Q=x=>new Promise((D,b)=>{const w=new Image;w.addEventListener("load",()=>D(w)),w.addEventListener("error",U=>b(U)),w.setAttribute("crossOrigin","anonymous"),w.src=x}),_=x=>{o(x)};return J.jsx(z.Fragment,{children:J.jsx(dt,{children:J.jsx(Zt,{image:r,crop:a,zoom:s,aspect:1,onCropChange:n,onCropComplete:i,onZoomChange:_,style:{containerStyle:{width:p||"250px",height:e||"250px",position:"relative",borderRadius:"20px"}}})})})}),dt=Xt.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `,yt=({title:y})=>{const h=async()=>{await ee()};return J.jsxs(Vt,{display:"flex",flexDirection:"row",justifyContent:"center",gap:"spacing-xxxs",children:[J.jsx(bt,{variant:"bes-semibold",color:"text-tertiary",children:y}),J.jsx(bt,{css:$t`
          cursor: pointer;
        `,variant:"bes-semibold",color:"text-brand-medium",onClick:h,children:"Import Token"})]})}});export{Et as I,ie as __tla,yt as a};
