import{e1 as i,en as R,ff as Ee,ej as k,hZ as Te,h_ as Fe,fe as Oe,d_ as v,eh as $e,e2 as u,gZ as ze,gX as qe,gW as B,el as W,ep as I,h$ as U,eo as Ae,hA as G,hf as Re,fP as Z,__tla as Be}from"./index-QxDpoTXm.js";import{u as We,__tla as Ie}from"./useGetChannelsList-D4VWm0Pn.js";import{u as Ue,I as Ge,__tla as Ze}from"./InfiniteScroll-K8trFFrO.js";import{_ as Je,a as Xe,i as He,b as J}from"./isObjectLike-CoQ2zMHe.js";import{S as Ke,__tla as Qe}from"./Search-3ZujBDWm.js";import{u as Ve,__tla as Ye}from"./useGetChannelCategories-BcJXNTIq.js";import{C as et,__tla as tt}from"./ChannelDetailsCard-C6r-2Jq1.js";import{u as at,__tla as rt}from"./VerifiedChannelTooltipContent-CarzuSkw.js";import{C as it,__tla as nt}from"./ContentLayout-C80ik9FJ.js";import"./notifSetting-DrLKauYy.js";import{__tla as st}from"./useMutation-DwUTqaVL.js";import{__tla as lt}from"./OptOut-uV6JAGRF.js";import{__tla as ot}from"./PushLogo-Bf63KExU.js";let X,ct=Promise.all([(()=>{try{return Be}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return tt}catch{}})(),(()=>{try{return rt}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return lt}catch{}})(),(()=>{try{return ot}catch{}})()]).then(async()=>{const H=e=>{const{svgProps:t,...a}=e;return i.jsx(R,{componentName:"CaretLeft",icon:i.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:i.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...a})},K=e=>{const{svgProps:t,...a}=e;return i.jsx(R,{componentName:"CaretRight",icon:i.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[i.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:i.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0_4239_16009",children:i.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...a})},Q=e=>e,V=({page:e,pageSize:t,query:a,chain:s,tag:r})=>Ee({method:"GET",url:`${k.apiUrl}/v1/channels/search`,params:{page:e,limit:t,query:a,...s?{filter:s}:{},...r?{tag:r}:{}}}).then(l=>Q(l.data)),Y=({pageSize:e,query:t,chain:a,tag:s})=>Ue({queryKey:[Te,t,a],initialPageParam:1,enabled:!!t,queryFn:({pageParam:r})=>V({pageSize:e,page:r,query:t,chain:a,tag:s}),getNextPageParam:({itemCount:r},l,n)=>(console.log(r,n,e,e*(n+1)>=r),e*(n+1)>=r?null:n+1)}),ee=({initialChain:e,initialCategory:t})=>{const[,a]=Fe(),{search:s}=Oe(),r=v.useMemo(()=>Object.fromEntries(new URLSearchParams(s).entries()),[s]),l=n=>{const o=Object.entries({...r,...n}).reduce((h,[d,g])=>g?{...h,[d]:g}:h,{});a(o)};return v.useEffect(()=>{const n={};r.chain||(n.chain=e),r.category||(n.category=t),Object.keys(n).length&&l(n)},[]),{filters:{chain:(r==null?void 0:r.chain)||e,category:(r==null?void 0:r.category)||"",search:(r==null?void 0:r.search)||""},setFilter:l}};var te=Je,ae=function(){return te.Date.now()},re=ae,ie=/\s/;function ne(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var se=ne,le=se,oe=/^\s+/;function ce(e){return e&&e.slice(0,le(e)+1).replace(oe,"")}var he=ce,ue=Xe,de=He,ge="[object Symbol]";function fe(e){return typeof e=="symbol"||de(e)&&ue(e)==ge}var pe=fe,me=he,M=J,xe=pe,D=NaN,_e=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,je=parseInt;function we(e){if(typeof e=="number")return e;if(xe(e))return D;if(M(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=M(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=me(e);var a=ye.test(e);return a||ve.test(e)?je(e.slice(2),a?2:8):_e.test(e)?D:+e}var be=we,Se=J,S=re,E=be,Ce="Expected a function",Le=Math.max,Ne=Math.min;function Pe(e,t,a){var s,r,l,n,o,h,d=0,g=!1,m=!1,_=!0;if(typeof e!="function")throw new TypeError(Ce);t=E(t)||0,Se(a)&&(g=!!a.leading,m="maxWait"in a,l=m?Le(E(a.maxWait)||0,t):l,_="trailing"in a?!!a.trailing:_);function j(c){var f=s,b=r;return s=r=void 0,d=c,n=e.apply(b,f),n}function L(c){return d=c,o=setTimeout(x,t),g?j(c):n}function N(c){var f=c-h,b=c-d,A=t-f;return m?Ne(A,l-b):A}function w(c){var f=c-h,b=c-d;return h===void 0||f>=t||f<0||m&&b>=l}function x(){var c=S();if(w(c))return y(c);o=setTimeout(x,N(c))}function y(c){return o=void 0,_&&s?j(c):(s=r=void 0,n)}function Me(){o!==void 0&&clearTimeout(o),d=0,s=h=r=o=void 0}function De(){return o===void 0?n:y(S())}function P(){var c=S(),f=w(c);if(s=arguments,r=this,h=c,f){if(o===void 0)return L(h);if(m)return clearTimeout(o),o=setTimeout(x,t),j(h)}return o===void 0&&(o=setTimeout(x,t)),n}return P.cancel=Me,P.flush=De,P}var ke=Pe;let T,F,p,C,O,$,z,q;T=$e(ke),F=({filters:e,setFilter:t})=>{const[a,s]=v.useState(e.search),r=v.useCallback(T(l=>{t({search:l})},800),[t]);return v.useEffect(()=>{(e.search||a)&&r(a)},[a]),i.jsxs(u,{display:"flex",gap:"spacing-xs",flexDirection:{initial:"row",ml:"column"},width:"100%",children:[i.jsx(u,{width:"100%",children:i.jsx(ze,{icon:i.jsx(Ke,{}),onChange:l=>s(l.target.value),placeholder:"Search Web3 domain or 0x123",value:a})}),i.jsx(u,{width:"100%",children:i.jsx(qe,{options:B(k.allowedNetworks),value:e.chain,onSelect:l=>t({chain:l})})})]})},p="All",C=150,O=({filters:e,setFilter:t})=>{const a=v.useRef(null),{data:s,isLoading:r}=Ve(),l=r?Array(15).fill(0):(s==null?void 0:s.tags)||[];return i.jsxs(u,{display:"flex",alignItems:"center",css:W`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{ml:"346px"},children:[i.jsx(I,{iconOnly:i.jsx(H,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=a==null?void 0:a.current)==null||n.scrollBy({left:-C,behavior:"smooth"})}}),i.jsxs(u,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:a,children:[!r&&i.jsx(U,{isActive:e.category===p,onClick:()=>t({category:p}),children:p}),l.map((n,o)=>i.jsx(Ae,{isLoading:r,width:"200px",borderRadius:"radius-round",children:i.jsx(U,{isActive:n===e.category,onClick:()=>t({category:n}),children:n},`${o}`)}))]}),i.jsx(I,{iconOnly:i.jsx(K,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=a==null?void 0:a.current)==null||n.scrollBy({left:C,behavior:"smooth"})}})]})},$=({channelDetails:e,isLoading:t})=>{const{data:a,refetch:s,isLoading:r}=at(),l=()=>{s()},n=a==null?void 0:a.find(h=>h.channel===(e==null?void 0:e.channel)),o=JSON.parse((n==null?void 0:n.user_settings)||"[]")||[];return i.jsx(et,{channelDetails:e,isLoading:t,isSubscribed:!!n,isSubscriptionLoading:r,handleRefetch:l,userSettings:o,width:{initial:"inherit",tb:"auto",lp:"auto"}})},z=({channels:e,hasMoreData:t,isLoading:a,isLoadingNextPage:s,loadMore:r})=>i.jsxs(u,{height:"100%",overflow:"auto",customScrollbar:!0,css:W`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${G.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${G.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[i.jsx(Ge,{pageStart:1,loadMore:r,hasMore:t,useWindow:!1,threshold:150,className:"channel-scroll",children:e.map((l,n)=>i.jsx($,{channelDetails:l,isLoading:a},`${n}`))}),s&&i.jsx(u,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:i.jsx(Re,{size:"medium",variant:"primary"})})]}),q=()=>{var w,x;const e=B(k.allowedNetworks),{filters:t,setFilter:a}=ee({initialChain:e[0].value,initialCategory:p}),s=(w=e.find(y=>y.value===t.chain))==null?void 0:w.label.includes("Ethereum"),{data:r,isLoading:l,fetchNextPage:n,isFetchingNextPage:o,hasNextPage:h}=We({pageSize:21,order:Z.ChannelListOrderType.DESCENDING,sort:Z.ChannelListSortType.SUBSCRIBER,chain:s?"":t.chain,tag:t.category===p?"":t.category}),{data:d,isLoading:g,fetchNextPage:m,isFetchingNextPage:_,hasNextPage:j}=Y({pageSize:21,query:t.search,chain:s?"":t.chain,tag:t.category===p?"":t.category}),L=l||g?Array(9).fill(0):((x=t.search?d:r)==null?void 0:x.pages.flatMap(y=>y.channels))||[],N=t.search?!_&&j:!o&&h;return i.jsx(u,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",padding:"spacing-md spacing-md spacing-none spacing-md",children:i.jsx(u,{display:"flex",flexDirection:"column",width:"100%",gap:"spacing-md",children:i.jsxs(u,{display:"flex",flexDirection:"column",gap:"spacing-sm",height:"100%",children:[i.jsx(F,{filters:t,setFilter:a}),i.jsx(O,{filters:t,setFilter:a}),i.jsx(z,{channels:L,hasMoreData:N,isLoading:l||g,isLoadingNextPage:o||_,loadMore:t.search?m:n})]})})})},X=()=>i.jsx(it,{variant:"verticalStretch",children:i.jsx(q,{})})});export{ct as __tla,X as default};
