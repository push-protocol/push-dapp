import{fh as R,fk as A,gI as K,gJ as F,d_ as j,e1 as n,eu as N,e2 as i,gK as T,dY as V,eq as m,es as P,et as q,gL as E,eo as x,en as f,gM as J,dZ as _,ej as O,e0 as b,gN as $,gx as B,ev as H,gO as Q,ew as U,gP as W,e5 as Y,gQ as Z,gR as G,__tla as X}from"./index-BAjRPsh3.js";import{u as ee,__tla as ne}from"./useGetChannelsList-DBYLb4B_.js";import{u as ie,S as ae,U as se,N as te,V as le,T as re,__tla as ce}from"./VerifiedChannelTooltipContent-DC9uM7U3.js";import{C as oe,__tla as de}from"./Copy-D1DpIMx9.js";import{I as he,__tla as xe}from"./InfiniteScroll-C6sZaUsF.js";import{C as ge,__tla as pe}from"./ContentLayout-CxwHFvX-.js";import"./notifSetting-DrLKauYy.js";import{__tla as me}from"./useMutation-BBwZGWZi.js";import{__tla as ue}from"./OptOut-DefqRWXZ.js";import{__tla as fe}from"./PushLogo-Dm8yNcm2.js";let M,je=Promise.all([(()=>{try{return X}catch{}})(),(()=>{try{return ne}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return xe}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return ue}catch{}})(),(()=>{try{return fe}catch{}})()]).then(async()=>{let w,v,S,C,y,k,L,D,I;w=e=>e==null?void 0:e.notifications,v=({userPushSDKInstance:e,address:r,limit:c,page:l})=>e.channel.notifications(r,{page:l,limit:c}).then(w),S=(e,r,c)=>{const{userPushSDKInstance:l}=R(h=>h.user);return A({queryKey:[K,e],queryFn:()=>v({userPushSDKInstance:l,address:e,page:r,limit:c}),enabled:e!==F})},C=({tooltipTitle:e,content:r})=>{const[c,l]=j.useState(!1);return n.jsx(N,{title:e,children:n.jsx(i,{cursor:"pointer",display:"flex",onClick:()=>T(r),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:n.jsx(oe,{color:c?"icon-primary":"icon-tertiary",size:12})})})},y=({channel:e})=>{var a;const{wallet:r}=V(),c=!!((a=r==null?void 0:r.accounts)!=null&&a.length),{data:l,refetch:h,isLoading:d}=ie(e==null?void 0:e.channel,{enabled:c}),s=l&&(l==null?void 0:l.length),t=()=>{h()};return n.jsxs(m,{isLoading:d,children:[e&&!s&&n.jsx(ae,{channelDetails:e,onSuccess:t,children:n.jsx(P,{variant:"tertiary",size:"small",block:!0,children:"Subscribe"})}),e&&!!s&&n.jsx(se,{channelDetail:e,onSuccess:t,userSetting:JSON.parse(l[0].user_settings),children:n.jsx(P,{variant:"secondary",size:"small",block:!0,leadingIcon:n.jsx(te,{}),trailingIcon:n.jsx(q,{}),children:"Subscribed"})})]})},k=({channelAddress:e})=>{const{mode:r}=E(),{data:c,isLoading:l,isSuccess:h}=S(e,1,20),d=l?Array(10).fill(0):c;return n.jsxs(i,{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"scroll",customScrollbar:!0,gap:"spacing-sm",children:[n.jsx(i,{padding:{ml:"spacing-none spacing-sm"},children:n.jsx(x,{color:"text-primary",variant:"h4-semibold",children:"Recent Notifications"})}),n.jsxs(i,{display:"flex",width:"-webkit-fill-available",height:"100%",flexDirection:"column",gap:"spacing-sm",padding:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-xxs spacing-none spacing-none"},margin:{ml:"spacing-none spacing-xxs",initial:"spacing-none spacing-sm spacing-none spacing-none"},overflow:"scroll",justifyContent:"flex-start",customScrollbar:!0,children:[h&&!l&&!(d!=null&&d.length)&&n.jsx(i,{display:"flex",alignSelf:"center",width:"fit-content",borderRadius:"radius-xl",backgroundColor:"surface-secondary",padding:"spacing-xxs spacing-sm",children:n.jsxs(x,{color:"text-primary",variant:"bs-regular",children:[" ","No notifications to show yet"]})}),d==null?void 0:d.map(s=>{var a,g,o,p;const t=(a=s==null?void 0:s.message)==null?void 0:a.payload;return n.jsx(m,{isLoading:l,children:n.jsx(i,{css:f`
                  & > div {
                    margin: 0;
                  }
                `,children:n.jsx(J,{notificationTitle:t==null?void 0:t.title,notificationBody:t==null?void 0:t.body,cta:t==null?void 0:t.cta,image:t==null?void 0:t.embed,app:(g=s==null?void 0:s.channel)==null?void 0:g.name,icon:(o=s==null?void 0:s.channel)==null?void 0:o.icon,url:(p=s==null?void 0:s.channel)==null?void 0:p.url,chainName:s==null?void 0:s.source,theme:r})},s.payload_id)})})]})]})},L=({channel:e,isLoading:r})=>{var a,g;const[c,l]=j.useState(!1),h=_(),d=((e==null?void 0:e.info)||"").length>250,s=d?c?(e==null?void 0:e.info)||"":((e==null?void 0:e.info)||"").substring(0,250):(e==null?void 0:e.info)||"";let t=[O.coreContractChain,...((a=e==null?void 0:e.aliases)==null?void 0:a.filter(o=>o.is_alias_verified).map(o=>parseInt(o.alias_blockchain_id)))||[]];return n.jsxs(i,{display:"flex",flexDirection:"column",width:"100%",height:"100%",gap:"spacing-xl",children:[n.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",padding:{initial:"spacing-none spacing-md spacing-none spacing-none",ml:"spacing-sm"},children:[n.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xs",width:"100%",children:[n.jsx(i,{onClick:()=>h(b.Channels),cursor:"pointer",children:n.jsx($,{size:24,color:"icon-primary"})}),n.jsxs(i,{display:"flex",justifyContent:"space-between",width:"100%",children:[n.jsxs(i,{display:"flex",gap:{initial:"spacing-sm",ml:"spacing-xs"},alignItems:{initial:"center",ml:"flex-start"},children:[n.jsxs(m,{isLoading:r,children:[n.jsx(i,{width:"90px",height:"90px",borderRadius:"radius-md",overflow:"hidden",border:"border-sm solid stroke-secondary",display:{initial:"flex",ml:"none"},css:f`
                    flex-shrink: 0;
                  `,children:n.jsx("img",{width:"100%",height:"100%",src:(e==null?void 0:e.iconV2)||"",alt:(e==null?void 0:e.name)||""})}),n.jsx(i,{width:"52px",height:"52px",borderRadius:"radius-sm",border:"border-sm solid stroke-secondary",display:{initial:"none",ml:"flex"},overflow:"hidden",children:n.jsx("img",{width:"100%",height:"100%",src:(e==null?void 0:e.iconV2)||"",alt:(e==null?void 0:e.name)||""})})]}),n.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xs",children:[n.jsx(m,{isLoading:r,children:n.jsxs(i,{display:"flex",flexDirection:"column",children:[n.jsxs(i,{display:"flex",alignItems:"center",gap:"spacing-xxxs",children:[n.jsx(x,{color:"text-primary",variant:"h4-semibold",children:(e==null?void 0:e.name)||""}),!!(e!=null&&e.verified_status)&&n.jsx(N,{overlay:n.jsx(le,{}),children:n.jsx(i,{cursor:"pointer",display:"flex",children:n.jsx(re,{color:"icon-tertiary",size:18})})}),t.length>0&&n.jsx(i,{display:"flex",alignItems:"center",margin:"spacing-none spacing-none spacing-none spacing-xxxs",children:t.map(o=>{const p=U[o];return p?n.jsx(i,{display:"flex",css:f`
                                  margin-left: -4px;
                                `,children:n.jsx(p,{width:18,height:18},o)}):null})})]}),n.jsxs(i,{display:"flex",gap:"spacing-xxxs",alignItems:"center",children:[n.jsx(x,{color:"text-tertiary",variant:"bs-regular",children:B((e==null?void 0:e.channel)||"",10,10)||""}),n.jsx(C,{tooltipTitle:"Copy Address",content:(e==null?void 0:e.channel)||""})]})]})}),n.jsx(m,{isLoading:r,children:n.jsxs(i,{display:"flex",gap:"spacing-xs",css:f`
                      flex-wrap: wrap;
                    `,alignItems:"center",children:[n.jsxs(x,{color:"text-tertiary-inverse",variant:"c-regular",children:[H(e==null?void 0:e.subscriber_count)," subscribers"]}),((g=e==null?void 0:e.tags)==null?void 0:g[0])&&n.jsx(Q,{label:e.tags[0],variant:"info"})]})})]})]}),n.jsx(i,{display:{initial:"inline",ml:"none"},children:n.jsx(y,{channel:e})})]})]}),n.jsx(m,{isLoading:r,children:n.jsxs(i,{children:[n.jsx(x,{display:{initial:"inline",ml:"none"},variant:"bs-regular",color:"text-tertiary",as:"span",children:s}),n.jsx(x,{display:{initial:"none",ml:"inline"},variant:"bs-regular",color:"text-tertiary",as:"span",children:s}),d&&n.jsxs(i,{as:"span",cursor:"pointer",onClick:()=>l(!c),children:[n.jsxs(x,{display:{initial:"inline",ml:"none"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]}),n.jsxs(x,{display:{initial:"none",ml:"inline"},color:"text-brand-medium",as:"span",children:[" ",`Show ${c?"Less":"More"}`]})]})]})}),n.jsx(i,{display:{initial:"none",ml:"block"},children:n.jsx(y,{channel:e})})]}),n.jsx(k,{channelAddress:e==null?void 0:e.channel})]})},D=({channels:e,fetchNextPage:r,setSelectedChannelId:c,isLoading:l,hasMoreData:h,isFetchingNextPage:d})=>{const s=_(),t=a=>{c(a==null?void 0:a.channel),s(b.ChannelDetails(a==null?void 0:a.channel))};return n.jsxs(i,{display:{initial:"flex",ml:"none"},width:"fit-content",justifyContent:"flex-start",overflow:"scroll",customScrollbar:!0,height:"100%",maxHeight:"100%",padding:"spacing-none spacing-sm spacing-none spacing-none",flexDirection:"column",children:[n.jsx(he,{pageStart:1,loadMore:()=>{r()},hasMore:h,useWindow:!1,threshold:150,children:n.jsx(i,{display:"flex",flexDirection:"column",gap:"spacing-md",children:e==null?void 0:e.map(a=>n.jsx(m,{isLoading:l,children:n.jsx(i,{width:"46px",height:"46px",overflow:"hidden",borderRadius:"radius-sm",cursor:"pointer",onClick:()=>t(a),css:f`
                  flex-shrink: 0;
                `,children:n.jsx("img",{width:"100%",height:"100%",src:a==null?void 0:a.iconV2,alt:a==null?void 0:a.name})},a==null?void 0:a.channel)}))})}),d&&n.jsx(i,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:n.jsx(W,{size:"small",variant:"primary"})})]})},I=()=>{const{id:e}=Y(),r=_(),[c,l]=j.useState(e||""),{data:h,fetchNextPage:d,hasNextPage:s,isLoading:t,isFetchingNextPage:a}=ee({pageSize:15}),{data:g}=Z(e||""),o=t?Array(10).fill(0):(h==null?void 0:h.pages.flatMap(u=>u.channels))||[],p=!a&&s,z=(o==null?void 0:o.find(u=>(u==null?void 0:u.channel)===c))||g;return j.useEffect(()=>{G.isAddress(e||"")||r(b.Channels)},[e]),(o==null?void 0:o.length)&&n.jsxs(i,{width:"-webkit-fill-available",padding:{initial:"spacing-md spacing-none spacing-none spacing-sm",ml:"spacing-none"},display:"flex",height:"100%",justifyContent:"flex-start",borderRadius:"radius-md radius-md radius-none radius-none",gap:"spacing-md",border:"border-sm solid stroke-secondary",backgroundColor:"surface-primary",children:[n.jsx(D,{channels:o,fetchNextPage:d,hasMoreData:p,isLoading:t,setSelectedChannelId:l,isFetchingNextPage:a}),n.jsx(L,{channel:z,isLoading:t})]})},M=()=>n.jsx(ge,{variant:"verticalStretch",children:n.jsx(I,{})})});export{je as __tla,M as default};
