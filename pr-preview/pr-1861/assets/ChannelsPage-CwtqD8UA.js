import{e1 as r,en as R,gi as ke,ej as L,hR as Me,hS as Ee,fe as Oe,d_ as m,eh as Ie,e2 as d,gY as ze,gW as Ae,gV as B,el as W,ep as G,hT as $e,hz as U,he as qe,fM as J,__tla as Re}from"./index-B_79j7FX.js";import{u as Be,__tla as We}from"./useGetChannelsList-Bf3E1Zu6.js";import{u as Ge,I as Ue,__tla as Je}from"./InfiniteScroll-CWB53cmC.js";import{_ as Ke,a as He,i as Qe,b as K}from"./isObjectLike-CoQ2zMHe.js";import{S as Ve,__tla as Ye}from"./Search-C7upyl7_.js";import{C as Xe,__tla as Ze}from"./ChannelDetailsCard-Cm9XXP9U.js";import{u as et,__tla as tt}from"./VerifiedChannelTooltipContent-CXOQs2FE.js";import{C as at,__tla as rt}from"./ContentLayout-52a8SL5H.js";import"./notifSetting-DrLKauYy.js";import{__tla as it}from"./useMutation-B6ZHWe-x.js";import{__tla as st}from"./OptOut-XWCSntNT.js";import{__tla as nt}from"./PushLogo-B45n9cj4.js";let H,lt=Promise.all([(()=>{try{return Re}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return tt}catch{}})(),(()=>{try{return rt}catch{}})(),(()=>{try{return it}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return nt}catch{}})()]).then(async()=>{const Q=e=>{const{svgProps:t,...a}=e;return r.jsx(R,{componentName:"CaretLeft",icon:r.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:r.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...a})},V=e=>{const{svgProps:t,...a}=e;return r.jsx(R,{componentName:"CaretRight",icon:r.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[r.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:r.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),r.jsx("defs",{children:r.jsx("clipPath",{id:"clip0_4239_16009",children:r.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...a})},Y=e=>e,X=({page:e,pageSize:t,query:a})=>ke({method:"GET",url:`${L.apiUrl}/v1/channels/search`,params:{page:e,limit:t,query:a}}).then(s=>Y(s.data)),Z=({pageSize:e,query:t})=>Ge({queryKey:[Me,t],initialPageParam:1,enabled:!!t,queryFn:({pageParam:a})=>X({pageSize:e,page:a,query:t}),getNextPageParam:({itemcount:a},s,i)=>e*(i+1)>=a?null:i+1}),ee=({initialChain:e,initialCategory:t})=>{const[,a]=Ee(),{search:s}=Oe(),i=m.useMemo(()=>Object.fromEntries(new URLSearchParams(s).entries()),[s]),l=n=>{const c=Object.entries({...i,...n}).reduce((h,[u,g])=>g?{...h,[u]:g}:h,{});a(c)};return m.useEffect(()=>{const n={};i.chain||(n.chain=e),i.category||(n.category=t),l(n)},[]),{filters:{chain:(i==null?void 0:i.chain)||e,category:(i==null?void 0:i.category)||t,search:(i==null?void 0:i.search)||""},setFilter:l}};var te=Ke,ae=function(){return te.Date.now()},re=ae,ie=/\s/;function se(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var ne=se,le=ne,oe=/^\s+/;function ce(e){return e&&e.slice(0,le(e)+1).replace(oe,"")}var he=ce,ue=He,de=Qe,fe="[object Symbol]";function pe(e){return typeof e=="symbol"||de(e)&&ue(e)==fe}var ge=pe,me=he,D=K,xe=ge,P=NaN,_e=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^0o[0-7]+$/i,je=parseInt;function we(e){if(typeof e=="number")return e;if(xe(e))return P;if(D(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=D(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=me(e);var a=ve.test(e);return a||ye.test(e)?je(e.slice(2),a?2:8):_e.test(e)?P:+e}var Se=we,be=K,S=re,F=Se,Ne="Expected a function",Ce=Math.max,Le=Math.min;function De(e,t,a){var s,i,l,n,c,h,u=0,g=!1,f=!1,x=!0;if(typeof e!="function")throw new TypeError(Ne);t=F(t)||0,be(a)&&(g=!!a.leading,f="maxWait"in a,l=f?Ce(F(a.maxWait)||0,t):l,x="trailing"in a?!!a.trailing:x);function _(o){var p=s,v=i;return s=i=void 0,u=o,n=e.apply(v,p),n}function N(o){return u=o,c=setTimeout(w,t),g?_(o):n}function y(o){var p=o-h,v=o-u,q=t-p;return f?Le(q,l-v):q}function j(o){var p=o-h,v=o-u;return h===void 0||p>=t||p<0||f&&v>=l}function w(){var o=S();if(j(o))return $(o);c=setTimeout(w,y(o))}function $(o){return c=void 0,x&&s?_(o):(s=i=void 0,n)}function Fe(){c!==void 0&&clearTimeout(c),u=0,s=h=i=c=void 0}function Te(){return c===void 0?n:$(S())}function C(){var o=S(),p=j(o);if(s=arguments,i=this,h=o,p){if(c===void 0)return N(h);if(f)return clearTimeout(c),c=setTimeout(w,t),_(h)}return c===void 0&&(c=setTimeout(w,t)),n}return C.cancel=Fe,C.flush=Te,C}var Pe=De;let T,k,b,M,E,O,I,z,A;T=Ie(Pe),k=({filters:e,setFilter:t})=>{const[a,s]=m.useState(e.search),i=m.useCallback(T(l=>{t({search:l})},800),[]);return m.useEffect(()=>{i(a)},[a]),r.jsxs(d,{display:"flex",gap:"spacing-xs",flexDirection:"row",width:"100%",children:[r.jsx(d,{width:"100%",children:r.jsx(ze,{icon:r.jsx(Ve,{}),onChange:l=>s(l.target.value),placeholder:"Search Web3 domain or 0x123",value:a})}),r.jsx(d,{width:"100%",children:r.jsx(Ae,{options:B(L.allowedNetworks),value:e.chain,onSelect:l=>t({chain:l})})})]})},b=150,M=({filters:e,setFilter:t})=>{const a=m.useRef(null);return r.jsxs(d,{display:"flex",alignItems:"center",css:W`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{ml:"346px"},children:[r.jsx(G,{iconOnly:r.jsx(Q,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollBy({left:-b,behavior:"smooth"})}}),r.jsx(d,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:a,children:E.map((s,i)=>r.jsx($e,{isActive:s===e.category,onClick:()=>t({category:s}),children:s},`${i}`))}),r.jsx(G,{iconOnly:r.jsx(V,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollBy({left:b,behavior:"smooth"})}})]})},E=["All","Subscribed","DEFI","DAO","NFT","Metaverse","Tooling","Infrastrucuture","Gaming","Social","Serivce","DEFI","DAO","NFT"],O=({channelDetails:e,isLoading:t})=>{const{data:a,refetch:s,isLoading:i}=et(),l=()=>{s()},n=a==null?void 0:a.find(h=>h.channel===(e==null?void 0:e.channel)),c=JSON.parse((n==null?void 0:n.user_settings)||"[]")||[];return r.jsx(Xe,{channelDetails:e,isLoading:t,isSubscribed:!!n,isSubscriptionLoading:i,handleRefetch:l,userSettings:c,width:{initial:"inherit",tb:"auto",lp:"auto"}})},I=({channels:e,hasMoreData:t,isLoading:a,isLoadingNextPage:s,loadMore:i})=>r.jsxs(d,{height:"100%",overflow:"auto",customScrollbar:!0,css:W`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${U.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${U.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[r.jsx(Ue,{pageStart:1,loadMore:i,hasMore:t,useWindow:!1,threshold:150,className:"channel-scroll",children:e.map((l,n)=>r.jsx(O,{channelDetails:l,isLoading:a},`${n}`))}),s&&r.jsx(d,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:r.jsx(qe,{size:"medium",variant:"primary"})})]}),z=()=>{var y;const e=B(L.allowedNetworks),{filters:t,setFilter:a}=ee({initialChain:e[0].value,initialCategory:A[0]}),{data:s,isLoading:i,fetchNextPage:l,isFetchingNextPage:n,hasNextPage:c}=Be({pageSize:21,order:J.ChannelListOrderType.DESCENDING,sort:J.ChannelListSortType.SUBSCRIBER}),{data:h,isLoading:u,fetchNextPage:g,isFetchingNextPage:f,hasNextPage:x}=Z({pageSize:21,query:t.search}),_=i||u?Array(9).fill(0):((y=t.search?h:s)==null?void 0:y.pages.flatMap(j=>j.channels))||[],N=t.search?!f&&x:!n&&c;return r.jsx(d,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",padding:"spacing-md spacing-md spacing-none spacing-md",children:r.jsx(d,{display:"flex",flexDirection:"column",width:"100%",gap:"spacing-md",children:r.jsxs(d,{display:"flex",flexDirection:"column",gap:"spacing-sm",height:"100%",children:[r.jsx(k,{filters:t,setFilter:a}),r.jsx(M,{filters:t,setFilter:a}),r.jsx(I,{channels:_,hasMoreData:N,isLoading:i||u,isLoadingNextPage:n||f,loadMore:t.search?g:l})]})})})},A=["All","Subscribed","DEFI","DAO","NFT","Metaverse","Tooling","Infrastrucuture","Gaming","Social","Serivce","DEFI","DAO","NFT"],H=()=>r.jsx(at,{variant:"verticalStretch",children:r.jsx(z,{})})});export{lt as __tla,H as default};
