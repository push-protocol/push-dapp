import{e1 as r,en as R,ff as Ee,ej as k,hZ as Te,h_ as Fe,fe as Oe,d_ as y,eh as $e,e2 as u,gZ as ze,gX as qe,gW as B,el as W,ep as I,h$ as U,eo as Ae,hA as G,hf as Re,fP as Z,__tla as Be}from"./index-lklA0Vfr.js";import{u as We,__tla as Ie}from"./useGetChannelsList-DRB_Atsf.js";import{u as Ue,I as Ge,__tla as Ze}from"./InfiniteScroll-C1rdAZQY.js";import{_ as Je,a as Xe,i as He,b as J}from"./isObjectLike-CoQ2zMHe.js";import{S as Ke,__tla as Qe}from"./Search-RA4vOCi_.js";import{u as Ve,__tla as Ye}from"./useGetChannelCategories-CDt5JBdy.js";import{C as et,__tla as tt}from"./ChannelDetailsCard-BDLSBJYF.js";import{u as at,__tla as rt}from"./VerifiedChannelTooltipContent-DX7WaqID.js";import{C as it,__tla as st}from"./ContentLayout-Bq-X-aMI.js";import"./notifSetting-DrLKauYy.js";import{__tla as nt}from"./useMutation-pcOVAFPQ.js";import{__tla as lt}from"./OptOut-CfIufiCi.js";import{__tla as ot}from"./PushLogo-BmPtnD3s.js";let X,ct=Promise.all([(()=>{try{return Be}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return tt}catch{}})(),(()=>{try{return rt}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return lt}catch{}})(),(()=>{try{return ot}catch{}})()]).then(async()=>{const H=e=>{const{svgProps:t,...a}=e;return r.jsx(R,{componentName:"CaretLeft",icon:r.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:r.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...a})},K=e=>{const{svgProps:t,...a}=e;return r.jsx(R,{componentName:"CaretRight",icon:r.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[r.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:r.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),r.jsx("defs",{children:r.jsx("clipPath",{id:"clip0_4239_16009",children:r.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...a})},Q=e=>e,V=({page:e,pageSize:t,query:a,chain:n})=>Ee({method:"GET",url:`${k.apiUrl}/v1/channels/search`,params:{page:e,limit:t,query:a,...n?{filter:n}:{}}}).then(i=>Q(i.data)),Y=({pageSize:e,query:t,chain:a})=>Ue({queryKey:[Te,t,a],initialPageParam:1,enabled:!!t,queryFn:({pageParam:n})=>V({pageSize:e,page:n,query:t,chain:a}),getNextPageParam:({itemcount:n},i,l)=>e*(l+1)>=n?null:l+1}),ee=({initialChain:e,initialCategory:t})=>{const[,a]=Fe(),{search:n}=Oe(),i=y.useMemo(()=>Object.fromEntries(new URLSearchParams(n).entries()),[n]),l=s=>{const o=Object.entries({...i,...s}).reduce((h,[d,f])=>f?{...h,[d]:f}:h,{});console.log(o,i,s,n),a(o)};return y.useEffect(()=>{const s={};i.chain||(s.chain=e),i.category||(s.category=t),Object.keys(s).length&&l(s)},[]),{filters:{chain:(i==null?void 0:i.chain)||e,category:(i==null?void 0:i.category)||"",search:(i==null?void 0:i.search)||""},setFilter:l}};var te=Je,ae=function(){return te.Date.now()},re=ae,ie=/\s/;function se(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var ne=se,le=ne,oe=/^\s+/;function ce(e){return e&&e.slice(0,le(e)+1).replace(oe,"")}var he=ce,ue=Xe,de=He,fe="[object Symbol]";function pe(e){return typeof e=="symbol"||de(e)&&ue(e)==fe}var ge=pe,me=he,M=J,xe=ge,D=NaN,_e=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,je=parseInt;function we(e){if(typeof e=="number")return e;if(xe(e))return D;if(M(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=M(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=me(e);var a=ye.test(e);return a||ve.test(e)?je(e.slice(2),a?2:8):_e.test(e)?D:+e}var be=we,Se=J,S=re,E=be,Le="Expected a function",Ce=Math.max,Ne=Math.min;function Pe(e,t,a){var n,i,l,s,o,h,d=0,f=!1,g=!1,x=!0;if(typeof e!="function")throw new TypeError(Le);t=E(t)||0,Se(a)&&(f=!!a.leading,g="maxWait"in a,l=g?Ce(E(a.maxWait)||0,t):l,x="trailing"in a?!!a.trailing:x);function j(c){var p=n,b=i;return n=i=void 0,d=c,s=e.apply(b,p),s}function C(c){return d=c,o=setTimeout(m,t),f?j(c):s}function N(c){var p=c-h,b=c-d,A=t-p;return g?Ne(A,l-b):A}function w(c){var p=c-h,b=c-d;return h===void 0||p>=t||p<0||g&&b>=l}function m(){var c=S();if(w(c))return _(c);o=setTimeout(m,N(c))}function _(c){return o=void 0,x&&n?j(c):(n=i=void 0,s)}function Me(){o!==void 0&&clearTimeout(o),d=0,n=h=i=o=void 0}function De(){return o===void 0?s:_(S())}function P(){var c=S(),p=w(c);if(n=arguments,i=this,h=c,p){if(o===void 0)return C(h);if(g)return clearTimeout(o),o=setTimeout(m,t),j(h)}return o===void 0&&(o=setTimeout(m,t)),s}return P.cancel=Me,P.flush=De,P}var ke=Pe;let T,F,v,L,O,$,z,q;T=$e(ke),F=({filters:e,setFilter:t})=>{const[a,n]=y.useState(e.search),i=y.useCallback(T(l=>{t({search:l})},800),[t]);return y.useEffect(()=>{(e.search||a)&&i(a)},[a]),r.jsxs(u,{display:"flex",gap:"spacing-xs",flexDirection:"row",width:"100%",children:[r.jsx(u,{width:"100%",children:r.jsx(ze,{icon:r.jsx(Ke,{}),onChange:l=>n(l.target.value),placeholder:"Search Web3 domain or 0x123",value:a})}),r.jsx(u,{width:"100%",children:r.jsx(qe,{options:B(k.allowedNetworks),value:e.chain,onSelect:l=>t({chain:l})})})]})},v="All",L=150,O=({filters:e,setFilter:t})=>{const a=y.useRef(null),{data:n,isLoading:i}=Ve(),l=i?Array(15).fill(0):(n==null?void 0:n.tags)||[];return r.jsxs(u,{display:"flex",alignItems:"center",css:W`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{ml:"346px"},children:[r.jsx(I,{iconOnly:r.jsx(H,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollBy({left:-L,behavior:"smooth"})}}),r.jsxs(u,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:a,children:[!i&&r.jsx(U,{isActive:e.category===v,onClick:()=>t({category:v}),children:v}),l.map((s,o)=>r.jsx(Ae,{isLoading:i,width:"200px",borderRadius:"radius-round",children:r.jsx(U,{isActive:s===e.category,onClick:()=>t({category:s}),children:s},`${o}`)}))]}),r.jsx(I,{iconOnly:r.jsx(K,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollBy({left:L,behavior:"smooth"})}})]})},$=({channelDetails:e,isLoading:t})=>{const{data:a,refetch:n,isLoading:i}=at(),l=()=>{n()},s=a==null?void 0:a.find(h=>h.channel===(e==null?void 0:e.channel)),o=JSON.parse((s==null?void 0:s.user_settings)||"[]")||[];return r.jsx(et,{channelDetails:e,isLoading:t,isSubscribed:!!s,isSubscriptionLoading:i,handleRefetch:l,userSettings:o,width:{initial:"inherit",tb:"auto",lp:"auto"}})},z=({channels:e,hasMoreData:t,isLoading:a,isLoadingNextPage:n,loadMore:i})=>r.jsxs(u,{height:"100%",overflow:"auto",customScrollbar:!0,css:W`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${G.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${G.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[r.jsx(Ge,{pageStart:1,loadMore:i,hasMore:t,useWindow:!1,threshold:150,className:"channel-scroll",children:e.map((l,s)=>r.jsx($,{channelDetails:l,isLoading:a},`${s}`))}),n&&r.jsx(u,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:r.jsx(Re,{size:"medium",variant:"primary"})})]}),q=()=>{var w,m;const e=B(k.allowedNetworks),{filters:t,setFilter:a}=ee({initialChain:e[0].value,initialCategory:v}),n=(w=e.find(_=>_.value===t.chain))==null?void 0:w.label.includes("Ethereum"),{data:i,isLoading:l,fetchNextPage:s,isFetchingNextPage:o,hasNextPage:h}=We({pageSize:21,order:Z.ChannelListOrderType.DESCENDING,sort:Z.ChannelListSortType.SUBSCRIBER,chain:n?"":t.chain}),{data:d,isLoading:f,fetchNextPage:g,isFetchingNextPage:x,hasNextPage:j}=Y({pageSize:21,query:t.search,chain:n?"":t.chain}),C=l||f?Array(9).fill(0):((m=t.search?d:i)==null?void 0:m.pages.flatMap(_=>_.channels))||[],N=t.search?!x&&j:!o&&h;return r.jsx(u,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",padding:"spacing-md spacing-md spacing-none spacing-md",children:r.jsx(u,{display:"flex",flexDirection:"column",width:"100%",gap:"spacing-md",children:r.jsxs(u,{display:"flex",flexDirection:"column",gap:"spacing-sm",height:"100%",children:[r.jsx(F,{filters:t,setFilter:a}),r.jsx(O,{filters:t,setFilter:a}),r.jsx(z,{channels:C,hasMoreData:N,isLoading:l||f,isLoadingNextPage:o||x,loadMore:t.search?g:s})]})})})},X=()=>r.jsx(it,{variant:"verticalStretch",children:r.jsx(q,{})})});export{ct as __tla,X as default};
