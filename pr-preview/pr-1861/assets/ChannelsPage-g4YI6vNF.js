import{e1 as r,en as q,gi as Fe,ej as C,hR as ke,hS as Me,fe as Ee,d_ as m,eh as Oe,e2 as d,gY as Ie,gW as ze,gV as R,el as W,ep as B,hT as Ae,hz as G,he as $e,fM as U,__tla as qe}from"./index-CslCqxx-.js";import{u as Re,__tla as We}from"./useGetChannelsList-B-0ZBbUD.js";import{u as Be,I as Ge,__tla as Ue}from"./InfiniteScroll-BIOq8nPF.js";import{_ as Je,a as He,i as Ke,b as J}from"./isObjectLike-CoQ2zMHe.js";import{S as Qe,__tla as Ve}from"./Search-Dbuljb10.js";import{C as Ye,__tla as Xe}from"./ChannelDetailsCard-DgRKKe7-.js";import{u as Ze,__tla as et}from"./VerifiedChannelTooltipContent-BNjj4ZMx.js";import{C as tt,__tla as at}from"./ContentLayout-B3Uc6QsI.js";import"./notifSetting-DrLKauYy.js";import{__tla as rt}from"./useMutation-wdG_2iQD.js";import{__tla as it}from"./OptOut-BzhE0g-O.js";import{__tla as st}from"./PushLogo-D5rXiq_y.js";let H,nt=Promise.all([(()=>{try{return qe}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return et}catch{}})(),(()=>{try{return at}catch{}})(),(()=>{try{return rt}catch{}})(),(()=>{try{return it}catch{}})(),(()=>{try{return st}catch{}})()]).then(async()=>{const K=e=>{const{svgProps:t,...a}=e;return r.jsx(q,{componentName:"CaretLeft",icon:r.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:r.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...a})},Q=e=>{const{svgProps:t,...a}=e;return r.jsx(q,{componentName:"CaretRight",icon:r.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[r.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:r.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),r.jsx("defs",{children:r.jsx("clipPath",{id:"clip0_4239_16009",children:r.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...a})},V=e=>e,Y=({page:e,pageSize:t,query:a})=>Fe({method:"GET",url:`${C.apiUrl}/v1/channels/search`,params:{page:e,limit:t,query:a}}).then(s=>V(s.data)),X=({pageSize:e,query:t})=>Be({queryKey:[ke,t],initialPageParam:1,enabled:!!t,queryFn:({pageParam:a})=>Y({pageSize:e,page:a,query:t}),getNextPageParam:({itemcount:a},s,i)=>e*(i+1)>=a?null:i+1}),Z=({initialChain:e,initialCategory:t})=>{const[,a]=Me(),{search:s}=Ee(),i=m.useMemo(()=>Object.fromEntries(new URLSearchParams(s).entries()),[s]),l=n=>{const c=Object.entries({...i,...n}).reduce((h,[u,g])=>g?{...h,[u]:g}:h,{});a(c)};return m.useEffect(()=>{const n={};i.chain||(n.chain=e),i.category||(n.category=t),l(n)},[]),{filters:{chain:(i==null?void 0:i.chain)||e,category:(i==null?void 0:i.category)||t,search:(i==null?void 0:i.search)||""},setFilter:l}};var ee=Je,te=function(){return ee.Date.now()},ae=te,re=/\s/;function ie(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var se=ie,ne=se,le=/^\s+/;function oe(e){return e&&e.slice(0,ne(e)+1).replace(le,"")}var ce=oe,he=He,ue=Ke,de="[object Symbol]";function fe(e){return typeof e=="symbol"||ue(e)&&he(e)==de}var pe=fe,ge=ce,L=J,me=pe,D=NaN,xe=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,ye=parseInt;function je(e){if(typeof e=="number")return e;if(me(e))return D;if(L(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=L(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ge(e);var a=_e.test(e);return a||ve.test(e)?ye(e.slice(2),a?2:8):xe.test(e)?D:+e}var we=je,Se=J,S=ae,T=we,be="Expected a function",Ne=Math.max,Ce=Math.min;function Le(e,t,a){var s,i,l,n,c,h,u=0,g=!1,f=!1,x=!0;if(typeof e!="function")throw new TypeError(be);t=T(t)||0,Se(a)&&(g=!!a.leading,f="maxWait"in a,l=f?Ne(T(a.maxWait)||0,t):l,x="trailing"in a?!!a.trailing:x);function _(o){var p=s,v=i;return s=i=void 0,u=o,n=e.apply(v,p),n}function b(o){return u=o,c=setTimeout(w,t),g?_(o):n}function y(o){var p=o-h,v=o-u,$=t-p;return f?Ce($,l-v):$}function j(o){var p=o-h,v=o-u;return h===void 0||p>=t||p<0||f&&v>=l}function w(){var o=S();if(j(o))return A(o);c=setTimeout(w,y(o))}function A(o){return c=void 0,x&&s?_(o):(s=i=void 0,n)}function Te(){c!==void 0&&clearTimeout(c),u=0,s=h=i=c=void 0}function Pe(){return c===void 0?n:A(S())}function N(){var o=S(),p=j(o);if(s=arguments,i=this,h=o,p){if(c===void 0)return b(h);if(f)return clearTimeout(c),c=setTimeout(w,t),_(h)}return c===void 0&&(c=setTimeout(w,t)),n}return N.cancel=Te,N.flush=Pe,N}var De=Le;let P,F,k,M,E,O,I,z;P=Oe(De),F=({filters:e,setFilter:t})=>{const[a,s]=m.useState(e.search),i=m.useCallback(P(l=>{t({search:l})},800),[]);return m.useEffect(()=>{i(a)},[a]),r.jsxs(d,{display:"flex",gap:"spacing-xs",flexDirection:"row",width:"100%",children:[r.jsx(d,{width:"100%",children:r.jsx(Ie,{icon:r.jsx(Qe,{}),onChange:l=>s(l.target.value),placeholder:"Search Web3 domain or 0x123",value:a})}),r.jsx(d,{width:"100%",children:r.jsx(ze,{options:R(C.allowedNetworks),value:e.chain,onSelect:l=>t({chain:l})})})]})},k=({filters:e,setFilter:t})=>{const a=m.useRef(null);return r.jsxs(d,{display:"flex",alignItems:"center",css:W`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{ml:"346px"},children:[r.jsx(B,{iconOnly:r.jsx(K,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollTo({left:0,behavior:"smooth"})}}),r.jsx(d,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:a,children:M.map((s,i)=>r.jsx(Ae,{isActive:s===e.category,onClick:()=>t({category:s}),children:s},`${i}`))}),r.jsx(B,{iconOnly:r.jsx(Q,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var s;(s=a==null?void 0:a.current)==null||s.scrollTo({left:a==null?void 0:a.current.scrollWidth,behavior:"smooth"})}})]})},M=["All","Subscribed","DEFI","DAO","NFT","Metaverse","Tooling","Infrastrucuture","Gaming","Social","Serivce","DEFI","DAO","NFT"],E=({channelDetails:e,isLoading:t})=>{const{data:a,refetch:s,isLoading:i}=Ze(),l=()=>{s()},n=a==null?void 0:a.find(h=>h.channel===(e==null?void 0:e.channel)),c=JSON.parse((n==null?void 0:n.user_settings)||"[]")||[];return r.jsx(Ye,{channelDetails:e,isLoading:t,isSubscribed:!!n,isSubscriptionLoading:i,handleRefetch:l,userSettings:c,width:{initial:"inherit",tb:"auto",lp:"auto"}})},O=({channels:e,hasMoreData:t,isLoading:a,isLoadingNextPage:s,loadMore:i})=>r.jsxs(d,{height:"100%",overflow:"auto",customScrollbar:!0,css:W`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${G.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${G.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[r.jsx(Ge,{pageStart:1,loadMore:i,hasMore:t,useWindow:!1,threshold:150,className:"channel-scroll",children:e.map((l,n)=>r.jsx(E,{channelDetails:l,isLoading:a},`${n}`))}),s&&r.jsx(d,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:r.jsx($e,{size:"medium",variant:"primary"})})]}),I=()=>{var y;const e=R(C.allowedNetworks),{filters:t,setFilter:a}=Z({initialChain:e[0].value,initialCategory:z[0]}),{data:s,isLoading:i,fetchNextPage:l,isFetchingNextPage:n,hasNextPage:c}=Re({pageSize:21,order:U.ChannelListOrderType.DESCENDING,sort:U.ChannelListSortType.SUBSCRIBER}),{data:h,isLoading:u,fetchNextPage:g,isFetchingNextPage:f,hasNextPage:x}=X({pageSize:21,query:t.search}),_=i||u?Array(9).fill(0):((y=t.search?h:s)==null?void 0:y.pages.flatMap(j=>j.channels))||[],b=t.search?!f&&x:!n&&c;return r.jsx(d,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",padding:"spacing-md spacing-md spacing-none spacing-md",children:r.jsx(d,{display:"flex",flexDirection:"column",width:"100%",gap:"spacing-md",children:r.jsxs(d,{display:"flex",flexDirection:"column",gap:"spacing-sm",height:"100%",children:[r.jsx(F,{filters:t,setFilter:a}),r.jsx(k,{filters:t,setFilter:a}),r.jsx(O,{channels:_,hasMoreData:b,isLoading:i||u,isLoadingNextPage:n||f,loadMore:t.search?g:l})]})})})},z=["All","Subscribed","DEFI","DAO","NFT","Metaverse","Tooling","Infrastrucuture","Gaming","Social","Serivce","DEFI","DAO","NFT"],H=()=>r.jsx(tt,{variant:"verticalStretch",children:r.jsx(I,{})})});export{nt as __tla,H as default};
