import{e1 as t,ep as I,e$ as Oe,ej as M,hN as Te,hO as ze,fj as Fe,d_ as m,eg as Re,e2 as u,g_ as $e,gY as qe,gX as W,en as L,es as U,hP as G,eq as Be,hs as J,gQ as Ae,fS as K,eo as Ie,__tla as We}from"./index-tumxrPY4.js";import{S as Q,__tla as Ue}from"./Search-CqsHmkcF.js";import{u as Ge,__tla as Je}from"./useGetChannelsList-BAmTb4ju.js";import{u as Ke,I as Qe,__tla as Ve}from"./InfiniteScroll-if6sqIsi.js";import{_ as Xe,a as He,i as Ye,b as V}from"./isObjectLike-CoQ2zMHe.js";import{u as Ze,__tla as ea}from"./useGetChannelCategories-Djo2OFVc.js";import{C as aa,__tla as ta}from"./ChannelDetailsCard-QdaS4nTB.js";import{u as ia,__tla as ra}from"./VerifiedChannelTooltipContent-Dd68uh3l.js";import{C as na,__tla as sa}from"./ContentLayout-0HSOYnwz.js";import"./notifSetting-DrLKauYy.js";import{__tla as la}from"./useMutation-Blu8g4bk.js";import{__tla as oa}from"./OptOut-MAUb9nbb.js";import{__tla as ca}from"./PushLogo-Dxq9fE4m.js";let X,ha=Promise.all([(()=>{try{return We}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return ca}catch{}})()]).then(async()=>{const H=e=>{const{svgProps:a,...i}=e;return t.jsx(I,{componentName:"CaretLeft",icon:t.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,children:t.jsx("path",{d:"M14.8389 17.5875L9.25137 12L14.8389 6.41248",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),...i})},Y=e=>{const{svgProps:a,...i}=e;return t.jsx(I,{componentName:"CaretRight",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,children:[t.jsx("g",{"clip-path":"url(#clip0_4239_16009)",children:t.jsx("path",{d:"M9.25146 6.41254L14.8389 12L9.25146 17.5875",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_4239_16009",children:t.jsx("rect",{width:"15.9553",height:"8.72765",fill:"white",transform:"translate(16.4089 4.02235) rotate(90)"})})})]}),...i})},Z=e=>e,ee=({page:e,pageSize:a,query:i,chain:s,tag:r})=>Oe({method:"GET",url:`${M.apiUrl}/v1/channels/search`,params:{page:e,limit:a,query:i,...s?{filter:s}:{},...r?{tag:r}:{}}}).then(o=>Z(o.data)),ae=({pageSize:e,query:a,chain:i,tag:s})=>Ke({queryKey:[Te,a,i,s],initialPageParam:1,enabled:!!a,queryFn:({pageParam:r})=>ee({pageSize:e,page:r,query:a,chain:i,tag:s}),getNextPageParam:({itemCount:r},o,n)=>(console.log(r,n,e,e*(n+1)>=r),e*(n+1)>=r?null:n+1)}),te=({initialChain:e,initialCategory:a})=>{const[,i]=ze(),{search:s}=Fe(),r=m.useMemo(()=>Object.fromEntries(new URLSearchParams(s).entries()),[s]),o=n=>{const l=Object.entries({...r,...n}).reduce((h,[d,g])=>g?{...h,[d]:g}:h,{});i(l)};return m.useEffect(()=>{const n={};r.chain||(n.chain=e),r.category||(n.category=a),Object.keys(n).length&&o(n)},[]),{filters:{chain:(r==null?void 0:r.chain)||e,category:(r==null?void 0:r.category)||"",search:(r==null?void 0:r.search)||""},setFilter:o}};var ie=Xe,re=function(){return ie.Date.now()},ne=re,se=/\s/;function le(e){for(var a=e.length;a--&&se.test(e.charAt(a)););return a}var oe=le,ce=oe,he=/^\s+/;function ue(e){return e&&e.slice(0,ce(e)+1).replace(he,"")}var de=ue,ge=He,pe=Ye,me="[object Symbol]";function fe(e){return typeof e=="symbol"||pe(e)&&ge(e)==me}var xe=fe,ye=de,E=V,_e=xe,O=NaN,ve=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,we=/^0o[0-7]+$/i,be=parseInt;function Ce(e){if(typeof e=="number")return e;if(_e(e))return O;if(E(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=E(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=ye(e);var i=je.test(e);return i||we.test(e)?be(e.slice(2),i?2:8):ve.test(e)?O:+e}var Se=Ce,Le=V,N=ne,T=Se,Ne="Expected a function",ke=Math.max,Pe=Math.min;function De(e,a,i){var s,r,o,n,l,h,d=0,g=!1,x=!1,_=!0;if(typeof e!="function")throw new TypeError(Ne);a=T(a)||0,Le(i)&&(g=!!i.leading,x="maxWait"in i,o=x?ke(T(i.maxWait)||0,a):o,_="trailing"in i?!!i.trailing:_);function v(c){var p=s,C=r;return s=r=void 0,d=c,n=e.apply(C,p),n}function S(c){return d=c,l=setTimeout(y,a),g?v(c):n}function P(c){var p=c-h,C=c-d,A=a-p;return x?Pe(A,o-C):A}function j(c){var p=c-h,C=c-d;return h===void 0||p>=a||p<0||x&&C>=o}function y(){var c=N();if(j(c))return w(c);l=setTimeout(y,P(c))}function w(c){return l=void 0,_&&s?v(c):(s=r=void 0,n)}function b(){l!==void 0&&clearTimeout(l),d=0,s=h=r=l=void 0}function Ee(){return l===void 0?n:w(N())}function D(){var c=N(),p=j(c);if(s=arguments,r=this,h=c,p){if(l===void 0)return S(h);if(x)return clearTimeout(l),l=setTimeout(y,a),v(h)}return l===void 0&&(l=setTimeout(y,a)),n}return D.cancel=b,D.flush=Ee,D}var Me=De;let z,F,f,k,R,$,q,B;z=Re(Me),F=({filters:e,setFilter:a})=>{const[i,s]=m.useState(e.search),[r,o]=m.useState(!0),n=m.useCallback(z(l=>{a({search:l})},800),[a]);return m.useEffect(()=>{!r&&n(i)},[i]),m.useEffect(()=>{o(!1)},[]),t.jsxs(u,{display:"flex",gap:"spacing-xs",flexDirection:{initial:"row",ml:"column"},width:"100%",children:[t.jsx(u,{width:"100%",children:t.jsx($e,{icon:t.jsx(Q,{}),onChange:l=>s(l.target.value),placeholder:"Search Web3 domain or 0x123",value:i})}),t.jsx(u,{width:{initial:"300px",ml:"100%"},children:t.jsx(qe,{options:W(M.allowedNetworks),value:e.chain,onSelect:l=>a({chain:l})})})]})},f="All",k=150,R=({filters:e,setFilter:a})=>{const i=m.useRef(null),{data:s,isLoading:r}=Ze(),o=r?Array(15).fill(0):(s==null?void 0:s.tags)||[];return t.jsxs(u,{display:"flex",alignItems:"center",css:L`
        flex-shrink: 0;
      `,gap:"spacing-xs",maxWidth:{mm:"346px",ml:"392px"},position:"relative",children:[t.jsx(u,{backgroundColor:"surface-primary",css:L`
          position: absolute;
        `,borderRadius:"radius-round",children:t.jsx(U,{iconOnly:t.jsx(H,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=i==null?void 0:i.current)==null||n.scrollBy({left:-k,behavior:"smooth"})}})}),t.jsxs(u,{display:"flex",overflow:"hidden",gap:"spacing-xs",width:"100%",ref:i,padding:"spacing-none spacing-xxl",children:[!r&&t.jsx(G,{isActive:e.category===f,onClick:()=>a({category:f}),children:f}),o.map((n,l)=>t.jsx(Be,{isLoading:r,width:"200px",borderRadius:"radius-round",children:t.jsx(G,{isActive:n===e.category,onClick:()=>a({category:n}),children:n},`${l}`)}))]}),t.jsx(u,{backgroundColor:"surface-primary",css:L`
          position: absolute;
          right: 0;
        `,borderRadius:"radius-round",children:t.jsx(U,{iconOnly:t.jsx(Y,{}),circular:!0,variant:"outline",size:"small",onClick:()=>{var n;(n=i==null?void 0:i.current)==null||n.scrollBy({left:k,behavior:"smooth"})}})})]})},$=({channelDetails:e,isLoading:a})=>{const{data:i,refetch:s,isLoading:r}=ia(),o=()=>{s()},n=i==null?void 0:i.find(h=>h.channel===(e==null?void 0:e.channel)),l=JSON.parse((n==null?void 0:n.user_settings)||"[]")||[];return t.jsx(aa,{channelDetails:e,isLoading:a,isSubscribed:!!n,isSubscriptionLoading:r,handleRefetch:o,subscribeButtonVariant:"outline",userSettings:l,width:{initial:"inherit",tb:"auto",lp:"auto",mm:"auto"}})},q=({channels:e,hasMoreData:a,isLoading:i,isLoadingNextPage:s,loadMore:r})=>t.jsxs(u,{height:"100%",overflow:"auto",customScrollbar:!0,padding:"spacing-none spacing-xxs",margin:{initial:"spacing-none spacing-sm",ml:"spacing-none spacing-xxs"},css:L`
        .channel-scroll {
          display: grid;
          gap: var(--spacing-md);
          grid-template-columns: repeat(3, minmax(0px, 1fr));

          @media${J.tablet} {
            grid-template-columns: repeat(2, minmax(0px, 1fr));
          }
          @media${J.mobileL} {
            grid-template-columns: repeat(1, minmax(0px, 1fr));
          }
        }
      `,children:[t.jsx(Qe,{pageStart:1,loadMore:r,hasMore:a,useWindow:!1,threshold:150,className:"channel-scroll",children:e.map((o,n)=>t.jsx($,{channelDetails:o,isLoading:i},`${n}`))}),s&&t.jsx(u,{justifyContent:"center",display:"flex",padding:"spacing-sm",children:t.jsx(Ae,{size:"medium",variant:"primary"})})]}),B=()=>{var y,w;const e=W(M.allowedNetworks),{filters:a,setFilter:i}=te({initialChain:e[0].value,initialCategory:f}),s=(y=e.find(b=>b.value===a.chain))==null?void 0:y.label.includes("Ethereum"),{data:r,isLoading:o,fetchNextPage:n,isFetchingNextPage:l,hasNextPage:h}=Ge({pageSize:21,order:K.ChannelListOrderType.DESCENDING,sort:K.ChannelListSortType.SUBSCRIBER,chain:s?"":a.chain,tag:a.category===f?"":a.category}),{data:d,isLoading:g,fetchNextPage:x,isFetchingNextPage:_,hasNextPage:v}=ae({pageSize:21,query:a.search,chain:s?"":a.chain,tag:a.category===f?"":a.category}),S=o||g?Array(9).fill(0):((w=a.search?d:r)==null?void 0:w.pages.flatMap(b=>b.channels))||[],P=a.search?!_&&v:!l&&h,j=o||g;return t.jsx(u,{display:"flex",width:"-webkit-fill-available",overflow:"scroll",height:"100%",children:t.jsxs(u,{display:"flex",flexDirection:"column",width:"100%",gap:{initial:"spacing-md",ml:"spacing-lg"},children:[t.jsxs(u,{display:"flex",flexDirection:"column",gap:"spacing-sm",padding:{initial:"spacing-md spacing-md spacing-none spacing-md",ml:"spacing-sm spacing-sm spacing-none spacing-sm"},children:[t.jsx(F,{filters:a,setFilter:i}),t.jsx(R,{filters:a,setFilter:i})]}),!S.length&&!j?t.jsxs(u,{display:"flex",gap:"spacing-xs",alignItems:"center",flexDirection:"column",justifyContent:"center",height:"100%",children:[t.jsx(Q,{size:48,color:"icon-tertiary"}),t.jsx(Ie,{variant:"h5-bold",children:"No channels to display"})]}):t.jsx(q,{channels:S,hasMoreData:P,isLoading:j,isLoadingNextPage:l||_,loadMore:a.search?x:n})]})})},X=()=>t.jsx(na,{variant:"verticalStretch",children:t.jsx(B,{})})});export{ha as __tla,X as default};
